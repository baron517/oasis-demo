{"version":3,"file":"main.js","sources":["../src/BufferLoader.ts","../src/gltf/Schema.ts","../src/gltf/GLTFUtil.ts","../src/gltf/parser/Parser.ts","../src/gltf/parser/AnimationParser.ts","../src/gltf/parser/BufferParser.ts","../src/gltf/parser/EntityParser.ts","../src/gltf/parser/MaterialParser.ts","../src/gltf/parser/MeshParser.ts","../src/gltf/parser/SceneParser.ts","../src/gltf/parser/SkinParser.ts","../src/gltf/parser/TextureParser.ts","../src/gltf/parser/Validator.ts","../src/gltf/GLTFParser.ts","../src/gltf/GLTFResource.ts","../src/GLTFLoader.ts","../src/JSONLoader.ts","../src/compressed-texture/KhronosTextureContainer.ts","../src/compressed-texture/index.ts","../src/KTXCubeLoader.ts","../src/KTXLoader.ts","../src/Texture2DLoader.ts","../src/TextureCubeLoader.ts","../src/SpriteLoader.ts","../src/SpriteAtlasLoader.ts","../src/EnvLoader.ts","../src/HDRLoader.ts","../src/gltf/extensions/ExtensionParser.ts","../src/gltf/extensions/KHR_draco_mesh_compression.ts","../src/gltf/extensions/KHR_lights_punctual.ts","../src/gltf/extensions/KHR_materials_clearcoat.ts","../src/gltf/extensions/KHR_materials_pbrSpecularGlossiness.ts","../src/gltf/extensions/KHR_materials_unlit.ts","../src/gltf/extensions/KHR_materials_variants.ts","../src/gltf/extensions/KHR_mesh_quantization.ts","../src/gltf/extensions/KHR_texture_transform.ts","../src/gltf/extensions/OASIS_materials_remap.ts","../src/MaterialLoader.ts","../src/resource-deserialize/utils/BufferReader.ts","../src/resource-deserialize/utils/Decorator.ts","../src/resource-deserialize/utils/FileHeader.ts","../src/resource-deserialize/resources/mesh/MeshDecoder.ts","../src/resource-deserialize/resources/texture2D/TextureDecoder.ts","../src/resource-deserialize/resources/prefab/ReflectionParser.ts","../src/resource-deserialize/resources/prefab/PrefabParser.ts","../src/resource-deserialize/resources/scene/SceneParser.ts","../src/resource-deserialize/resources/scene/MeshLoader.ts","../src/resource-deserialize/resources/scene/EditorTextureLoader.ts","../src/resource-deserialize/index.ts","../src/MeshLoader.ts","../src/AnimatorControllerLoader.ts","../src/SceneLoader.ts"],"sourcesContent":["import { resourceLoader, Loader, AssetPromise, AssetType, LoadItem } from \"@oasis-engine/core\";\n\nfunction isBase64(url) {\n  return /^data:(.+?);base64,/.test(url);\n}\n@resourceLoader(AssetType.Buffer, [\"bin\", \"r3bin\"], false)\nclass BufferLoader extends Loader<ArrayBuffer> {\n  load(item: LoadItem): AssetPromise<ArrayBuffer> {\n    const url = item.url;\n    if (isBase64(url)) {\n      return new AssetPromise((resolve) => {\n        const base64Str = url.slice(13 + RegExp.$1.length);\n        const result = Uint8Array.from(atob(base64Str), (c) => c.charCodeAt(0));\n        resolve(result.buffer);\n      });\n    }\n    return this.request(url, {\n      ...item,\n      type: \"arraybuffer\"\n    });\n  }\n}\n","/**\n * Module for glTF 2.0 Interface\n */\n\nimport { MeshTopology } from \"@oasis-engine/core\";\n\n/**\n * The datatype of the components in the attribute\n */\nexport enum AccessorComponentType {\n  /**\n   * Byte\n   */\n  BYTE = 5120,\n  /**\n   * Unsigned Byte\n   */\n  UNSIGNED_BYTE = 5121,\n  /**\n   * Short\n   */\n  SHORT = 5122,\n  /**\n   * Unsigned Short\n   */\n  UNSIGNED_SHORT = 5123,\n  /**\n   * Unsigned Int\n   */\n  UNSIGNED_INT = 5125,\n  /**\n   * Float\n   */\n  FLOAT = 5126\n}\n\n/**\n * Specifies if the attirbute is a scalar, vector, or matrix\n */\nexport enum AccessorType {\n  /**\n   * Scalar\n   */\n  SCALAR = \"SCALAR\",\n  /**\n   * Vector2\n   */\n  VEC2 = \"VEC2\",\n  /**\n   * Vector3\n   */\n  VEC3 = \"VEC3\",\n  /**\n   * Vector4\n   */\n  VEC4 = \"VEC4\",\n  /**\n   * Matrix2x2\n   */\n  MAT2 = \"MAT2\",\n  /**\n   * Matrix3x3\n   */\n  MAT3 = \"MAT3\",\n  /**\n   * Matrix4x4\n   */\n  MAT4 = \"MAT4\"\n}\n\n/**\n * The name of the node's TRS property to modify, or the weights of the Morph Targets it instantiates\n */\nexport enum AnimationChannelTargetPath {\n  /**\n   * Translation\n   */\n  TRANSLATION = \"translation\",\n  /**\n   * Rotation\n   */\n  ROTATION = \"rotation\",\n  /**\n   * Scale\n   */\n  SCALE = \"scale\",\n  /**\n   * Weights\n   */\n  WEIGHTS = \"weights\"\n}\n\n/**\n * Interpolation algorithm\n */\nexport enum AnimationSamplerInterpolation {\n  /**\n   * The animated values are linearly interpolated between keyframes\n   */\n  Linear = \"LINEAR\",\n  /**\n   * The animated values remain constant to the output of the first keyframe, until the next keyframe\n   */\n  Step = \"STEP\",\n  /**\n   * The animation's interpolation is computed using a cubic spline with specified tangents\n   */\n  CubicSpine = \"CUBICSPLINE\"\n}\n\n/**\n * A camera's projection.  A node can reference a camera to apply a transform to place the camera in the scene\n */\nexport enum CameraType {\n  /**\n   * A perspective camera containing properties to create a perspective projection matrix\n   */\n  PERSPECTIVE = \"perspective\",\n  /**\n   * An orthographic camera containing properties to create an orthographic projection matrix\n   */\n  ORTHOGRAPHIC = \"orthographic\"\n}\n\n/**\n * The mime-type of the image\n */\nexport enum ImageMimeType {\n  /**\n   * JPEG Mime-type\n   */\n  JPEG = \"image/jpeg\",\n  /**\n   * PNG Mime-type\n   */\n  PNG = \"image/png\"\n}\n\n/**\n * The alpha rendering mode of the material\n */\nexport enum MaterialAlphaMode {\n  /**\n   * The alpha value is ignored and the rendered output is fully opaque\n   */\n  OPAQUE = \"OPAQUE\",\n  /**\n   * The rendered output is either fully opaque or fully transparent depending on the alpha value and the specified alpha cutoff value\n   */\n  MASK = \"MASK\",\n  /**\n   * The alpha value is used to composite the source and destination areas. The rendered output is combined with the background using the normal painting operation (i.e. the Porter and Duff over operator)\n   */\n  BLEND = \"BLEND\"\n}\n\n/**\n * Magnification filter.  Valid values correspond to WebGL enums: 9728 (NEAREST) and 9729 (LINEAR)\n */\nexport enum TextureMagFilter {\n  /**\n   * Nearest\n   */\n  NEAREST = 9728,\n  /**\n   * Linear\n   */\n  LINEAR = 9729\n}\n\n/**\n * Minification filter.  All valid values correspond to WebGL enums\n */\nexport enum TextureMinFilter {\n  /**\n   * Nearest\n   */\n  NEAREST = 9728,\n  /**\n   * Linear\n   */\n  LINEAR = 9729,\n  /**\n   * Nearest Mip-Map Nearest\n   */\n  NEAREST_MIPMAP_NEAREST = 9984,\n  /**\n   * Linear Mipmap Nearest\n   */\n  LINEAR_MIPMAP_NEAREST = 9985,\n  /**\n   * Nearest Mipmap Linear\n   */\n  NEAREST_MIPMAP_LINEAR = 9986,\n  /**\n   * Linear Mipmap Linear\n   */\n  LINEAR_MIPMAP_LINEAR = 9987\n}\n\n/**\n * S (U) wrapping mode.  All valid values correspond to WebGL enums\n */\nexport enum TextureWrapMode {\n  /**\n   * Clamp to Edge\n   */\n  CLAMP_TO_EDGE = 33071,\n  /**\n   * Mirrored Repeat\n   */\n  MIRRORED_REPEAT = 33648,\n  /**\n   * Repeat\n   */\n  REPEAT = 10497\n}\n\n/**\n * glTF Property\n */\nexport interface IProperty {\n  /**\n   * Dictionary object with extension-specific objects\n   */\n  extensions?: {\n    [key: string]: any;\n  };\n  /**\n   * Application-Specific data\n   */\n  extras?: any;\n}\n\n/**\n * glTF Child of Root Property\n */\nexport interface IChildRootProperty extends IProperty {\n  /**\n   * The user-defined name of this object\n   */\n  name?: string;\n}\n\n/**\n * Indices of those attributes that deviate from their initialization value\n */\nexport interface IAccessorSparseIndices extends IProperty {\n  /**\n   * The index of the bufferView with sparse indices. Referenced bufferView can't have ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER target\n   */\n  bufferView: number;\n  /**\n   * The offset relative to the start of the bufferView in bytes. Must be aligned\n   */\n  byteOffset?: number;\n  /**\n   * The indices data type.  Valid values correspond to WebGL enums: 5121 (UNSIGNED_BYTE), 5123 (UNSIGNED_SHORT), 5125 (UNSIGNED_INT)\n   */\n  componentType: AccessorComponentType;\n}\n\n/**\n * Array of size accessor.sparse.count times number of components storing the displaced accessor attributes pointed by accessor.sparse.indices\n */\nexport interface IAccessorSparseValues extends IProperty {\n  /**\n   * The index of the bufferView with sparse values. Referenced bufferView can't have ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER target\n   */\n  bufferView: number;\n  /**\n   * The offset relative to the start of the bufferView in bytes. Must be aligned\n   */\n  byteOffset?: number;\n}\n\n/**\n * Sparse storage of attributes that deviate from their initialization value\n */\nexport interface IAccessorSparse extends IProperty {\n  /**\n   * The number of attributes encoded in this sparse accessor\n   */\n  count: number;\n  /**\n   * Index array of size count that points to those accessor attributes that deviate from their initialization value. Indices must strictly increase\n   */\n  indices: IAccessorSparseIndices;\n  /**\n   * Array of size count times number of components, storing the displaced accessor attributes pointed by indices. Substituted values must have the same componentType and number of components as the base accessor\n   */\n  values: IAccessorSparseValues;\n}\n\n/**\n * A typed view into a bufferView.  A bufferView contains raw binary data.  An accessor provides a typed view into a bufferView or a subset of a bufferView similar to how WebGL's vertexAttribPointer() defines an attribute in a buffer\n */\nexport interface IAccessor extends IChildRootProperty {\n  /**\n   * The index of the bufferview\n   */\n  bufferView?: number;\n  /**\n   * The offset relative to the start of the bufferView in bytes\n   */\n  byteOffset?: number;\n  /**\n   * The datatype of components in the attribute\n   */\n  componentType: AccessorComponentType;\n  /**\n   * Specifies whether integer data values should be normalized\n   */\n  normalized?: boolean;\n  /**\n   * The number of attributes referenced by this accessor\n   */\n  count: number;\n  /**\n   * Specifies if the attribute is a scalar, vector, or matrix\n   */\n  type: AccessorType;\n  /**\n   * Maximum value of each component in this attribute\n   */\n  max?: number[];\n  /**\n   * Minimum value of each component in this attribute\n   */\n  min?: number[];\n  /**\n   * Sparse storage of attributes that deviate from their initialization value\n   */\n  sparse?: IAccessorSparse;\n}\n\n/**\n * Targets an animation's sampler at a node's property\n */\nexport interface IAnimationChannel extends IProperty {\n  /**\n   * The index of a sampler in this animation used to compute the value for the target\n   */\n  sampler: number;\n  /**\n   * The index of the node and TRS property to target\n   */\n  target: IAnimationChannelTarget;\n}\n\n/**\n * The index of the node and TRS property that an animation channel targets\n */\nexport interface IAnimationChannelTarget extends IProperty {\n  /**\n   * The index of the node to target\n   */\n  node: number;\n  /**\n   * The name of the node's TRS property to modify, or the weights of the Morph Targets it instantiates\n   */\n  path: AnimationChannelTargetPath;\n}\n\n/**\n * Combines input and output accessors with an interpolation algorithm to define a keyframe graph (but not its target)\n */\nexport interface IAnimationSampler extends IProperty {\n  /**\n   * The index of an accessor containing keyframe input values, e.g., time\n   */\n  input: number;\n  /**\n   * Interpolation algorithm\n   */\n  interpolation?: AnimationSamplerInterpolation;\n  /**\n   * The index of an accessor, containing keyframe output values\n   */\n  output: number;\n}\n\n/**\n * A keyframe animation\n */\nexport interface IAnimation extends IChildRootProperty {\n  /**\n   * An array of channels, each of which targets an animation's sampler at a node's property\n   */\n  channels: IAnimationChannel[];\n  /**\n   * An array of samplers that combines input and output accessors with an interpolation algorithm to define a keyframe graph (but not its target)\n   */\n  samplers: IAnimationSampler[];\n}\n\n/**\n * Metadata about the glTF asset\n */\nexport interface IAsset extends IChildRootProperty {\n  /**\n   * A copyright message suitable for display to credit the content creator\n   */\n  copyright?: string;\n  /**\n   * Tool that generated this glTF model.  Useful for debugging\n   */\n  generator?: string;\n  /**\n   * The glTF version that this asset targets\n   */\n  version: string;\n  /**\n   * The minimum glTF version that this asset targets\n   */\n  minVersion?: string;\n}\n\n/**\n * A buffer points to binary geometry, animation, or skins\n */\nexport interface IBuffer extends IChildRootProperty {\n  /**\n   * The uri of the buffer.  Relative paths are relative to the .gltf file.  Instead of referencing an external file, the uri can also be a data-uri\n   */\n  uri?: string;\n  /**\n   * The length of the buffer in bytes\n   */\n  byteLength: number;\n}\n\n/**\n * A view into a buffer generally representing a subset of the buffer\n */\nexport interface IBufferView extends IChildRootProperty {\n  /**\n   * The index of the buffer\n   */\n  buffer: number;\n  /**\n   * The offset into the buffer in bytes\n   */\n  byteOffset?: number;\n  /**\n   * The lenth of the bufferView in bytes\n   */\n  byteLength: number;\n  /**\n   * The stride, in bytes\n   */\n  byteStride?: number;\n}\n\n/**\n * An orthographic camera containing properties to create an orthographic projection matrix\n */\nexport interface ICameraOrthographic extends IProperty {\n  /**\n   * The floating-point horizontal magnification of the view. Must not be zero\n   */\n  xmag: number;\n  /**\n   * The floating-point vertical magnification of the view. Must not be zero\n   */\n  ymag: number;\n  /**\n   * The floating-point distance to the far clipping plane. zfar must be greater than znear\n   */\n  zfar: number;\n  /**\n   * The floating-point distance to the near clipping plane\n   */\n  znear: number;\n}\n\n/**\n * A perspective camera containing properties to create a perspective projection matrix\n */\nexport interface ICameraPerspective extends IProperty {\n  /**\n   * The floating-point aspect ratio of the field of view\n   */\n  aspectRatio?: number;\n  /**\n   * The floating-point vertical field of view in radians\n   */\n  yfov: number;\n  /**\n   * The floating-point distance to the far clipping plane\n   */\n  zfar?: number;\n  /**\n   * The floating-point distance to the near clipping plane\n   */\n  znear: number;\n}\n\n/**\n * A camera's projection.  A node can reference a camera to apply a transform to place the camera in the scene\n */\nexport interface ICamera extends IChildRootProperty {\n  /**\n   * An orthographic camera containing properties to create an orthographic projection matrix\n   */\n  orthographic?: ICameraOrthographic;\n  /**\n   * A perspective camera containing properties to create a perspective projection matrix\n   */\n  perspective?: ICameraPerspective;\n  /**\n   * Specifies if the camera uses a perspective or orthographic projection\n   */\n  type: CameraType;\n}\n\n/**\n * Image data used to create a texture. Image can be referenced by URI or bufferView index. mimeType is required in the latter case\n */\nexport interface IImage extends IChildRootProperty {\n  /**\n   * The uri of the image.  Relative paths are relative to the .gltf file.  Instead of referencing an external file, the uri can also be a data-uri.  The image format must be jpg or png\n   */\n  uri?: string;\n  /**\n   * The image's MIME type\n   */\n  mimeType?: ImageMimeType;\n  /**\n   * The index of the bufferView that contains the image. Use this instead of the image's uri property\n   */\n  bufferView?: number;\n}\n\n/**\n * Material Normal Texture Info\n */\nexport interface IMaterialNormalTextureInfo extends ITextureInfo {\n  /**\n   * The scalar multiplier applied to each normal vector of the normal texture\n   */\n  scale?: number;\n}\n\n/**\n * Material Occlusion Texture Info\n */\nexport interface IMaterialOcclusionTextureInfo extends ITextureInfo {\n  /**\n   * A scalar multiplier controlling the amount of occlusion applied\n   */\n  strength?: number;\n}\n\n/**\n * A set of parameter values that are used to define the metallic-roughness material model from Physically-Based Rendering (PBR) methodology\n */\nexport interface IMaterialPbrMetallicRoughness {\n  /**\n   * The material's base color factor\n   */\n  baseColorFactor?: number[];\n  /**\n   * The base color texture\n   */\n  baseColorTexture?: ITextureInfo;\n  /**\n   * The metalness of the material\n   */\n  metallicFactor?: number;\n  /**\n   * The roughness of the material\n   */\n  roughnessFactor?: number;\n  /**\n   * The metallic-roughness texture\n   */\n  metallicRoughnessTexture?: ITextureInfo;\n}\n\n/**\n * The material appearance of a primitive\n */\nexport interface IMaterial extends IChildRootProperty {\n  /**\n   * A set of parameter values that are used to define the metallic-roughness material model from Physically-Based Rendering (PBR) methodology. When not specified, all the default values of pbrMetallicRoughness apply\n   */\n  pbrMetallicRoughness?: IMaterialPbrMetallicRoughness;\n  /**\n   * The normal map texture\n   */\n  normalTexture?: IMaterialNormalTextureInfo;\n  /**\n   * The occlusion map texture\n   */\n  occlusionTexture?: IMaterialOcclusionTextureInfo;\n  /**\n   * The emissive map texture\n   */\n  emissiveTexture?: ITextureInfo;\n  /**\n   * The RGB components of the emissive color of the material. These values are linear. If an emissiveTexture is specified, this value is multiplied with the texel values\n   */\n  emissiveFactor?: number[];\n  /**\n   * The alpha rendering mode of the material\n   */\n  alphaMode?: MaterialAlphaMode;\n  /**\n   * The alpha cutoff value of the material\n   */\n  alphaCutoff?: number;\n  /**\n   * Specifies whether the material is double sided\n   */\n  doubleSided?: boolean;\n}\n\n/**\n * Geometry to be rendered with the given material\n */\nexport interface IMeshPrimitive extends IProperty {\n  /**\n   * A dictionary object, where each key corresponds to mesh attribute semantic and each value is the index of the accessor containing attribute's data\n   */\n  attributes: {\n    [name: string]: number;\n  };\n  /**\n   * The index of the accessor that contains the indices\n   */\n  indices?: number;\n  /**\n   * The index of the material to apply to this primitive when rendering\n   */\n  material?: number;\n  /**\n   * The type of primitives to render. All valid values correspond to WebGL enums\n   */\n  mode?: MeshTopology;\n  /**\n   * An array of Morph Targets, each  Morph Target is a dictionary mapping attributes (only POSITION, NORMAL, and TANGENT supported) to their deviations in the Morph Target\n   */\n  targets?: {\n    [name: string]: number;\n  }[];\n}\n\n/**\n * A set of primitives to be rendered.  A node can contain one mesh.  A node's transform places the mesh in the scene\n */\nexport interface IMesh extends IChildRootProperty {\n  /**\n   * An array of primitives, each defining geometry to be rendered with a material\n   */\n  primitives: IMeshPrimitive[];\n  /**\n   * Array of weights to be applied to the Morph Targets\n   */\n  weights?: number[];\n}\n\n/**\n * A node in the node hierarchy\n */\nexport interface INode extends IChildRootProperty {\n  /**\n   * The index of the camera referenced by this node\n   */\n  camera?: number;\n  /**\n   * The indices of this node's children\n   */\n  children?: number[];\n  /**\n   * The index of the skin referenced by this node\n   */\n  skin?: number;\n  /**\n   * A floating-point 4x4 transformation matrix stored in column-major order\n   */\n  matrix?: number[];\n  /**\n   * The index of the mesh in this node\n   */\n  mesh?: number;\n  /**\n   * The node's unit quaternion rotation in the order (x, y, z, w), where w is the scalar\n   */\n  rotation?: number[];\n  /**\n   * The node's non-uniform scale, given as the scaling factors along the x, y, and z axes\n   */\n  scale?: number[];\n  /**\n   * The node's translation along the x, y, and z axes\n   */\n  translation?: number[];\n  /**\n   * The weights of the instantiated Morph Target. Number of elements must match number of Morph Targets of used mesh\n   */\n  weights?: number[];\n}\n\n/**\n * Texture sampler properties for filtering and wrapping modes\n */\nexport interface ISampler extends IChildRootProperty {\n  /**\n   * Magnification filter.  Valid values correspond to WebGL enums: 9728 (NEAREST) and 9729 (LINEAR)\n   */\n  magFilter?: TextureMagFilter;\n  /**\n   * Minification filter.  All valid values correspond to WebGL enums\n   */\n  minFilter?: TextureMinFilter;\n  /**\n   * S (U) wrapping mode.  All valid values correspond to WebGL enums\n   */\n  wrapS?: TextureWrapMode;\n  /**\n   * T (V) wrapping mode.  All valid values correspond to WebGL enums\n   */\n  wrapT?: TextureWrapMode;\n}\n\n/**\n * The root nodes of a scene\n */\nexport interface IScene extends IChildRootProperty {\n  /**\n   * The indices of each root node\n   */\n  nodes: number[];\n}\n\n/**\n * Joints and matrices defining a skin\n */\nexport interface ISkin extends IChildRootProperty {\n  /**\n   * The index of the accessor containing the floating-point 4x4 inverse-bind matrices.  The default is that each matrix is a 4x4 identity matrix, which implies that inverse-bind matrices were pre-applied\n   */\n  inverseBindMatrices?: number;\n  /**\n   * The index of the node used as a skeleton root. When undefined, joints transforms resolve to scene root\n   */\n  skeleton?: number;\n  /**\n   * Indices of skeleton nodes, used as joints in this skin.  The array length must be the same as the count property of the inverseBindMatrices accessor (when defined)\n   */\n  joints: number[];\n}\n\n/**\n * A texture and its sampler\n */\nexport interface ITexture extends IChildRootProperty {\n  /**\n   * The index of the sampler used by this texture. When undefined, a sampler with repeat wrapping and auto filtering should be used\n   */\n  sampler?: number;\n  /**\n   * The index of the image used by this texture\n   */\n  source: number;\n}\n\n/**\n * Reference to a texture\n */\nexport interface ITextureInfo extends IProperty {\n  /**\n   * The index of the texture\n   */\n  index: number;\n  /**\n   * The set index of texture's TEXCOORD attribute used for texture coordinate mapping\n   */\n  texCoord?: number;\n}\n\n/**\n * The root object for a glTF asset\n */\nexport interface IGLTF extends IProperty {\n  /**\n   * An array of accessors. An accessor is a typed view into a bufferView\n   */\n  accessors?: IAccessor[];\n  /**\n   * An array of keyframe animations\n   */\n  animations?: IAnimation[];\n  /**\n   * Metadata about the glTF asset\n   */\n  asset: IAsset;\n  /**\n   * An array of buffers.  A buffer points to binary geometry, animation, or skins\n   */\n  buffers?: IBuffer[];\n  /**\n   * An array of bufferViews.  A bufferView is a view into a buffer generally representing a subset of the buffer\n   */\n  bufferViews?: IBufferView[];\n  /**\n   * An array of cameras\n   */\n  cameras?: ICamera[];\n  /**\n   * Names of glTF extensions used somewhere in this asset\n   */\n  extensionsUsed?: string[];\n  /**\n   * Names of glTF extensions required to properly load this asset\n   */\n  extensionsRequired?: string[];\n  /**\n   * An array of images.  An image defines data used to create a texture\n   */\n  images?: IImage[];\n  /**\n   * An array of materials.  A material defines the appearance of a primitive\n   */\n  materials?: IMaterial[];\n  /**\n   * An array of meshes.  A mesh is a set of primitives to be rendered\n   */\n  meshes?: IMesh[];\n  /**\n   * An array of nodes\n   */\n  nodes?: INode[];\n  /**\n   * An array of samplers.  A sampler contains properties for texture filtering and wrapping modes\n   */\n  samplers?: ISampler[];\n  /**\n   * The index of the default scene\n   */\n  scene?: number;\n  /**\n   * An array of scenes\n   */\n  scenes?: IScene[];\n  /**\n   * An array of skins.  A skin is defined by joints and matrices\n   */\n  skins?: ISkin[];\n  /**\n   * An array of textures\n   */\n  textures?: ITexture[];\n}\n","import { IndexFormat, TypedArray, VertexElement, VertexElementFormat } from \"@oasis-engine/core\";\nimport { Color, Vector2, Vector3, Vector4 } from \"@oasis-engine/math\";\nimport { AccessorComponentType, AccessorType, IAccessor, IBufferView, IGLTF } from \"./Schema\";\n\n/**\n * @internal\n */\nexport class GLTFUtil {\n  public static floatBufferToVector2Array(buffer: Float32Array): Vector2[] {\n    const bufferLen = buffer.length;\n    const array = new Array<Vector2>(bufferLen / 2);\n    for (let i = 0; i < bufferLen; i += 2) {\n      array[i / 2] = new Vector2(buffer[i], buffer[i + 1]);\n    }\n    return array;\n  }\n\n  public static floatBufferToVector3Array(buffer: Float32Array): Vector3[] {\n    const bufferLen = buffer.length;\n    const array = new Array<Vector3>(bufferLen / 3);\n    for (let i = 0; i < bufferLen; i += 3) {\n      array[i / 3] = new Vector3(buffer[i], buffer[i + 1], buffer[i + 2]);\n    }\n    return array;\n  }\n\n  public static floatBufferToVector4Array(buffer: Float32Array): Vector4[] {\n    const bufferLen = buffer.length;\n    const array = new Array<Vector4>(bufferLen / 4);\n    for (let i = 0; i < bufferLen; i += 4) {\n      array[i / 4] = new Vector4(buffer[i], buffer[i + 1], buffer[i + 2], buffer[i + 3]);\n    }\n    return array;\n  }\n\n  public static floatBufferToColorArray(buffer: Float32Array, isColor3: boolean): Color[] {\n    const bufferLen = buffer.length;\n    const colors = new Array<Color>(bufferLen / (isColor3 ? 3 : 4));\n\n    if (isColor3) {\n      for (let i = 0; i < bufferLen; i += 3) {\n        colors[i / 3] = new Color(buffer[i], buffer[i + 1], buffer[i + 2], 1.0);\n      }\n    } else {\n      for (let i = 0; i < bufferLen; i += 4) {\n        colors[i / 4] = new Color(buffer[i], buffer[i + 1], buffer[i + 2], buffer[i + 3]);\n      }\n    }\n\n    return colors;\n  }\n\n  /**\n   * Parse binary text for glb loader.\n   */\n  static decodeText(array: Uint8Array): string {\n    if (typeof TextDecoder !== \"undefined\") {\n      return new TextDecoder().decode(array);\n    }\n\n    // TextDecoder polyfill\n    let s = \"\";\n\n    for (let i = 0, il = array.length; i < il; i++) {\n      s += String.fromCharCode(array[i]);\n    }\n\n    return decodeURIComponent(encodeURIComponent(s));\n  }\n\n  /**\n   * Get the number of bytes occupied by accessor type.\n   */\n  static getAccessorTypeSize(accessorType: AccessorType): number {\n    switch (accessorType) {\n      case AccessorType.SCALAR:\n        return 1;\n      case AccessorType.VEC2:\n        return 2;\n      case AccessorType.VEC3:\n        return 3;\n      case AccessorType.VEC4:\n        return 4;\n      case AccessorType.MAT2:\n        return 4;\n      case AccessorType.MAT3:\n        return 9;\n      case AccessorType.MAT4:\n        return 16;\n    }\n  }\n\n  /**\n   * Get the TypedArray corresponding to the component type.\n   */\n  static getComponentType(componentType: AccessorComponentType) {\n    switch (componentType) {\n      case AccessorComponentType.BYTE:\n        return Int8Array;\n      case AccessorComponentType.UNSIGNED_BYTE:\n        return Uint8Array;\n      case AccessorComponentType.SHORT:\n        return Int16Array;\n      case AccessorComponentType.UNSIGNED_SHORT:\n        return Uint16Array;\n      case AccessorComponentType.UNSIGNED_INT:\n        return Uint32Array;\n      case AccessorComponentType.FLOAT:\n        return Float32Array;\n    }\n  }\n\n  /**\n   * Get accessor data.\n   */\n  static getAccessorData(gltf: IGLTF, accessor: IAccessor, buffers: ArrayBuffer[]): TypedArray {\n    const bufferViews = gltf.bufferViews;\n    const bufferView = bufferViews[accessor.bufferView];\n    const arrayBuffer = buffers[bufferView.buffer];\n    const accessorByteOffset = accessor.hasOwnProperty(\"byteOffset\") ? accessor.byteOffset : 0;\n    const bufferViewByteOffset = bufferView.hasOwnProperty(\"byteOffset\") ? bufferView.byteOffset : 0;\n    const byteOffset = accessorByteOffset + bufferViewByteOffset;\n    const accessorTypeSize = GLTFUtil.getAccessorTypeSize(accessor.type);\n    const length = accessorTypeSize * accessor.count;\n    const byteStride = bufferView.byteStride ?? 0;\n    const arrayType = GLTFUtil.getComponentType(accessor.componentType);\n    let uint8Array;\n    if (byteStride) {\n      const accessorByteSize = accessorTypeSize * arrayType.BYTES_PER_ELEMENT;\n      uint8Array = new Uint8Array(accessor.count * accessorByteSize);\n      const originalBufferView = new Uint8Array(arrayBuffer, bufferViewByteOffset, bufferView.byteLength);\n      for (let i = 0; i < accessor.count; i++) {\n        for (let j = 0; j < accessorByteSize; j++) {\n          uint8Array[i * accessorByteSize + j] = originalBufferView[i * byteStride + accessorByteOffset + j];\n        }\n      }\n    } else {\n      uint8Array = new Uint8Array(arrayBuffer.slice(byteOffset, byteOffset + length * arrayType.BYTES_PER_ELEMENT));\n    }\n\n    const typedArray = new arrayType(uint8Array.buffer);\n\n    if (accessor.sparse) {\n      const { count, indices, values } = accessor.sparse;\n      const indicesBufferView = bufferViews[indices.bufferView];\n      const valuesBufferView = bufferViews[values.bufferView];\n      const indicesArrayBuffer = buffers[indicesBufferView.buffer];\n      const valuesArrayBuffer = buffers[valuesBufferView.buffer];\n      const indicesByteOffset = (indices.byteOffset ?? 0) + (indicesBufferView.byteOffset ?? 0);\n      const indicesByteLength = indicesBufferView.byteLength;\n      const valuesByteOffset = (values.byteOffset ?? 0) + (valuesBufferView.byteOffset ?? 0);\n      const valuesByteLength = valuesBufferView.byteLength;\n\n      const indicesType = GLTFUtil.getComponentType(indices.componentType);\n      const indicesArray = new indicesType(\n        indicesArrayBuffer,\n        indicesByteOffset,\n        indicesByteLength / indicesType.BYTES_PER_ELEMENT\n      );\n      const valuesArray = new arrayType(\n        valuesArrayBuffer,\n        valuesByteOffset,\n        valuesByteLength / arrayType.BYTES_PER_ELEMENT\n      );\n\n      for (let i = 0; i < count; i++) {\n        const replaceIndex = indicesArray[i];\n        for (let j = 0; j < accessorTypeSize; j++) {\n          typedArray[replaceIndex * accessorTypeSize + j] = valuesArray[i * accessorTypeSize + j];\n        }\n      }\n    }\n\n    return typedArray;\n  }\n\n  static getBufferViewData(bufferView: IBufferView, buffers: ArrayBuffer[]): ArrayBuffer {\n    const { buffer, byteOffset = 0, byteLength } = bufferView;\n    const arrayBuffer = buffers[buffer];\n\n    return arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n  }\n\n  static getVertexStride(gltf: IGLTF, accessor: IAccessor): number {\n    const stride = gltf.bufferViews[accessor.bufferView ?? 0].byteStride;\n    if (stride) {\n      return stride;\n    }\n\n    const size = GLTFUtil.getAccessorTypeSize(accessor.type);\n    const componentType = GLTFUtil.getComponentType(accessor.componentType);\n    return size * componentType.BYTES_PER_ELEMENT;\n  }\n\n  static createVertexElement(semantic: string, accessor: IAccessor, index: number): VertexElement {\n    const size = GLTFUtil.getAccessorTypeSize(accessor.type);\n    return new VertexElement(\n      semantic,\n      0,\n      GLTFUtil.getElementFormat(accessor.componentType, size, accessor.normalized),\n      index\n    );\n  }\n\n  static getIndexFormat(type: AccessorComponentType): IndexFormat {\n    switch (type) {\n      case AccessorComponentType.UNSIGNED_BYTE:\n        return IndexFormat.UInt8;\n      case AccessorComponentType.UNSIGNED_SHORT:\n        return IndexFormat.UInt16;\n      case AccessorComponentType.UNSIGNED_INT:\n        return IndexFormat.UInt32;\n    }\n  }\n\n  static getElementFormat(type: AccessorComponentType, size: number, normalized: boolean = false): VertexElementFormat {\n    if (type == AccessorComponentType.FLOAT) {\n      switch (size) {\n        case 1:\n          return VertexElementFormat.Float;\n        case 2:\n          return VertexElementFormat.Vector2;\n        case 3:\n          return VertexElementFormat.Vector3;\n        case 4:\n          return VertexElementFormat.Vector4;\n      }\n    }\n\n    if (type == AccessorComponentType.SHORT) {\n      switch (size) {\n        case 2:\n          return normalized ? VertexElementFormat.NormalizedShort2 : VertexElementFormat.Short2;\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedShort4 : VertexElementFormat.Short4;\n      }\n    }\n\n    if (type == AccessorComponentType.UNSIGNED_SHORT) {\n      switch (size) {\n        case 2:\n          return normalized ? VertexElementFormat.NormalizedUShort2 : VertexElementFormat.UShort2;\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedUShort4 : VertexElementFormat.UShort4;\n      }\n    }\n\n    if (type == AccessorComponentType.BYTE) {\n      switch (size) {\n        case 2:\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedByte4 : VertexElementFormat.Byte4;\n      }\n    }\n\n    if (type == AccessorComponentType.UNSIGNED_BYTE) {\n      switch (size) {\n        case 2:\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedUByte4 : VertexElementFormat.UByte4;\n      }\n    }\n  }\n\n  /**\n   * Load image buffer\n   */\n  static loadImageBuffer(imageBuffer: ArrayBuffer, type: string): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n      const blob = new window.Blob([imageBuffer], { type });\n      const img = new Image();\n      img.onerror = function () {\n        reject(new Error(\"Failed to load image buffer\"));\n      };\n      img.onload = function () {\n        // Call requestAnimationFrame to avoid iOS's bug.\n        requestAnimationFrame(() => {\n          resolve(img);\n          img.onload = null;\n          img.onerror = null;\n          img.onabort = null;\n        });\n      };\n      img.crossOrigin = \"anonymous\";\n      img.src = URL.createObjectURL(blob);\n    });\n  }\n\n  static isAbsoluteUrl(url: string): boolean {\n    return /^(?:http|blob|data:|\\/)/.test(url);\n  }\n\n  static parseRelativeUrl(baseUrl: string, relativeUrl: string): string {\n    if (GLTFUtil.isAbsoluteUrl(relativeUrl)) {\n      return relativeUrl;\n    }\n\n    const char0 = relativeUrl.charAt(0);\n    if (char0 === \".\") {\n      return GLTFUtil._formatRelativePath(relativeUrl + relativeUrl);\n    }\n\n    return baseUrl.substring(0, baseUrl.lastIndexOf(\"/\") + 1) + relativeUrl;\n  }\n\n  /**\n   * Parse the glb format.\n   */\n  static parseGLB(glb: ArrayBuffer): {\n    gltf: IGLTF;\n    buffers: ArrayBuffer[];\n  } {\n    const UINT32_LENGTH = 4;\n    const GLB_HEADER_MAGIC = 0x46546c67; // 'glTF'\n    const GLB_HEADER_LENGTH = 12;\n    const GLB_CHUNK_TYPES = { JSON: 0x4e4f534a, BIN: 0x004e4942 };\n\n    const dataView = new DataView(glb);\n\n    // read header\n    const header = {\n      magic: dataView.getUint32(0, true),\n      version: dataView.getUint32(UINT32_LENGTH, true),\n      length: dataView.getUint32(2 * UINT32_LENGTH, true)\n    };\n\n    if (header.magic !== GLB_HEADER_MAGIC) {\n      console.error(\"Invalid glb magic number. Expected 0x46546C67, found 0x\" + header.magic.toString(16));\n      return null;\n    }\n\n    // read main data\n    let chunkLength = dataView.getUint32(GLB_HEADER_LENGTH, true);\n    let chunkType = dataView.getUint32(GLB_HEADER_LENGTH + UINT32_LENGTH, true);\n\n    // read glTF json\n    if (chunkType !== GLB_CHUNK_TYPES.JSON) {\n      console.error(\"Invalid glb chunk type. Expected 0x4E4F534A, found 0x\" + chunkType.toString(16));\n      return null;\n    }\n\n    const glTFData = new Uint8Array(glb, GLB_HEADER_LENGTH + 2 * UINT32_LENGTH, chunkLength);\n    const gltf: IGLTF = JSON.parse(GLTFUtil.decodeText(glTFData));\n\n    // read all buffers\n    const buffers: ArrayBuffer[] = [];\n    let byteOffset = GLB_HEADER_LENGTH + 2 * UINT32_LENGTH + chunkLength;\n\n    while (byteOffset < header.length) {\n      chunkLength = dataView.getUint32(byteOffset, true);\n      chunkType = dataView.getUint32(byteOffset + UINT32_LENGTH, true);\n\n      if (chunkType !== GLB_CHUNK_TYPES.BIN) {\n        console.error(\"Invalid glb chunk type. Expected 0x004E4942, found 0x\" + chunkType.toString(16));\n        return null;\n      }\n\n      const currentOffset = byteOffset + 2 * UINT32_LENGTH;\n      const buffer = glb.slice(currentOffset, currentOffset + chunkLength);\n      buffers.push(buffer);\n\n      byteOffset += chunkLength + 2 * UINT32_LENGTH;\n    }\n\n    return {\n      gltf,\n      buffers\n    };\n  }\n\n  private static _formatRelativePath(value: string): string {\n    const parts = value.split(\"/\");\n    for (let i = 0, n = parts.length; i < n; i++) {\n      if (parts[i] == \"..\") {\n        parts.splice(i - 1, 2);\n        i -= 2;\n      }\n    }\n    return parts.join(\"/\");\n  }\n}\n","import { EngineObject } from \"@oasis-engine/core\";\nimport { ExtensionParser } from \"../extensions/ExtensionParser\";\nimport { ExtensionSchema } from \"../extensions/Schema\";\nimport { GLTFResource } from \"../GLTFResource\";\n\nexport abstract class Parser {\n  private static _extensionParsers: Record<string, ExtensionParser[]> = {};\n\n  static parseEngineResource(\n    extensionName: string,\n    extensionSchema: ExtensionSchema,\n    parseResource: EngineObject,\n    context: GLTFResource,\n    ...extra\n  ): void {\n    const parsers = Parser._extensionParsers[extensionName];\n\n    if (parsers?.length) {\n      for (let i = 0; i < parsers.length; i++) {\n        parsers[i].parseEngineResource(extensionSchema, parseResource, context, ...extra);\n      }\n    }\n  }\n\n  static createEngineResource<T extends EngineObject>(\n    extensionName: string,\n    extensionSchema: ExtensionSchema,\n    context: GLTFResource,\n    ...extra\n  ): T | Promise<T> {\n    const parsers = Parser._extensionParsers[extensionName];\n\n    if (parsers?.length) {\n      return parsers[0].createEngineResource(extensionSchema, context, ...extra) as T;\n    }\n  }\n\n  static hasExtensionParser(extensionName: string): boolean {\n    const parsers = Parser._extensionParsers[extensionName];\n    return !!parsers?.length;\n  }\n\n  static initialize(extensionName: string) {\n    const parsers = Parser._extensionParsers[extensionName];\n\n    if (parsers?.length) {\n      for (let i = 0; i < parsers.length; i++) {\n        parsers[i].initialize();\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static _addExtensionParser(extensionName: string, extensionParser: ExtensionParser) {\n    if (!Parser._extensionParsers[extensionName]) {\n      Parser._extensionParsers[extensionName] = [];\n    }\n    Parser._extensionParsers[extensionName].push(extensionParser);\n  }\n\n  abstract parse(context: GLTFResource): void | Promise<void>;\n}\n\n/**\n * Declare ExtensionParser's decorator.\n * @param extensionName - Extension name\n */\nexport function registerExtension(extensionName: string) {\n  return (parser: new () => ExtensionParser) => {\n    const extensionParser = new parser();\n\n    Parser._addExtensionParser(extensionName, extensionParser);\n  };\n}\n","import {\n  AnimationClip,\n  AnimationCurve,\n  Component,\n  Entity,\n  InterpolableKeyframe,\n  InterpolableValueType,\n  InterpolationType,\n  SkinnedMeshRenderer,\n  Transform,\n  TypedArray\n} from \"@oasis-engine/core\";\nimport { Quaternion, Vector2, Vector3, Vector4 } from \"@oasis-engine/math\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { AccessorType, AnimationChannelTargetPath, AnimationSamplerInterpolation, IAnimationChannel } from \"../Schema\";\nimport { Parser } from \"./Parser\";\n\nexport class AnimationParser extends Parser {\n  parse(context: GLTFResource): void {\n    const { gltf, buffers, entities } = context;\n    const { animations, accessors } = gltf;\n    if (!animations) {\n      return;\n    }\n    const animationClipCount = animations.length;\n    const animationClips = new Array<AnimationClip>(animationClipCount);\n    const animationsIndices = new Array<{\n      name: string;\n      index: number;\n    }>(animationClipCount);\n\n    for (let i = 0; i < animationClipCount; i++) {\n      const gltfAnimation = animations[i];\n      const { channels, samplers, name = `AnimationClip${i}` } = gltfAnimation;\n      const animationClip = new AnimationClip(name);\n      const sampleDataCollection = new Array<SampleData>();\n\n      let duration = -1;\n\n      // parse samplers\n      for (let i = 0; i < samplers.length; i++) {\n        const gltfSampler = samplers[i];\n        const inputAccessor = accessors[gltfSampler.input];\n        const outputAccessor = accessors[gltfSampler.output];\n\n        const input = GLTFUtil.getAccessorData(gltf, inputAccessor, buffers);\n        const output = GLTFUtil.getAccessorData(gltf, outputAccessor, buffers);\n        const outputAccessorSize = output.length / input.length;\n\n        const interpolation = gltfSampler.interpolation ?? AnimationSamplerInterpolation.Linear;\n        let samplerInterpolation: InterpolationType;\n        switch (interpolation) {\n          case AnimationSamplerInterpolation.CubicSpine:\n            samplerInterpolation = InterpolationType.CubicSpine;\n            break;\n          case AnimationSamplerInterpolation.Step:\n            samplerInterpolation = InterpolationType.Step;\n            break;\n          case AnimationSamplerInterpolation.Linear:\n            samplerInterpolation = InterpolationType.Linear;\n            break;\n        }\n        const maxTime = input[input.length - 1];\n        if (maxTime > duration) {\n          duration = maxTime;\n        }\n\n        sampleDataCollection.push({\n          type: outputAccessor.type,\n          interpolation: samplerInterpolation,\n          input,\n          output,\n          outputSize: outputAccessorSize\n        });\n      }\n\n      for (let i = 0; i < channels.length; i++) {\n        const gltfChannel = channels[i];\n        const { target } = gltfChannel;\n\n        const channelTargetEntity = entities[target.node];\n        let relativePath = \"\";\n        let entity = channelTargetEntity;\n        while (entity.parent) {\n          relativePath = relativePath === \"\" ? `${entity.name}` : `${entity.name}/${relativePath}`;\n          entity = entity.parent;\n        }\n\n        let compType: new (entity: Entity) => Component;\n        let propertyName: string;\n        let interpolableValueType: InterpolableValueType;\n        switch (target.path) {\n          case AnimationChannelTargetPath.TRANSLATION:\n            compType = Transform;\n            propertyName = \"position\";\n            interpolableValueType = InterpolableValueType.Vector3;\n            break;\n          case AnimationChannelTargetPath.ROTATION:\n            compType = Transform;\n            propertyName = \"rotation\";\n            interpolableValueType = InterpolableValueType.Quaternion;\n            break;\n          case AnimationChannelTargetPath.SCALE:\n            compType = Transform;\n            propertyName = \"scale\";\n            interpolableValueType = InterpolableValueType.Vector3;\n            break;\n          case AnimationChannelTargetPath.WEIGHTS:\n            compType = SkinnedMeshRenderer;\n            propertyName = \"blendShapeWeights\";\n            interpolableValueType = InterpolableValueType.FloatArray;\n            break;\n          default:\n        }\n\n        const curve = this._addCurve(interpolableValueType, gltfChannel, sampleDataCollection);\n        animationClip.addCurveBinding(relativePath, compType, propertyName, curve);\n      }\n\n      animationClips[i] = animationClip;\n      animationsIndices[i] = {\n        name,\n        index: i\n      };\n    }\n    context.animations = animationClips;\n    // @ts-ignore for editor\n    context._animationsIndices = animationsIndices;\n  }\n\n  private _addCurve(\n    interpolableValueType: InterpolableValueType,\n    gltfChannel: IAnimationChannel,\n    sampleDataCollection: SampleData[]\n  ): AnimationCurve {\n    const curve = new AnimationCurve();\n    const sampleData = sampleDataCollection[gltfChannel.sampler];\n    const { input, output, outputSize } = sampleData;\n\n    curve.interpolation = sampleData.interpolation;\n    for (let j = 0, n = input.length; j < n; j++) {\n      const offset = j * outputSize;\n      if (interpolableValueType === InterpolableValueType.Float) {\n        const keyframe = new InterpolableKeyframe<number, number>();\n        keyframe.time = input[j];\n        keyframe.inTangent = 0;\n        keyframe.outTangent = 0;\n        keyframe.value = output[offset];\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.FloatArray) {\n        const keyframe = new InterpolableKeyframe<Float32Array, Float32Array>();\n        keyframe.time = input[j];\n        keyframe.inTangent = new Float32Array(outputSize);\n        keyframe.outTangent = new Float32Array(outputSize);\n        keyframe.value = <Float32Array>output.subarray(offset, offset + outputSize);\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.Vector2) {\n        const keyframe = new InterpolableKeyframe<Vector2, Vector2>();\n        keyframe.time = input[j];\n        keyframe.value = new Vector2(output[offset], output[offset + 1]);\n        keyframe.inTangent = new Vector2();\n        keyframe.outTangent = new Vector2();\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.Vector3) {\n        const keyframe = new InterpolableKeyframe<Vector3, Vector3>();\n        keyframe.time = input[j];\n        keyframe.value = new Vector3(output[offset], output[offset + 1], output[offset + 2]);\n        keyframe.inTangent = new Vector3();\n        keyframe.outTangent = new Vector3();\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.Vector4) {\n        const keyframe = new InterpolableKeyframe<Vector4, Vector4>();\n        keyframe.time = input[j];\n        keyframe.value = new Vector4(output[offset], output[offset + 1], output[offset + 2], output[offset + 3]);\n        keyframe.inTangent = new Vector4();\n        keyframe.outTangent = new Vector4();\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.Quaternion) {\n        const keyframe = new InterpolableKeyframe<Vector4, Quaternion>();\n        keyframe.time = input[j];\n        keyframe.value = new Quaternion(output[offset], output[offset + 1], output[offset + 2], output[offset + 3]);\n        keyframe.inTangent = new Vector4();\n        keyframe.outTangent = new Vector4();\n        curve.addKey(keyframe);\n      }\n    }\n    return curve;\n  }\n}\ninterface SampleData {\n  type: AccessorType;\n  input: TypedArray;\n  output: TypedArray;\n  interpolation: InterpolationType;\n  outputSize: number;\n}\n","import { AssetType } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { IBuffer, IGLTF } from \"../Schema\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { Parser } from \"./Parser\";\n\nexport class BufferParser extends Parser {\n  parse(context: GLTFResource): Promise<void> {\n    const { url, engine } = context;\n\n    if (this._isGLB(url)) {\n      return engine.resourceManager\n        .load<ArrayBuffer>({\n          url,\n          type: AssetType.Buffer\n        })\n        .then(GLTFUtil.parseGLB)\n        .then(({ gltf, buffers }) => {\n          context.gltf = gltf;\n          context.buffers = buffers;\n        });\n    } else {\n      return engine.resourceManager\n        .load<IGLTF>({\n          url,\n          type: AssetType.JSON\n        })\n        .then((gltf: IGLTF) => {\n          context.gltf = gltf;\n          return Promise.all(\n            gltf.buffers.map((buffer: IBuffer) => {\n              return engine.resourceManager.load<ArrayBuffer>({\n                type: AssetType.Buffer,\n                url: GLTFUtil.parseRelativeUrl(url, buffer.uri)\n              });\n            })\n          ).then((buffers: ArrayBuffer[]) => {\n            context.buffers = buffers;\n          });\n        });\n    }\n  }\n\n  private _isGLB(url: string): boolean {\n    return url.substring(url.lastIndexOf(\".\") + 1) === \"glb\";\n  }\n}\n","import { Entity } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { Parser } from \"./Parser\";\n\nexport class EntityParser extends Parser {\n  /** @internal */\n  static _defaultName: String = \"_GLTF_ENTITY_\";\n\n  parse(context: GLTFResource): void {\n    const {\n      engine,\n      gltf: { nodes }\n    } = context;\n    if (!nodes) return;\n\n    const entities: Entity[] = [];\n\n    for (let i = 0; i < nodes.length; i++) {\n      const gltfNode = nodes[i];\n      const { matrix, translation, rotation, scale } = gltfNode;\n      const entity = new Entity(engine, gltfNode.name || `${EntityParser._defaultName}${i}`);\n\n      const { transform } = entity;\n      if (matrix) {\n        const localMatrix = transform.localMatrix;\n        localMatrix.copyFromArray(matrix);\n        transform.localMatrix = localMatrix;\n      } else {\n        if (translation) {\n          transform.setPosition(translation[0], translation[1], translation[2]);\n        }\n        if (rotation) {\n          transform.setRotationQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);\n        }\n        if (scale) {\n          transform.setScale(scale[0], scale[1], scale[2]);\n        }\n      }\n\n      entities[i] = entity;\n    }\n\n    context.entities = entities;\n    this._buildEntityTree(context);\n    this._createSceneRoots(context);\n  }\n\n  private _buildEntityTree(context: GLTFResource): void {\n    const {\n      gltf: { nodes },\n      entities\n    } = context;\n\n    for (let i = 0; i < nodes.length; i++) {\n      const { children } = nodes[i];\n      const entity = entities[i];\n\n      if (children) {\n        for (let j = 0; j < children.length; j++) {\n          const childEntity = entities[children[j]];\n\n          entity.addChild(childEntity);\n        }\n      }\n    }\n  }\n\n  private _createSceneRoots(context: GLTFResource): void {\n    const {\n      engine,\n      gltf: { scene: sceneID = 0, scenes },\n      entities\n    } = context;\n\n    if (!scenes) return;\n\n    const sceneRoots: Entity[] = [];\n\n    for (let i = 0; i < scenes.length; i++) {\n      const { nodes } = scenes[i];\n\n      if (!nodes) continue;\n\n      if (nodes.length === 1) {\n        sceneRoots[i] = entities[nodes[0]];\n      } else {\n        const rootEntity = new Entity(engine, \"GLTF_ROOT\");\n        for (let j = 0; j < nodes.length; j++) {\n          rootEntity.addChild(entities[nodes[j]]);\n        }\n        sceneRoots[i] = rootEntity;\n      }\n    }\n\n    context.sceneRoots = sceneRoots;\n    context.defaultSceneRoot = sceneRoots[sceneID];\n  }\n}\n","import {\n  Logger,\n  Material,\n  PBRMaterial,\n  PBRSpecularMaterial,\n  RenderFace,\n  TextureCoordinate,\n  UnlitMaterial\n} from \"@oasis-engine/core\";\nimport { Color } from \"@oasis-engine/math\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { MaterialAlphaMode } from \"../Schema\";\nimport { Parser } from \"./Parser\";\n\nexport class MaterialParser extends Parser {\n  /** @internal */\n  static _parseTextureTransform(material: Material, extensions: any = {}, context: GLTFResource): void {\n    const schema = extensions.KHR_texture_transform;\n    if (schema) {\n      Parser.parseEngineResource(\"KHR_texture_transform\", schema, material, context);\n    }\n  }\n\n  parse(context: GLTFResource): void {\n    const { gltf, engine, textures } = context;\n    if (!gltf.materials) return;\n\n    const materials: Material[] = [];\n\n    for (let i = 0; i < gltf.materials.length; i++) {\n      const {\n        extensions = {},\n        pbrMetallicRoughness,\n        normalTexture,\n        occlusionTexture,\n        emissiveTexture,\n        emissiveFactor,\n        alphaMode,\n        alphaCutoff,\n        doubleSided,\n        name = \"\"\n      } = gltf.materials[i];\n\n      const {\n        KHR_materials_unlit,\n        KHR_materials_pbrSpecularGlossiness,\n        KHR_materials_clearcoat,\n        OASIS_materials_remap\n      } = extensions;\n\n      let material: UnlitMaterial | PBRMaterial | PBRSpecularMaterial = null;\n\n      if (KHR_materials_unlit) {\n        material = <UnlitMaterial>Parser.createEngineResource(\"KHR_materials_unlit\", KHR_materials_unlit, context);\n      } else if (KHR_materials_pbrSpecularGlossiness) {\n        material = <PBRSpecularMaterial>(\n          Parser.createEngineResource(\n            \"KHR_materials_pbrSpecularGlossiness\",\n            KHR_materials_pbrSpecularGlossiness,\n            context\n          )\n        );\n      } else {\n        material = new PBRMaterial(engine);\n      }\n\n      material.name = name;\n\n      if (KHR_materials_clearcoat) {\n        Parser.parseEngineResource(\"KHR_materials_clearcoat\", KHR_materials_clearcoat, material, context);\n      }\n\n      if (pbrMetallicRoughness) {\n        const { baseColorFactor, baseColorTexture, metallicFactor, roughnessFactor, metallicRoughnessTexture } =\n          pbrMetallicRoughness;\n\n        if (baseColorFactor) {\n          material.baseColor = new Color(\n            Color.linearToGammaSpace(baseColorFactor[0]),\n            Color.linearToGammaSpace(baseColorFactor[1]),\n            Color.linearToGammaSpace(baseColorFactor[2]),\n            baseColorFactor[3]\n          );\n        }\n        if (baseColorTexture) {\n          material.baseTexture = textures[baseColorTexture.index];\n          MaterialParser._parseTextureTransform(material, baseColorTexture.extensions, context);\n        }\n\n        if (!KHR_materials_unlit && !KHR_materials_pbrSpecularGlossiness) {\n          const m = material as PBRMaterial;\n          m.metallic = metallicFactor ?? 1;\n          m.roughness = roughnessFactor ?? 1;\n          if (metallicRoughnessTexture) {\n            m.roughnessMetallicTexture = textures[metallicRoughnessTexture.index];\n            MaterialParser._parseTextureTransform(material, metallicRoughnessTexture.extensions, context);\n          }\n        }\n      }\n\n      if (!KHR_materials_unlit) {\n        const m = material as PBRMaterial | PBRSpecularMaterial;\n\n        if (emissiveTexture) {\n          m.emissiveTexture = textures[emissiveTexture.index];\n          MaterialParser._parseTextureTransform(material, emissiveTexture.extensions, context);\n        }\n\n        if (emissiveFactor) {\n          m.emissiveColor = new Color(\n            Color.linearToGammaSpace(emissiveFactor[0]),\n            Color.linearToGammaSpace(emissiveFactor[1]),\n            Color.linearToGammaSpace(emissiveFactor[2])\n          );\n        }\n\n        if (normalTexture) {\n          const { index, scale } = normalTexture;\n          m.normalTexture = textures[index];\n          MaterialParser._parseTextureTransform(material, normalTexture.extensions, context);\n          if (scale !== undefined) {\n            m.normalTextureIntensity = scale;\n          }\n        }\n\n        if (occlusionTexture) {\n          const { index, strength, texCoord } = occlusionTexture;\n          m.occlusionTexture = textures[index];\n          MaterialParser._parseTextureTransform(material, occlusionTexture.extensions, context);\n          if (strength !== undefined) {\n            m.occlusionTextureIntensity = strength;\n          }\n          if (texCoord === TextureCoordinate.UV1) {\n            m.occlusionTextureCoord = TextureCoordinate.UV1;\n          } else if (texCoord > TextureCoordinate.UV1) {\n            Logger.warn(\"Occlusion texture uv coordinate must be UV0 or UV1.\");\n          }\n        }\n      }\n\n      if (OASIS_materials_remap) {\n        context.gltf.extensions = context.gltf.extensions ?? {};\n        context.gltf.extensions[\"OASIS_materials_remap\"] = context.gltf.extensions[\"OASIS_materials_remap\"] ?? {};\n        context.gltf.extensions[\"OASIS_materials_remap\"][i] = Parser.createEngineResource(\n          \"OASIS_materials_remap\",\n          OASIS_materials_remap,\n          context\n        );\n      }\n\n      if (doubleSided) {\n        material.renderFace = RenderFace.Double;\n      } else {\n        material.renderFace = RenderFace.Front;\n      }\n\n      switch (alphaMode) {\n        case MaterialAlphaMode.OPAQUE:\n          material.isTransparent = false;\n          break;\n        case MaterialAlphaMode.BLEND:\n          material.isTransparent = true;\n          break;\n        case MaterialAlphaMode.MASK:\n          material.alphaCutoff = alphaCutoff ?? 0.5;\n          break;\n      }\n\n      materials[i] = material;\n    }\n\n    context.materials = materials;\n  }\n}\n","import { BlendShape, Engine, EngineObject, ModelMesh, TypedArray } from \"@oasis-engine/core\";\nimport { Vector3 } from \"@oasis-engine/math\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { AccessorType, IGLTF, IMesh, IMeshPrimitive } from \"../Schema\";\nimport { Parser } from \"./Parser\";\n\nexport class MeshParser extends Parser {\n  private static _tempVector3 = new Vector3();\n  parse(context: GLTFResource): Promise<void> {\n    const { engine, gltf, buffers } = context;\n    if (!gltf.meshes) return;\n\n    const meshPromises: Promise<ModelMesh[]>[] = [];\n\n    for (let i = 0; i < gltf.meshes.length; i++) {\n      const gltfMesh = gltf.meshes[i];\n      const primitivePromises: Promise<ModelMesh>[] = [];\n\n      for (let j = 0; j < gltfMesh.primitives.length; j++) {\n        const gltfPrimitive = gltfMesh.primitives[j];\n        const { extensions = {} } = gltfPrimitive;\n        const { KHR_draco_mesh_compression } = extensions;\n\n        primitivePromises.push(\n          new Promise((resolve) => {\n            const mesh = new ModelMesh(engine, gltfMesh.name || j + \"\");\n\n            if (KHR_draco_mesh_compression) {\n              (<Promise<EngineObject>>(\n                Parser.createEngineResource(\n                  \"KHR_draco_mesh_compression\",\n                  KHR_draco_mesh_compression,\n                  context,\n                  gltfPrimitive\n                )\n              ))\n                .then((decodedGeometry: any) => {\n                  return this._parseMeshFromGLTFPrimitive(\n                    mesh,\n                    gltfMesh,\n                    gltfPrimitive,\n                    gltf,\n                    (attributeSemantic) => {\n                      for (let j = 0; j < decodedGeometry.attributes.length; j++) {\n                        if (decodedGeometry.attributes[j].name === attributeSemantic) {\n                          return decodedGeometry.attributes[j].array;\n                        }\n                      }\n                      return null;\n                    },\n                    (attributeSemantic, shapeIndex) => {\n                      throw \"BlendShape animation is not supported when using draco.\";\n                    },\n                    () => {\n                      return decodedGeometry.index.array;\n                    },\n                    engine\n                  );\n                })\n                .then(resolve);\n            } else {\n              this._parseMeshFromGLTFPrimitive(\n                mesh,\n                gltfMesh,\n                gltfPrimitive,\n                gltf,\n                (attributeSemantic) => {\n                  const accessorIdx = gltfPrimitive.attributes[attributeSemantic];\n                  const accessor = gltf.accessors[accessorIdx];\n                  return GLTFUtil.getAccessorData(gltf, accessor, buffers);\n                },\n                (attributeName, shapeIndex) => {\n                  const shapeAccessorIdx = gltfPrimitive.targets[shapeIndex];\n                  const attributeAccessorIdx = shapeAccessorIdx[attributeName];\n                  if (attributeAccessorIdx) {\n                    const accessor = gltf.accessors[attributeAccessorIdx];\n                    return GLTFUtil.getAccessorData(gltf, accessor, buffers);\n                  } else {\n                    return null;\n                  }\n                },\n                () => {\n                  const indexAccessor = gltf.accessors[gltfPrimitive.indices];\n                  return GLTFUtil.getAccessorData(gltf, indexAccessor, buffers);\n                },\n                engine\n              ).then(resolve);\n            }\n          })\n        );\n      }\n\n      meshPromises.push(Promise.all(primitivePromises));\n    }\n\n    return Promise.all(meshPromises).then((meshes: ModelMesh[][]) => {\n      context.meshes = meshes;\n    });\n  }\n\n  private _parseMeshFromGLTFPrimitive(\n    mesh: ModelMesh,\n    gltfMesh: IMesh,\n    gltfPrimitive: IMeshPrimitive,\n    gltf: IGLTF,\n    getVertexBufferData: (semantic: string) => TypedArray,\n    getBlendShapeData: (semantic: string, shapeIndex: number) => TypedArray,\n    getIndexBufferData: () => TypedArray,\n    engine: Engine\n  ): Promise<ModelMesh> {\n    const { attributes, targets, indices, mode } = gltfPrimitive;\n    let vertexCount: number;\n\n    const { accessors } = gltf;\n    const accessor = accessors[attributes[\"POSITION\"]];\n    const positionBuffer = <Float32Array>getVertexBufferData(\"POSITION\");\n    const positions = GLTFUtil.floatBufferToVector3Array(positionBuffer);\n    mesh.setPositions(positions);\n\n    const { bounds } = mesh;\n    vertexCount = accessor.count;\n    if (accessor.min && accessor.max) {\n      bounds.min.copyFromArray(accessor.min);\n      bounds.max.copyFromArray(accessor.max);\n    } else {\n      const position = MeshParser._tempVector3;\n      const { min, max } = bounds;\n\n      min.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n      max.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n\n      const stride = positionBuffer.length / vertexCount;\n      for (let j = 0; j < vertexCount; j++) {\n        const offset = j * stride;\n        position.copyFromArray(positionBuffer, offset);\n        Vector3.min(min, position, min);\n        Vector3.max(max, position, max);\n      }\n    }\n\n    for (const attributeSemantic in attributes) {\n      if (attributeSemantic === \"POSITION\") {\n        continue;\n      }\n      const bufferData = getVertexBufferData(attributeSemantic);\n      switch (attributeSemantic) {\n        case \"NORMAL\":\n          const normals = GLTFUtil.floatBufferToVector3Array(<Float32Array>bufferData);\n          mesh.setNormals(normals);\n          break;\n        case \"TEXCOORD_0\":\n          const texturecoords = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords, 0);\n          break;\n        case \"TEXCOORD_1\":\n          const texturecoords1 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords1, 1);\n          break;\n        case \"TEXCOORD_2\":\n          const texturecoords2 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords2, 2);\n          break;\n        case \"TEXCOORD_3\":\n          const texturecoords3 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords3, 3);\n          break;\n        case \"TEXCOORD_4\":\n          const texturecoords4 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords4, 4);\n          break;\n        case \"TEXCOORD_5\":\n          const texturecoords5 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords5, 5);\n          break;\n        case \"TEXCOORD_6\":\n          const texturecoords6 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords6, 6);\n          break;\n        case \"TEXCOORD_7\":\n          const texturecoords7 = GLTFUtil.floatBufferToVector2Array(<Float32Array>bufferData);\n          mesh.setUVs(texturecoords7, 7);\n          break;\n        case \"COLOR_0\":\n          const colors = GLTFUtil.floatBufferToColorArray(\n            <Float32Array>bufferData,\n            accessors[attributes[\"COLOR_0\"]].type === AccessorType.VEC3\n          );\n          mesh.setColors(colors);\n          break;\n        case \"TANGENT\":\n          const tangents = GLTFUtil.floatBufferToVector4Array(<Float32Array>bufferData);\n          mesh.setTangents(tangents);\n          break;\n\n        case \"JOINTS_0\":\n          const joints = GLTFUtil.floatBufferToVector4Array(<Float32Array>bufferData);\n          mesh.setBoneIndices(joints);\n          break;\n        case \"WEIGHTS_0\":\n          const weights = GLTFUtil.floatBufferToVector4Array(<Float32Array>bufferData);\n          mesh.setBoneWeights(weights);\n          break;\n        default:\n          // console.warn(`Unsupport attribute semantic ${attributeSemantic}.`);\n          break;\n      }\n    }\n\n    // Indices\n    if (indices !== undefined) {\n      const indexAccessor = gltf.accessors[indices];\n      const indexData = getIndexBufferData();\n      mesh.setIndices(<Uint8Array | Uint16Array | Uint32Array>indexData);\n      mesh.addSubMesh(0, indexAccessor.count, mode);\n    } else {\n      mesh.addSubMesh(0, vertexCount, mode);\n    }\n\n    // BlendShapes\n    targets && this._createBlendShape(mesh, gltfMesh, targets, getBlendShapeData);\n\n    mesh.uploadData(true);\n    return Promise.resolve(mesh);\n  }\n\n  private _createBlendShape(\n    mesh: ModelMesh,\n    glTFMesh: IMesh,\n    glTFTargets: {\n      [name: string]: number;\n    }[],\n    getBlendShapeData: (semantic: string, shapeIndex: number) => TypedArray\n  ): void {\n    const blendShapeNames = glTFMesh.extras ? glTFMesh.extras.targetNames : null;\n\n    for (let i = 0, n = glTFTargets.length; i < n; i++) {\n      const name = blendShapeNames ? blendShapeNames[i] : `blendShape${i}`;\n      const deltaPosBuffer = getBlendShapeData(\"POSITION\", i);\n      const deltaNorBuffer = getBlendShapeData(\"NORMAL\", i);\n      const deltaTanBuffer = getBlendShapeData(\"TANGENT\", i);\n      const deltaPositions = deltaPosBuffer ? GLTFUtil.floatBufferToVector3Array(<Float32Array>deltaPosBuffer) : null;\n      const deltaNormals = deltaNorBuffer ? GLTFUtil.floatBufferToVector3Array(<Float32Array>deltaNorBuffer) : null;\n      const deltaTangents = deltaTanBuffer ? GLTFUtil.floatBufferToVector3Array(<Float32Array>deltaTanBuffer) : null;\n\n      const blendShape = new BlendShape(name);\n      blendShape.addFrame(1.0, deltaPositions, deltaNormals, deltaTangents);\n      mesh.addBlendShape(blendShape);\n    }\n  }\n}\n","import {\n  Animator,\n  AnimatorController,\n  AnimatorControllerLayer,\n  AnimatorStateMachine,\n  BlinnPhongMaterial,\n  Camera,\n  Engine,\n  Entity,\n  MeshRenderer,\n  SkinnedMeshRenderer\n} from \"@oasis-engine/core\";\nimport { IKHRLightsPunctual, IKHRLightsPunctual_LightNode } from \"../extensions/Schema\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { CameraType, ICamera, INode } from \"../Schema\";\nimport { Parser } from \"./Parser\";\n\nexport class SceneParser extends Parser {\n  private static _defaultMaterial: BlinnPhongMaterial;\n\n  private static _getDefaultMaterial(engine: Engine): BlinnPhongMaterial {\n    if (!SceneParser._defaultMaterial) {\n      SceneParser._defaultMaterial = new BlinnPhongMaterial(engine);\n    }\n\n    return SceneParser._defaultMaterial;\n  }\n\n  parse(context: GLTFResource): Promise<any> {\n    const {\n      gltf: { nodes, cameras: gltfCameras },\n      entities\n    } = context;\n\n    if (!nodes) return;\n\n    const promises = [];\n\n    for (let i = 0; i < nodes.length; i++) {\n      const gltfNode = nodes[i];\n      const { camera: cameraID, mesh: meshID, extensions = {} } = gltfNode;\n      const KHR_lights_punctual = <IKHRLightsPunctual_LightNode>extensions.KHR_lights_punctual;\n      const entity = entities[i];\n\n      if (cameraID !== undefined) {\n        this._createCamera(context, gltfCameras[cameraID], entity);\n      }\n\n      if (meshID !== undefined) {\n        promises.push(this._createRenderer(context, gltfNode, entity));\n      }\n\n      if (KHR_lights_punctual) {\n        const lightIndex = KHR_lights_punctual.light;\n        const lights = (context.gltf.extensions.KHR_lights_punctual as IKHRLightsPunctual).lights;\n\n        Parser.parseEngineResource(\"KHR_lights_punctual\", lights[lightIndex], entity, context);\n      }\n    }\n\n    if (context.defaultSceneRoot) {\n      this._createAnimator(context);\n    }\n    \n    context.gltf.extensions && delete context.gltf.extensions[\"OASIS_materials_remap\"];\n    return Promise.all(promises);\n  }\n\n  private _createCamera(context: GLTFResource, cameraSchema: ICamera, entity: Entity): void {\n    const { orthographic, perspective, type } = cameraSchema;\n    const camera = entity.addComponent(Camera);\n\n    if (type === CameraType.ORTHOGRAPHIC) {\n      const { xmag, ymag, zfar, znear } = orthographic;\n\n      camera.isOrthographic = true;\n\n      if (znear !== undefined) {\n        camera.nearClipPlane = znear;\n      }\n      if (zfar !== undefined) {\n        camera.farClipPlane = zfar;\n      }\n\n      camera.orthographicSize = Math.max(ymag ?? 0, xmag ?? 0) / 2;\n    } else if (type === CameraType.PERSPECTIVE) {\n      const { aspectRatio, yfov, zfar, znear } = perspective;\n\n      if (aspectRatio !== undefined) {\n        camera.aspectRatio = aspectRatio;\n      }\n      if (yfov !== undefined) {\n        camera.fieldOfView = (yfov * 180) / Math.PI;\n      }\n      if (zfar !== undefined) {\n        camera.farClipPlane = zfar;\n      }\n      if (znear !== undefined) {\n        camera.nearClipPlane = znear;\n      }\n    }\n\n    if (!context.cameras) context.cameras = [];\n    context.cameras.push(camera);\n    // @todo: use engine camera by default\n    camera.enabled = false;\n  }\n\n  private _createRenderer(context: GLTFResource, gltfNode: INode, entity: Entity): Promise<any> {\n    const {\n      engine,\n      gltf: { meshes: gltfMeshes },\n      meshes,\n      materials,\n      skins\n    } = context;\n    const { mesh: meshID, skin: skinID } = gltfNode;\n    const glTFMesh = gltfMeshes[meshID];\n    const gltfMeshPrimitives = glTFMesh.primitives;\n    const blendShapeWeights = gltfNode.weights || glTFMesh.weights;\n\n    const promises = [];\n    for (let i = 0; i < gltfMeshPrimitives.length; i++) {\n      const mesh = meshes[meshID][i];\n      let renderer: MeshRenderer | SkinnedMeshRenderer;\n\n      if (skinID !== undefined || blendShapeWeights) {\n        const skinRenderer = entity.addComponent(SkinnedMeshRenderer);\n        skinRenderer.mesh = mesh;\n        if (skinID !== undefined) {\n          skinRenderer.skin = skins[skinID];\n        }\n        if (blendShapeWeights) {\n          skinRenderer.blendShapeWeights = new Float32Array(blendShapeWeights);\n        }\n        renderer = skinRenderer;\n      } else {\n        renderer = entity.addComponent(MeshRenderer);\n        renderer.mesh = mesh;\n      }\n\n      const materialIndex = gltfMeshPrimitives[i].material;\n      const remapMaterials = context.gltf.extensions && context.gltf.extensions[\"OASIS_materials_remap\"];\n      if (remapMaterials && remapMaterials[materialIndex]) {\n        promises.push(\n          remapMaterials[materialIndex].then((mtl) => {\n            renderer.setMaterial(mtl);\n          })\n        );\n      } else {\n        const material = materials?.[materialIndex] || SceneParser._getDefaultMaterial(engine);\n        renderer.setMaterial(material);\n      }\n\n      const { extensions = {} } = gltfMeshPrimitives[i];\n      const { KHR_materials_variants } = extensions;\n      if (KHR_materials_variants) {\n        Parser.parseEngineResource(\"KHR_materials_variants\", KHR_materials_variants, renderer, context);\n      }\n    }\n    return Promise.all(promises);\n  }\n\n  private _createAnimator(context: GLTFResource) {\n    const { defaultSceneRoot, animations } = context;\n    if (!animations) return;\n    const animator = defaultSceneRoot.addComponent(Animator);\n    const animatorController = new AnimatorController();\n    const layer = new AnimatorControllerLayer(\"layer\");\n    const animatorStateMachine = new AnimatorStateMachine();\n    animatorController.addLayer(layer);\n    animator.animatorController = animatorController;\n    layer.stateMachine = animatorStateMachine;\n    if (animations) {\n      for (let i = 0; i < animations.length; i++) {\n        const animationClip = animations[i];\n        const name = animationClip.name;\n        const uniqueName = animatorStateMachine.makeUniqueStateName(name);\n        if (uniqueName !== name) {\n          console.warn(`AnimatorState name is existed, name: ${name} reset to ${uniqueName}`);\n        }\n        const animatorState = animatorStateMachine.addState(uniqueName);\n        animatorState.clip = animationClip;\n      }\n    }\n  }\n}\n","import { Skin } from \"@oasis-engine/core\";\nimport { Matrix } from \"@oasis-engine/math\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { Parser } from \"./Parser\";\n\nexport class SkinParser extends Parser {\n  parse(context: GLTFResource): void {\n    const { gltf, buffers, entities, defaultSceneRoot } = context;\n    const gltfSkins = gltf.skins;\n\n    if (!gltfSkins) return;\n\n    const skins: Skin[] = [];\n\n    for (let i = 0; i < gltfSkins.length; i++) {\n      const { inverseBindMatrices, skeleton, joints, name = `SKIN_${i}` } = gltfSkins[i];\n      const jointCount = joints.length;\n\n      const skin = new Skin(name);\n      skin.inverseBindMatrices.length = jointCount;\n\n      // parse IBM\n      const accessor = gltf.accessors[inverseBindMatrices];\n      const buffer = GLTFUtil.getAccessorData(gltf, accessor, buffers);\n      for (let i = 0; i < jointCount; i++) {\n        const inverseBindMatrix = new Matrix();\n        inverseBindMatrix.copyFromArray(buffer, i * 16);\n        skin.inverseBindMatrices[i] = inverseBindMatrix;\n      }\n\n      // get joints\n      for (let i = 0; i < jointCount; i++) {\n        skin.joints[i] = entities[joints[i]].name;\n      }\n\n      // get skeleton\n      if (skeleton !== undefined) {\n        skin.skeleton = entities[skeleton].name;\n      } else {\n        skin.skeleton = defaultSceneRoot.name;\n      }\n\n      skins[i] = skin;\n    }\n\n    context.skins = skins;\n  }\n}\n","import { AssetType, Logger, Texture2D, TextureWrapMode } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { ISampler } from \"../Schema\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { Parser } from \"./Parser\";\n\nexport class TextureParser extends Parser {\n  private static _wrapMap = {\n    33071: TextureWrapMode.Clamp,\n    33648: TextureWrapMode.Mirror,\n    10497: TextureWrapMode.Repeat\n  };\n\n  parse(context: GLTFResource): void | Promise<void> {\n    const { gltf, buffers, engine, url } = context;\n\n    if (gltf.textures) {\n      return Promise.all(\n        gltf.textures.map(({ sampler, source = 0, name: textureName }, index) => {\n          const { uri, bufferView: bufferViewIndex, mimeType, name: imageName } = gltf.images[source];\n\n          if (uri) {\n            return engine.resourceManager\n              .load<Texture2D>({\n                url: GLTFUtil.parseRelativeUrl(url, uri),\n                type: AssetType.Texture2D\n              })\n              .then((texture) => {\n                if (!texture.name) {\n                  texture.name = textureName || imageName || `texture_${index}`;\n                }\n                if (sampler !== undefined) {\n                  this._parseSampler(texture, gltf.samplers[sampler]);\n                }\n                return texture;\n              });\n          } else {\n            const bufferView = gltf.bufferViews[bufferViewIndex];\n            const bufferViewData = GLTFUtil.getBufferViewData(bufferView, buffers);\n            return GLTFUtil.loadImageBuffer(bufferViewData, mimeType).then((image) => {\n              const texture = new Texture2D(engine, image.width, image.height);\n              texture.setImageSource(image);\n              texture.generateMipmaps();\n              texture.name = textureName || imageName || `texture_${index}`;\n              if (sampler !== undefined) {\n                this._parseSampler(texture, gltf.samplers[sampler]);\n              }\n              return texture;\n            });\n          }\n        })\n      ).then((textures: Texture2D[]) => {\n        context.textures = textures;\n      });\n    }\n  }\n\n  private _parseSampler(texture: Texture2D, sampler: ISampler): void {\n    const { magFilter, minFilter, wrapS, wrapT } = sampler;\n\n    if (magFilter || minFilter) {\n      Logger.warn(\"texture use filterMode in engine\");\n    }\n\n    if (wrapS) {\n      texture.wrapModeU = TextureParser._wrapMap[wrapS];\n    }\n\n    if (wrapT) {\n      texture.wrapModeV = TextureParser._wrapMap[wrapT];\n    }\n  }\n}\n","import { Logger } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { Parser } from \"./Parser\";\n\nexport class Validator extends Parser {\n  parse(context: GLTFResource): void {\n    const {\n      gltf: {\n        asset: { version },\n        extensionsUsed,\n        extensionsRequired\n      }\n    } = context;\n\n    const gltfVersion = Number(version);\n    if (!(gltfVersion >= 2 && gltfVersion < 3)) {\n      throw \"Only support gltf 2.x.\";\n    }\n\n    if (extensionsUsed) {\n      Logger.info(\"extensionsUsed: \", extensionsUsed);\n      for (let i = 0; i < extensionsUsed.length; i++) {\n        if (!Parser.hasExtensionParser(extensionsUsed[i])) {\n          Logger.warn(`Extension ${extensionsUsed[i]} is not implemented, you can customize this extension in gltf.`);\n        }\n      }\n    }\n\n    if (extensionsRequired) {\n      Logger.info(`extensionsRequired: ${extensionsRequired}`);\n      for (let i = 0; i < extensionsRequired.length; i++) {\n        const extensionRequired = extensionsRequired[i];\n\n        if (!Parser.hasExtensionParser(extensionRequired)) {\n          Logger.error(`GLTF parser has not supported required extension ${extensionRequired}.`);\n        } else {\n          Parser.initialize(extensionRequired);\n        }\n      }\n    }\n  }\n}\n","import { GLTFResource } from \"./GLTFResource\";\nimport { AnimationParser } from \"./parser/AnimationParser\";\nimport { BufferParser } from \"./parser/BufferParser\";\nimport { EntityParser } from \"./parser/EntityParser\";\nimport { MaterialParser } from \"./parser/MaterialParser\";\nimport { MeshParser } from \"./parser/MeshParser\";\nimport { Parser } from \"./parser/Parser\";\nimport { SceneParser } from \"./parser/SceneParser\";\nimport { SkinParser } from \"./parser/SkinParser\";\nimport { TextureParser } from \"./parser/TextureParser\";\nimport { Validator } from \"./parser/Validator\";\n\nexport class GLTFParser {\n  static instance = new GLTFParser([\n    BufferParser,\n    Validator,\n    TextureParser,\n    MaterialParser,\n    MeshParser,\n    EntityParser,\n    SkinParser,\n    AnimationParser,\n    SceneParser\n  ]);\n\n  private _pipes: Parser[] = [];\n\n  private constructor(pipes: (new () => Parser)[]) {\n    pipes.forEach((pipe: new () => Parser, index: number) => {\n      this._pipes[index] = new pipe();\n    });\n  }\n\n  parse(context: GLTFResource): Promise<GLTFResource> {\n    let lastPipe: void | Promise<void>;\n\n    return new Promise((resolve, reject) => {\n      this._pipes.forEach((parser: Parser) => {\n        if (lastPipe) {\n          lastPipe = lastPipe.then(() => {\n            return parser.parse(context);\n          });\n        } else {\n          lastPipe = parser.parse(context);\n        }\n      });\n\n      if (lastPipe) {\n        lastPipe\n          .then(() => {\n            resolve(context);\n          })\n          .catch(reject);\n      } else {\n        resolve(context);\n      }\n    });\n  }\n}\n","import {\n  AnimationClip,\n  Camera,\n  EngineObject,\n  Entity,\n  Light,\n  Material,\n  ModelMesh,\n  Renderer,\n  Skin,\n  Texture2D\n} from \"@oasis-engine/core\";\nimport { IGLTF } from \"./Schema\";\n\n/**\n * Product after GLTF parser, usually, `defaultSceneRoot` is only needed to use.\n */\nexport class GLTFResource extends EngineObject {\n  /** GLTF file url. */\n  url: string;\n  /** GLTF file content. */\n  gltf: IGLTF;\n  /** ArrayBuffer after BufferParser. */\n  buffers: ArrayBuffer[];\n  /** Oasis Texture2D after TextureParser. */\n  textures?: Texture2D[];\n  /** Oasis Material after MaterialParser. */\n  materials?: Material[];\n  /** Oasis ModelMesh after MeshParser. */\n  meshes?: ModelMesh[][];\n  /** Oasis Skin after SkinParser. */\n  skins?: Skin[];\n  /** Oasis AnimationClip after AnimationParser. */\n  animations?: AnimationClip[];\n  /** Oasis Entity after EntityParser. */\n  entities: Entity[];\n  /** Oasis Camera after SceneParser. */\n  cameras?: Camera[];\n  /** GLTF can export lights in extension KHR_lights_punctual */\n  lights?: Light[];\n  /** Oasis RootEntities after SceneParser. */\n  sceneRoots: Entity[];\n  /** Oasis RootEntity after SceneParser. */\n  defaultSceneRoot: Entity;\n  /** Renderer can replace material by `renderer.setMaterial` if gltf use plugin-in KHR_materials_variants. */\n  variants?: { renderer: Renderer; material: Material; variants: string[] }[];\n}\n","import { AssetPromise, AssetType, Loader, LoadItem, resourceLoader, ResourceManager } from \"@oasis-engine/core\";\nimport { GLTFParser } from \"./gltf/GLTFParser\";\nimport { GLTFResource } from \"./gltf/GLTFResource\";\n\n@resourceLoader(AssetType.Prefab, [\"gltf\", \"glb\"])\nexport class GLTFLoader extends Loader<GLTFResource> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<GLTFResource> {\n    const url = item.url;\n    return new AssetPromise((resolve, reject) => {\n      const resource = new GLTFResource(resourceManager.engine);\n      resource.url = url;\n\n      GLTFParser.instance\n        .parse(resource)\n        .then(resolve)\n        .catch((e) => {\n          console.error(e);\n          reject(`Error loading glTF model from ${url} .`);\n        });\n    });\n  }\n}\n","import { resourceLoader, Loader, AssetPromise, AssetType, LoadItem } from \"@oasis-engine/core\";\n\n@resourceLoader(AssetType.JSON, [\"json\"], false)\nclass JSONLoader extends Loader<string> {\n  load(item: LoadItem): AssetPromise<string> {\n    return this.request(item.url, {\n      ...item,\n      type: \"json\"\n    });\n  }\n}\n","/**\n *\n * ported from https://github.com/BabylonJS/Babylon.js/blob/master/src/Tools/babylon.khronosTextureContainer.ts\n */\n\nimport { TextureFormat } from \"@oasis-engine/core\";\nimport { GLCompressedTextureInternalFormat } from \"@oasis-engine/rhi-webgl\";\nimport { KTXContainer, Mipmap } from \"./type\";\n\nconst HEADER_LEN = 12 + 13 * 4; // identifier + header elements (not including key value meta-data pairs)\n\n// load types\nconst COMPRESSED_2D = 0; // uses a gl.compressedTexImage2D()\nconst COMPRESSED_3D = 1; // uses a gl.compressedTexImage3D()\nconst TEX_2D = 2; // uses a gl.texImage2D()\nconst TEX_3D = 3; // uses a gl.texImage3D()\n\nfunction getMipmaps(ktxContainer: KTXContainer, loadMipmaps: boolean): Mipmap[] {\n  const mipmaps = [];\n\n  // initialize width & height for level 1\n  var dataOffset = HEADER_LEN + ktxContainer.bytesOfKeyValueData;\n  var width = ktxContainer.pixelWidth;\n  var height = ktxContainer.pixelHeight;\n  var mipmapCount = loadMipmaps ? ktxContainer.numberOfMipmapLevels : 1;\n\n  for (var level = 0; level < mipmapCount; level++) {\n    var imageSize = new Int32Array(ktxContainer.buffer, dataOffset, 1)[0]; // size per face, since not supporting array cubemaps\n    dataOffset += 4; // size of the image + 4 for the imageSize field\n\n    for (var face = 0; face < ktxContainer.numberOfFaces; face++) {\n      var byteArray = new Uint8Array(ktxContainer.buffer, dataOffset, imageSize);\n\n      mipmaps.push({ data: byteArray, width: width, height: height });\n\n      dataOffset += imageSize;\n      dataOffset += 3 - ((imageSize + 3) % 4); // add padding for odd sized image\n    }\n    width = Math.max(1.0, width * 0.5);\n    height = Math.max(1.0, height * 0.5);\n  }\n\n  return mipmaps;\n}\n\n/**\n * Checks if the given data starts with a KTX file identifier.\n * @param data the data to check\n * @returns true if the data is a KTX file or false otherwise\n */\nfunction isValid(data: ArrayBuffer): boolean {\n  if (data.byteLength >= 12) {\n    // '«', 'K', 'T', 'X', ' ', '1', '1', '»', '\\r', '\\n', '\\x1A', '\\n'\n    const identifier = new Uint8Array(data, 0, 12);\n    if (\n      identifier[0] === 0xab &&\n      identifier[1] === 0x4b &&\n      identifier[2] === 0x54 &&\n      identifier[3] === 0x58 &&\n      identifier[4] === 0x20 &&\n      identifier[5] === 0x31 &&\n      identifier[6] === 0x31 &&\n      identifier[7] === 0xbb &&\n      identifier[8] === 0x0d &&\n      identifier[9] === 0x0a &&\n      identifier[10] === 0x1a &&\n      identifier[11] === 0x0a\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getEngineFormat(internalFormat: GLint): TextureFormat {\n  switch (internalFormat) {\n    // case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT3_EXT:\n    // case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT:\n    // break;\n    case GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT:\n      return TextureFormat.DXT1;\n    case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT:\n      return TextureFormat.DXT5;\n    case GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL:\n      return TextureFormat.ETC1_RGB;\n    case GLCompressedTextureInternalFormat.RGB8_ETC2:\n      return TextureFormat.ETC2_RGB;\n    case GLCompressedTextureInternalFormat.RGB8_PUNCHTHROUGH_ALPHA1_ETC2:\n      return TextureFormat.ETC2_RGBA5;\n    case GLCompressedTextureInternalFormat.RGBA8_ETC2_EAC:\n      return TextureFormat.ETC2_RGBA8;\n    case GLCompressedTextureInternalFormat.RGB_PVRTC_2BPPV1_IMG:\n      return TextureFormat.PVRTC_RGB2;\n    case GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG:\n      return TextureFormat.PVRTC_RGBA2;\n    case GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG:\n      return TextureFormat.PVRTC_RGB4;\n    case GLCompressedTextureInternalFormat.RGBA_PVRTC_4BPPV1_IMG:\n      return TextureFormat.PVRTC_RGBA4;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR:\n      return TextureFormat.ASTC_4x4;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_5X5_KHR:\n      return TextureFormat.ASTC_5x5;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_6X6_KHR:\n      return TextureFormat.ASTC_6x6;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_8X8_KHR:\n      return TextureFormat.ASTC_8x8;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_10X10_KHR:\n      return TextureFormat.ASTC_10x10;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR:\n      return TextureFormat.ASTC_12x12;\n    default:\n      const formatName: any = GLCompressedTextureInternalFormat[internalFormat];\n      throw new Error(`this format is not supported in Oasis Engine: ${formatName}`);\n  }\n}\n/**\n * for description see https://www.khronos.org/opengles/sdk/tools/KTX/\n * for file layout see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/\n */\nexport const khronosTextureContainerParser = {\n  /**\n   *\n   * @param buffer contents of the KTX container file\n   * @param facesExpected should be either 1 or 6, based whether a cube texture or or\n   * @param threeDExpected provision for indicating that data should be a 3D texture, not implemented\n   * @param textureArrayExpected provision for indicating that data should be a texture array, not implemented\n   * @param mapEngineFormat get Oasis Engine native TextureFormat?\n   */\n  parse(\n    buffer: ArrayBuffer,\n    facesExpected: number,\n    withMipmaps: boolean,\n    mapEngineFormat: boolean = false\n  ): KTXContainer {\n    if (!isValid(buffer)) {\n      throw new Error(\"khronosTextureContainerParser: invalid KTX file, texture missing KTX identifier\");\n    }\n\n    // load the reset of the header in native 32 bit uint\n    const dataSize = Uint32Array.BYTES_PER_ELEMENT;\n    const headerDataView = new DataView(buffer, 12, 13 * dataSize);\n    const endianness = headerDataView.getUint32(0, true);\n    const littleEndian = endianness === 0x04030201;\n\n    const parsedResult: KTXContainer = {\n      buffer: buffer,\n      glType: headerDataView.getUint32(1 * dataSize, littleEndian), // must be 0 for compressed textures\n      glTypeSize: headerDataView.getUint32(2 * dataSize, littleEndian), // must be 1 for compressed textures\n      glFormat: headerDataView.getUint32(3 * dataSize, littleEndian), // must be 0 for compressed textures\n      glInternalFormat: headerDataView.getUint32(4 * dataSize, littleEndian), // the value of arg passed to gl.compressedTexImage2D(,,x,,,,)\n      glBaseInternalFormat: headerDataView.getUint32(5 * dataSize, littleEndian), // specify GL_RGB, GL_RGBA, GL_ALPHA, etc (un-compressed only)\n      pixelWidth: headerDataView.getUint32(6 * dataSize, littleEndian), // level 0 value of arg passed to gl.compressedTexImage2D(,,,x,,,)\n      pixelHeight: headerDataView.getUint32(7 * dataSize, littleEndian), // level 0 value of arg passed to gl.compressedTexImage2D(,,,,x,,)\n      pixelDepth: headerDataView.getUint32(8 * dataSize, littleEndian), // level 0 value of arg passed to gl.compressedTexImage3D(,,,,,x,,)\n      numberOfArrayElements: headerDataView.getUint32(9 * dataSize, littleEndian), // used for texture arrays\n      numberOfFaces: headerDataView.getUint32(10 * dataSize, littleEndian), // used for cubemap textures, should either be 1 or 6\n      numberOfMipmapLevels: headerDataView.getUint32(11 * dataSize, littleEndian), // number of levels; disregard possibility of 0 for compressed textures\n      bytesOfKeyValueData: headerDataView.getUint32(12 * dataSize, littleEndian), // the amount of space after the header for meta-data\n      // would need to make this more elaborate & adjust checks above to support more than one load type\n      loadType: COMPRESSED_2D\n    };\n\n    // Make sure we have a compressed type.  Not only reduces work, but probably better to let dev know they are not compressing.\n    if (parsedResult.glType !== 0) {\n      throw new Error(\"only compressed formats currently supported\");\n    } else {\n      // value of zero is an indication to generate mipmaps @ runtime.  Not usually allowed for compressed, so disregard.\n      parsedResult.numberOfMipmapLevels = Math.max(1, parsedResult.numberOfMipmapLevels);\n    }\n\n    if (parsedResult.pixelHeight === 0 || parsedResult.pixelDepth !== 0) {\n      throw new Error(\"only 2D textures currently supported\");\n    }\n\n    if (parsedResult.numberOfArrayElements !== 0) {\n      throw new Error(\"texture arrays not currently supported\");\n    }\n\n    if (parsedResult.numberOfFaces !== facesExpected) {\n      throw new Error(\"number of faces expected\" + facesExpected + \", but found \" + parsedResult.numberOfFaces);\n    }\n\n    if (withMipmaps) {\n      parsedResult.mipmaps = getMipmaps(parsedResult, true);\n    }\n\n    if (mapEngineFormat) {\n      parsedResult.engineFormat = getEngineFormat(parsedResult.glInternalFormat);\n    }\n    return parsedResult;\n  }\n};\n","import { CompressedTextureData, CompressedCubeData } from \"./type\";\nimport { khronosTextureContainerParser } from \"./KhronosTextureContainer\";\nimport { TextureFormat } from \"@oasis-engine/core\";\n\nexport function parseSingleKTX(data: ArrayBuffer): CompressedTextureData {\n  const ktx = khronosTextureContainerParser.parse(data, 1, true, true);\n  return {\n    mipmaps: ktx.mipmaps,\n    engineFormat: ktx.engineFormat,\n    internalFormat: ktx.glInternalFormat,\n    width: ktx.pixelWidth,\n    height: ktx.pixelHeight\n  };\n}\n\nexport function parseCubeKTX(dataArray: ArrayBuffer[]): CompressedCubeData {\n  const mipmapsFaces = [];\n  let internalFormat: number;\n  let engineFormat: TextureFormat;\n  let width: number;\n  let height: number;\n  for (let i = 0; i < dataArray.length; i++) {\n    const ktx = khronosTextureContainerParser.parse(dataArray[i], 1, true, true);\n    mipmapsFaces.push(ktx.mipmaps);\n    if (i === 0) {\n      width = ktx.pixelWidth;\n      height = ktx.pixelHeight;\n      internalFormat = ktx.glInternalFormat;\n      engineFormat = ktx.engineFormat;\n    }\n  }\n  return {\n    mipmapsFaces,\n    engineFormat,\n    internalFormat,\n    width,\n    height\n  };\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  TextureCubeFace,\n  TextureCube\n} from \"@oasis-engine/core\";\nimport { parseCubeKTX } from \"./compressed-texture\";\n\n@resourceLoader(AssetType.KTXCube, [])\nclass KTXCubeLoader extends Loader<TextureCube> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<TextureCube> {\n    return new AssetPromise((resolve, reject) => {\n      Promise.all(\n        item.urls.map((url) =>\n          this.request<ArrayBuffer>(url, {\n            ...item,\n            type: \"arraybuffer\"\n          })\n        )\n      )\n        .then((data) => {\n          const parsedData = parseCubeKTX(data);\n          const { width, mipmapsFaces, engineFormat } = parsedData;\n          const mipmap = mipmapsFaces[0].length > 1;\n          const texture = new TextureCube(resourceManager.engine, width, engineFormat, mipmap);\n\n          for (let face = 0; face < 6; face++) {\n            const length = mipmapsFaces[face].length;\n\n            for (let miplevel = 0; miplevel < length; miplevel++) {\n              const { data, width, height } = mipmapsFaces[face][miplevel];\n\n              texture.setPixelBuffer(TextureCubeFace.PositiveX + face, data, miplevel, 0, 0, width, height);\n            }\n          }\n\n          resolve(texture);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  Texture2D\n} from \"@oasis-engine/core\";\nimport { parseSingleKTX } from \"./compressed-texture\";\n\n@resourceLoader(AssetType.KTX, [\"ktx\"])\nexport class KTXLoader extends Loader<Texture2D> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<Texture2D> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<ArrayBuffer>(item.url, {\n        ...item,\n        type: \"arraybuffer\"\n      })\n        .then((bin) => {\n          const parsedData = parseSingleKTX(bin);\n          const { width, height, mipmaps, engineFormat } = parsedData;\n          const mipmap = mipmaps.length > 1;\n          const texture = new Texture2D(resourceManager.engine, width, height, engineFormat, mipmap);\n\n          for (let miplevel = 0; miplevel < mipmaps.length; miplevel++) {\n            const { width, height, data } = mipmaps[miplevel];\n            texture.setPixelBuffer(data, miplevel, 0, 0, width, height);\n          }\n\n          resolve(texture);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  Texture2D\n} from \"@oasis-engine/core\";\n\n@resourceLoader(AssetType.Texture2D, [\"png\", \"jpg\", \"webp\", \"jpeg\"])\nclass Texture2DLoader extends Loader<Texture2D> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<Texture2D> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<HTMLImageElement>(item.url, {\n        ...item,\n        type: \"image\"\n      })\n        .then((image) => {\n          const texture = new Texture2D(resourceManager.engine, image.width, image.height);\n          /** @ts-ignore */\n          if (!texture._platformTexture) return;\n          texture.setImageSource(image);\n          texture.generateMipmaps();\n\n          if (item.url.indexOf(\"data:\") !== 0) {\n            const splitPath = item.url.split(\"/\");\n            texture.name = splitPath[splitPath.length - 1];\n          }\n          resolve(texture);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  TextureCubeFace,\n  TextureCube\n} from \"@oasis-engine/core\";\n\n@resourceLoader(AssetType.TextureCube, [\"\"])\nclass TextureCubeLoader extends Loader<TextureCube> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<TextureCube> {\n    return new AssetPromise((resolve, reject) => {\n      Promise.all(\n        item.urls.map((url) =>\n          this.request<HTMLImageElement>(url, {\n            ...item,\n            type: \"image\"\n          })\n        )\n      )\n        .then((images) => {\n          const { width, height } = images[0];\n\n          if (width !== height) {\n            console.error(\"The cube texture must have the same width and height\");\n            return;\n          }\n\n          const tex = new TextureCube(resourceManager.engine, width);\n\n          /** @ts-ignore */\n          if (!tex._platformTexture) return;\n\n          for (let faceIndex = 0; faceIndex < 6; faceIndex++) {\n            tex.setImageSource(TextureCubeFace.PositiveX + faceIndex, images[faceIndex], 0);\n          }\n\n          tex.generateMipmaps();\n          resolve(tex);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  resourceLoader,\n  Loader,\n  AssetPromise,\n  AssetType,\n  LoadItem,\n  Sprite,\n  Texture2D,\n  ResourceManager\n} from \"@oasis-engine/core\";\n\n@resourceLoader(AssetType.Sprite, [\"sprite\"], false)\nclass SpriteLoader extends Loader<Sprite> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<Sprite> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<any>(item.url, {\n        ...item,\n        type: \"json\"\n      }).then((data) => {\n        resourceManager.getResourceByRef<Texture2D>(data.texture).then((texture) => {\n          const sprite = new Sprite(resourceManager.engine, texture);\n          sprite.region = data.region;\n          sprite.pivot = data.pivot;\n          resolve(sprite);\n        });\n      });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  Sprite,\n  SpriteAtlas,\n  Texture2D\n} from \"@oasis-engine/core\";\nimport { AtlasConfig } from \"@oasis-engine/core/types/2d/atlas/types\";\nimport { Rect, Vector2 } from \"@oasis-engine/math\";\nimport { GLTFUtil } from \"./gltf/GLTFUtil\";\n\n@resourceLoader(AssetType.SpriteAtlas, [\"atlas\"], false)\nclass SpriteAtlasLoader extends Loader<SpriteAtlas> {\n  private _tempRect: Rect = new Rect();\n  private _tempVec2: Vector2 = new Vector2();\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<SpriteAtlas> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<AtlasConfig>(item.url, {\n        ...item,\n        type: \"json\"\n      })\n        .then((atlasData) => {\n          const { atlasItems, format } = atlasData;\n          const atlasItemsLen = atlasItems.length;\n          Promise.all(\n            atlasItems.map(({ img }) =>\n              this.request<HTMLImageElement>(GLTFUtil.parseRelativeUrl(item.url, img), {\n                ...item,\n                type: \"image\"\n              })\n            )\n          ).then((imgs) => {\n            const { engine } = resourceManager;\n            // Generate a SpriteAtlas object.\n            const { _tempRect: tempRect, _tempVec2: tempVec2 } = this;\n            const spriteAtlas = new SpriteAtlas(engine);\n            for (let i = 0; i < atlasItemsLen; i++) {\n              // Generate Texture2D according to configuration.\n              const originalImg = imgs[i];\n              const { width, height } = originalImg;\n              const texture = new Texture2D(engine, width, height, format);\n              texture.setImageSource(originalImg);\n              texture.generateMipmaps();\n              // Generate all the sprites on this texture.\n              const atlasItem = atlasItems[i];\n              const sprites = atlasItem.sprites;\n              const sourceWidthReciprocal = 1.0 / width;\n              const sourceHeightReciprocal = 1.0 / height;\n              for (let j = sprites.length - 1; j >= 0; j--) {\n                const atlasSprite = sprites[j];\n                const { region, atlasRegionOffset, atlasRegion, id, pivot } = atlasSprite;\n                const sprite = new Sprite(\n                  engine,\n                  texture,\n                  region ? tempRect.set(region.x, region.y, region.w, region.h) : undefined,\n                  pivot ? tempVec2.set(pivot.x, pivot.y) : undefined,\n                  undefined,\n                  atlasSprite.name\n                );\n                sprite.atlasRegion.set(\n                  atlasRegion.x * sourceWidthReciprocal,\n                  atlasRegion.y * sourceHeightReciprocal,\n                  atlasRegion.w * sourceWidthReciprocal,\n                  atlasRegion.h * sourceHeightReciprocal\n                );\n                atlasSprite.atlasRotated && (sprite.atlasRotated = true);\n                if (atlasRegionOffset) {\n                  const { x: offsetLeft, y: offsetTop, z: offsetRight, w: offsetBottom } = atlasRegionOffset;\n                  sprite.atlasRegionOffset.set(\n                    offsetLeft * sourceWidthReciprocal,\n                    offsetTop * sourceHeightReciprocal,\n                    offsetRight * sourceWidthReciprocal,\n                    offsetBottom * sourceHeightReciprocal\n                  );\n                }\n                if (id !== undefined) {\n                  // @ts-ignore\n                  sprite._assetID = id;\n                }\n                // @ts-ignore\n                spriteAtlas._addSprite(sprite);\n              }\n            }\n            resolve(spriteAtlas);\n          });\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  AmbientLight,\n  AssetPromise,\n  AssetType,\n  DiffuseMode,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  TextureCube,\n  TextureCubeFace,\n  TextureFilterMode\n} from \"@oasis-engine/core\";\nimport { SphericalHarmonics3 } from \"@oasis-engine/math\";\n\n@resourceLoader(AssetType.Env, [\"env\"])\nclass EnvLoader extends Loader<AmbientLight> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<AmbientLight> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<ArrayBuffer>(item.url, { type: \"arraybuffer\" })\n        .then((arraybuffer) => {\n          const shArray = new Float32Array(arraybuffer, 0, 27);\n          const shByteLength = 27 * 4;\n          const size = new Uint16Array(arraybuffer, shByteLength, 1)?.[0];\n\n          const texture = new TextureCube(resourceManager.engine, size);\n          texture.filterMode = TextureFilterMode.Trilinear;\n          const mipmapCount = texture.mipmapCount;\n          let offset = shByteLength + 2;\n\n          for (let mipLevel = 0; mipLevel < mipmapCount; mipLevel++) {\n            const mipSize = size >> mipLevel;\n\n            for (let face = 0; face < 6; face++) {\n              const dataSize = mipSize * mipSize * 4;\n              const data = new Uint8Array(arraybuffer, offset, dataSize);\n              offset += dataSize;\n              texture.setPixelBuffer(TextureCubeFace.PositiveX + face, data, mipLevel);\n            }\n          }\n\n          const ambientLight = new AmbientLight();\n          const sh = new SphericalHarmonics3();\n\n          ambientLight.diffuseMode = DiffuseMode.SphericalHarmonics;\n          sh.copyFromArray(shArray);\n          ambientLight.diffuseSphericalHarmonics = sh;\n          ambientLight.specularTexture = texture;\n          ambientLight.specularTextureDecodeRGBM = true;\n\n          resolve(ambientLight);\n        })\n        .catch((e) => {\n          reject(e);\n        });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  TextureCube,\n  TextureCubeFace\n} from \"@oasis-engine/core\";\nimport { Color, Vector3 } from \"@oasis-engine/math\";\n\nconst PI = Math.PI;\n\ninterface IHDRHeader {\n  /**\n   * The width of the texture in pixels.\n   */\n  width: number;\n  /**\n   * The height of the texture in pixels.\n   */\n  height: number;\n  /**\n   * The index of the beginning of the data in the binary file.\n   */\n  dataPosition: number;\n}\n\n@resourceLoader(AssetType.HDR, [\"hdr\"])\nclass HDRLoader extends Loader<TextureCube> {\n  private static _rightBottomBack = new Vector3(1.0, -1.0, -1.0);\n  private static _rightBottomFront = new Vector3(1.0, -1.0, 1.0);\n  private static _rightUpBack = new Vector3(1.0, 1.0, -1.0);\n  private static _rightUpFront = new Vector3(1.0, 1.0, 1.0);\n  private static _leftBottomBack = new Vector3(-1.0, -1.0, -1.0);\n  private static _leftBottomFront = new Vector3(-1.0, -1.0, 1.0);\n  private static _leftUpBack = new Vector3(-1.0, 1.0, -1.0);\n  private static _leftUpFront = new Vector3(-1.0, 1.0, 1.0);\n\n  private static _faceRight = [\n    HDRLoader._rightBottomBack,\n    HDRLoader._rightBottomFront,\n    HDRLoader._rightUpBack,\n    HDRLoader._rightUpFront\n  ];\n  private static _faceLeft = [\n    HDRLoader._leftBottomFront,\n    HDRLoader._leftBottomBack,\n    HDRLoader._leftUpFront,\n    HDRLoader._leftUpBack\n  ];\n  private static _faceUp = [\n    HDRLoader._leftBottomFront,\n    HDRLoader._rightBottomFront,\n    HDRLoader._leftBottomBack,\n    HDRLoader._rightBottomBack\n  ];\n  private static _faceBottom = [\n    HDRLoader._leftUpBack,\n    HDRLoader._rightUpBack,\n    HDRLoader._leftUpFront,\n    HDRLoader._rightUpFront\n  ];\n  private static _faceFront = [\n    HDRLoader._leftBottomBack,\n    HDRLoader._rightBottomBack,\n    HDRLoader._leftUpBack,\n    HDRLoader._rightUpBack\n  ];\n  private static _faceBack = [\n    HDRLoader._rightBottomFront,\n    HDRLoader._leftBottomFront,\n    HDRLoader._rightUpFront,\n    HDRLoader._leftUpFront\n  ];\n\n  private static _tempVector3 = new Vector3();\n  private static _temp2Vector3 = new Vector3();\n  private static _temp3Vector3 = new Vector3();\n  private static _temp4Vector3 = new Vector3();\n  private static _temp5Vector3 = new Vector3();\n\n  private static _convertToCubemap(\n    pixels: Uint8Array,\n    inputWidth: number,\n    inputHeight: number,\n    size: number\n  ): Uint8ClampedArray[] {\n    if (!pixels) {\n      throw \"ConvertPanoramaToCubemap: input cannot be null\";\n    }\n\n    if (pixels.length != inputWidth * inputHeight * 4) {\n      throw \"ConvertPanoramaToCubemap: input size is wrong\";\n    }\n\n    const textureRight = this._createCubemapData(size, this._faceRight, pixels, inputWidth, inputHeight);\n    const textureLeft = this._createCubemapData(size, this._faceLeft, pixels, inputWidth, inputHeight);\n    const textureUp = this._createCubemapData(size, this._faceUp, pixels, inputWidth, inputHeight);\n    const textureDown = this._createCubemapData(size, this._faceBottom, pixels, inputWidth, inputHeight);\n    const textureFront = this._createCubemapData(size, this._faceFront, pixels, inputWidth, inputHeight);\n    const textureBack = this._createCubemapData(size, this._faceBack, pixels, inputWidth, inputHeight);\n\n    return [textureRight, textureLeft, textureUp, textureDown, textureFront, textureBack];\n  }\n\n  private static _createCubemapData(\n    texSize: number,\n    faceData: Vector3[],\n    pixels: Uint8Array,\n    inputWidth: number,\n    inputHeight: number\n  ): Uint8ClampedArray {\n    const textureArray = new Uint8ClampedArray(texSize * texSize * 4);\n    const rotDX1 = this._tempVector3\n      .set(0, 0, 0)\n      .add(faceData[1])\n      .subtract(faceData[0])\n      .scale(1 / texSize);\n    const rotDX2 = this._temp2Vector3\n      .set(0, 0, 0)\n      .add(faceData[3])\n      .subtract(faceData[2])\n      .scale(1 / texSize);\n\n    const dy = 1 / texSize;\n    let fy = 0;\n\n    for (let y = 0; y < texSize; y++) {\n      let xv1 = this._temp3Vector3.set(0, 0, 0).add(faceData[0]);\n      let xv2 = this._temp4Vector3.set(0, 0, 0).add(faceData[2]);\n\n      for (let x = 0; x < texSize; x++) {\n        const v = this._temp5Vector3.set(0, 0, 0).add(xv2).subtract(xv1).scale(fy).add(xv1);\n        v.normalize();\n\n        const color = this._calcProjectionSpherical(v, pixels, inputWidth, inputHeight);\n        this._RGBEToLinear(color);\n        this._linearToRGBM(color, 5);\n\n        // 4 channels per pixels\n        const index = y * texSize * 4 + x * 4;\n        textureArray[index] = color.r;\n        textureArray[index + 1] = color.g;\n        textureArray[index + 2] = color.b;\n        textureArray[index + 3] = color.a;\n\n        xv1.add(rotDX1);\n        xv2.add(rotDX2);\n      }\n\n      fy += dy;\n    }\n\n    return textureArray;\n  }\n\n  private static _calcProjectionSpherical(\n    vDir: Vector3,\n    pixels: Uint8Array,\n    inputWidth: number,\n    inputHeight: number\n  ): Color {\n    let theta = Math.atan2(vDir.z, -vDir.x);\n    let phi = Math.acos(vDir.y);\n\n    while (theta < -PI) {\n      theta += 2 * PI;\n    }\n    while (theta > PI) {\n      theta -= 2 * PI;\n    }\n\n    let dx = theta / PI;\n    let dy = phi / PI;\n\n    // recenter.\n    dx = dx * 0.5 + 0.5;\n\n    let px = Math.round(dx * inputWidth);\n    if (px < 0) {\n      px = 0;\n    } else if (px >= inputWidth) {\n      px = inputWidth - 1;\n    }\n\n    let py = Math.round(dy * inputHeight);\n    if (py < 0) {\n      py = 0;\n    } else if (py >= inputHeight) {\n      py = inputHeight - 1;\n    }\n\n    const inputY = inputHeight - py - 1;\n    const index = inputY * inputWidth * 4 + px * 4;\n    const r = pixels[index];\n    const g = pixels[index + 1];\n    const b = pixels[index + 2];\n    const a = pixels[index + 3];\n\n    return new Color(r, g, b, a);\n  }\n\n  private static _readStringLine(uint8array: Uint8Array, startIndex: number): string {\n    let line = \"\";\n    let character = \"\";\n\n    for (let i = startIndex; i < uint8array.length - startIndex; i++) {\n      character = String.fromCharCode(uint8array[i]);\n\n      if (character == \"\\n\") {\n        break;\n      }\n\n      line += character;\n    }\n\n    return line;\n  }\n\n  private static _parseHeader(uint8array: Uint8Array): IHDRHeader {\n    let height: number = 0;\n    let width: number = 0;\n\n    let line = this._readStringLine(uint8array, 0);\n    if (line[0] != \"#\" || line[1] != \"?\") {\n      throw \"Bad HDR Format.\";\n    }\n\n    let endOfHeader = false;\n    let findFormat = false;\n    let lineIndex: number = 0;\n\n    do {\n      lineIndex += line.length + 1;\n      line = this._readStringLine(uint8array, lineIndex);\n\n      if (line == \"FORMAT=32-bit_rle_rgbe\") {\n        findFormat = true;\n      } else if (line.length == 0) {\n        endOfHeader = true;\n      }\n    } while (!endOfHeader);\n\n    if (!findFormat) {\n      throw \"HDR Bad header format, unsupported FORMAT\";\n    }\n\n    lineIndex += line.length + 1;\n    line = this._readStringLine(uint8array, lineIndex);\n\n    const sizeRegexp = /^\\-Y (.*) \\+X (.*)$/g;\n    const match = sizeRegexp.exec(line);\n\n    // TODO. Support +Y and -X if needed.\n    if (!match || match.length < 3) {\n      throw \"HDR Bad header format, no size\";\n    }\n    width = parseInt(match[2]);\n    height = parseInt(match[1]);\n\n    if (width < 8 || width > 0x7fff) {\n      throw \"HDR Bad header format, unsupported size\";\n    }\n\n    lineIndex += line.length + 1;\n\n    return {\n      height: height,\n      width: width,\n      dataPosition: lineIndex\n    };\n  }\n\n  private static _readPixels(buffer: Uint8Array, width: number, height: number): Uint8Array {\n    const scanLineWidth = width;\n    const byteLength = buffer.byteLength;\n\n    const dataRGBA = new Uint8Array(4 * width * height);\n\n    let offset = 0,\n      pos = 0;\n    const ptrEnd = 4 * scanLineWidth;\n    const rgbeStart = new Uint8Array(4);\n    const scanLineBuffer = new Uint8Array(ptrEnd);\n    let numScanLines = height; // read in each successive scanLine\n\n    while (numScanLines > 0 && pos < byteLength) {\n      rgbeStart[0] = buffer[pos++];\n      rgbeStart[1] = buffer[pos++];\n      rgbeStart[2] = buffer[pos++];\n      rgbeStart[3] = buffer[pos++];\n\n      if (2 != rgbeStart[0] || 2 != rgbeStart[1] || ((rgbeStart[2] << 8) | rgbeStart[3]) != scanLineWidth) {\n        throw \"HDR Bad header format, wrong scan line width\";\n      }\n\n      // read each of the four channels for the scanline into the buffer\n      // first red, then green, then blue, then exponent\n\n      let ptr = 0,\n        count;\n\n      while (ptr < ptrEnd && pos < byteLength) {\n        count = buffer[pos++];\n        const isEncodedRun = count > 128;\n        if (isEncodedRun) count -= 128;\n\n        if (0 === count || ptr + count > ptrEnd) {\n          throw \"HDR Bad Format, bad scanline data (run)\";\n        }\n\n        if (isEncodedRun) {\n          // a (encoded) run of the same value\n          const byteValue = buffer[pos++];\n\n          for (let i = 0; i < count; i++) {\n            scanLineBuffer[ptr++] = byteValue;\n          } //ptr += count;\n        } else {\n          // a literal-run\n          scanLineBuffer.set(buffer.subarray(pos, pos + count), ptr);\n          ptr += count;\n          pos += count;\n        }\n      } // now convert data from buffer into rgba\n      // first red, then green, then blue, then exponent (alpha)\n\n      const l = scanLineWidth; //scanLine_buffer.byteLength;\n\n      for (let i = 0; i < l; i++) {\n        let off = 0;\n        dataRGBA[offset] = scanLineBuffer[i + off];\n        off += scanLineWidth;\n\n        dataRGBA[offset + 1] = scanLineBuffer[i + off];\n        off += scanLineWidth;\n\n        dataRGBA[offset + 2] = scanLineBuffer[i + off];\n        off += scanLineWidth;\n\n        dataRGBA[offset + 3] = scanLineBuffer[i + off];\n        offset += 4;\n      }\n\n      numScanLines--;\n    }\n\n    return dataRGBA;\n  }\n\n  private static _RGBEToLinear(color: Color): void {\n    const scaleFactor = Math.pow(2, color.a - 128) / 255;\n    color.r *= scaleFactor;\n    color.g *= scaleFactor;\n    color.b *= scaleFactor;\n    color.a = 1;\n  }\n\n  private static _linearToRGBM(color: Color, maxRange: number): void {\n    const maxRGB = Math.max(color.r, Math.max(color.g, color.b));\n    let M = Math.min(maxRGB / maxRange, 1);\n    M = Math.ceil(M * 255);\n    const scaleFactor = 65025 / (M * maxRange); // 255 * (255 / (M * maxRange) )\n\n    color.r *= scaleFactor;\n    color.g *= scaleFactor;\n    color.b *= scaleFactor;\n    color.a *= M;\n  }\n\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<TextureCube> {\n    return new AssetPromise((resolve, reject) => {\n      const engine = resourceManager.engine;\n\n      this.request<ArrayBuffer>(item.url, { type: \"arraybuffer\" })\n        .then((buffer) => {\n          const uint8Array = new Uint8Array(buffer);\n          const { width, height, dataPosition } = HDRLoader._parseHeader(uint8Array);\n          const pixels = HDRLoader._readPixels(uint8Array.subarray(dataPosition), width, height);\n          const cubeSize = height >> 1;\n\n          const cubeMapData = HDRLoader._convertToCubemap(pixels, width, height, cubeSize);\n          const texture = new TextureCube(engine, cubeSize);\n\n          for (let faceIndex = 0; faceIndex < 6; faceIndex++) {\n            texture.setPixelBuffer(TextureCubeFace.PositiveX + faceIndex, cubeMapData[faceIndex], 0);\n          }\n          texture.generateMipmaps();\n          resolve(texture);\n        })\n        .catch(reject);\n    });\n  }\n}\n","import { EngineObject } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { ExtensionSchema } from \"./Schema\";\n\nexport abstract class ExtensionParser {\n  initialize(): void {}\n\n  parseEngineResource(\n    schema: ExtensionSchema,\n    parseResource: EngineObject,\n    context: GLTFResource,\n    ...extra\n  ): void | Promise<void> {}\n\n  createEngineResource(schema: ExtensionSchema, context: GLTFResource, ...extra): EngineObject | Promise<EngineObject> {\n    return null;\n  }\n}\n","import { DRACODecoder } from \"@oasis-engine/draco\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { GLTFUtil } from \"../GLTFUtil\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { IMeshPrimitive } from \"../Schema\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRDracoMeshCompression } from \"./Schema\";\n\n@registerExtension(\"KHR_draco_mesh_compression\")\nclass KHR_draco_mesh_compression extends ExtensionParser {\n  private static _decoder: DRACODecoder;\n\n  initialize(): void {\n    if (!KHR_draco_mesh_compression._decoder) {\n      KHR_draco_mesh_compression._decoder = new DRACODecoder();\n    }\n  }\n\n  createEngineResource(schema: IKHRDracoMeshCompression, context: GLTFResource, gltfPrimitive: IMeshPrimitive) {\n    const { gltf, buffers } = context;\n    const { bufferViews, accessors } = gltf;\n    const { bufferView: bufferViewIndex, attributes: gltfAttributeMap } = schema;\n\n    const attributeMap = {};\n    const attributeTypeMap = {};\n    for (let attributeName in gltfAttributeMap) {\n      attributeMap[attributeName] = gltfAttributeMap[attributeName];\n    }\n    for (let attributeName in gltfPrimitive.attributes) {\n      if (gltfAttributeMap[attributeName] !== undefined) {\n        const accessorDef = accessors[gltfPrimitive.attributes[attributeName]];\n        attributeTypeMap[attributeName] = GLTFUtil.getComponentType(accessorDef.componentType).name;\n      }\n    }\n    const indexAccessor = accessors[gltfPrimitive.indices];\n    const indexType = GLTFUtil.getComponentType(indexAccessor.componentType).name;\n    const taskConfig = {\n      attributeIDs: attributeMap,\n      attributeTypes: attributeTypeMap,\n      useUniqueIDs: true,\n      indexType\n    };\n    const buffer = GLTFUtil.getBufferViewData(bufferViews[bufferViewIndex], buffers);\n    return KHR_draco_mesh_compression._decoder.decode(buffer, taskConfig).then((parsedGeometry) => parsedGeometry);\n  }\n}\n","import { DirectLight, Entity, PointLight, SpotLight } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRLightsPunctual_Light } from \"./Schema\";\n\n@registerExtension(\"KHR_lights_punctual\")\nclass KHR_lights_punctual extends ExtensionParser {\n  parseEngineResource(schema: IKHRLightsPunctual_Light, entity: Entity, context: GLTFResource): void {\n    const { color, intensity = 1, type, range, spot } = schema;\n    let light: DirectLight | PointLight | SpotLight;\n\n    if (type === \"directional\") {\n      light = entity.addComponent(DirectLight);\n    } else if (type === \"point\") {\n      light = entity.addComponent(PointLight);\n    } else if (type === \"spot\") {\n      light = entity.addComponent(SpotLight);\n    }\n\n    if (color) {\n      light.color.set(color[0], color[1], color[2], 1);\n    }\n\n    light.intensity = intensity;\n\n    if (range && !(light instanceof DirectLight)) {\n      light.distance = range;\n    }\n\n    if (spot && light instanceof SpotLight) {\n      const { innerConeAngle = 0, outerConeAngle = Math.PI / 4 } = spot;\n\n      light.angle = innerConeAngle;\n      light.penumbra = outerConeAngle - innerConeAngle;\n    }\n\n    if (!context.lights) context.lights = [];\n    context.lights.push(light);\n  }\n}\n","import { PBRMaterial } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { MaterialParser } from \"../parser/MaterialParser\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRMaterialsClearcoat } from \"./Schema\";\n\n@registerExtension(\"KHR_materials_clearcoat\")\nclass KHR_materials_clearcoat extends ExtensionParser {\n  parseEngineResource(schema: IKHRMaterialsClearcoat, material: PBRMaterial, context: GLTFResource): void {\n    const { textures } = context;\n    const {\n      clearcoatFactor = 0,\n      clearcoatTexture,\n      clearcoatRoughnessFactor = 0,\n      clearcoatRoughnessTexture,\n      clearcoatNormalTexture\n    } = schema;\n\n    material.clearCoat = clearcoatFactor;\n    material.clearCoatRoughness = clearcoatRoughnessFactor;\n\n    if (clearcoatTexture) {\n      material.clearCoatTexture = textures[clearcoatTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatTexture.extensions, context);\n    }\n    if (clearcoatRoughnessTexture) {\n      material.clearCoatRoughnessTexture = textures[clearcoatRoughnessTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatRoughnessTexture.extensions, context);\n    }\n    if (clearcoatNormalTexture) {\n      material.clearCoatNormalTexture = textures[clearcoatNormalTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatNormalTexture.extensions, context);\n    }\n  }\n}\n","import { PBRSpecularMaterial } from \"@oasis-engine/core\";\nimport { Color } from \"@oasis-engine/math\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { MaterialParser } from \"../parser/MaterialParser\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRMaterialsPbrSpecularGlossiness } from \"./Schema\";\n\n@registerExtension(\"KHR_materials_pbrSpecularGlossiness\")\nclass KHR_materials_pbrSpecularGlossiness extends ExtensionParser {\n  createEngineResource(schema: IKHRMaterialsPbrSpecularGlossiness, context: GLTFResource): PBRSpecularMaterial {\n    const { engine, textures } = context;\n    const material = new PBRSpecularMaterial(engine);\n    const { diffuseFactor, diffuseTexture, specularFactor, glossinessFactor, specularGlossinessTexture } = schema;\n\n    if (diffuseFactor) {\n      material.baseColor = new Color(\n        Color.linearToGammaSpace(diffuseFactor[0]),\n        Color.linearToGammaSpace(diffuseFactor[1]),\n        Color.linearToGammaSpace(diffuseFactor[2]),\n        diffuseFactor[3]\n      );\n    }\n\n    if (diffuseTexture) {\n      material.baseTexture = textures[diffuseTexture.index];\n      MaterialParser._parseTextureTransform(material, diffuseTexture.extensions, context);\n    }\n\n    if (specularFactor) {\n      material.specularColor = new Color(\n        Color.linearToGammaSpace(specularFactor[0]),\n        Color.linearToGammaSpace(specularFactor[1]),\n        Color.linearToGammaSpace(specularFactor[2])\n      );\n    }\n\n    if (glossinessFactor !== undefined) {\n      material.glossiness = glossinessFactor;\n    }\n\n    if (specularGlossinessTexture) {\n      material.specularGlossinessTexture = textures[specularGlossinessTexture.index];\n      MaterialParser._parseTextureTransform(material, specularGlossinessTexture.extensions, context);\n    }\n\n    return material;\n  }\n}\n","import { UnlitMaterial } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRMaterialsUnlit } from \"./Schema\";\n\n@registerExtension(\"KHR_materials_unlit\")\nclass KHR_materials_unlit extends ExtensionParser {\n  createEngineResource(schema: IKHRMaterialsUnlit, context: GLTFResource): UnlitMaterial {\n    const { engine } = context;\n    const material = new UnlitMaterial(engine);\n\n    return material;\n  }\n}\n","import { Renderer } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRMaterialVariants_Mapping } from \"./Schema\";\n\n@registerExtension(\"KHR_materials_variants\")\nclass KHR_materials_variants extends ExtensionParser {\n  parseEngineResource(schema: IKHRMaterialVariants_Mapping, renderer: Renderer, context: GLTFResource): void {\n    const {\n      gltf: {\n        extensions: {\n          KHR_materials_variants: { variants: variantNames }\n        }\n      },\n      materials\n    } = context;\n    const { mappings } = schema;\n\n    for (let i = 0; i < mappings.length; i++) {\n      const { material, variants } = mappings[i];\n      if (!context.variants) context.variants = [];\n      context.variants.push({\n        renderer,\n        material: materials[material],\n        variants: variants.map((index) => variantNames[index].name)\n      });\n    }\n  }\n}\n","import { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\n\n@registerExtension(\"KHR_mesh_quantization\")\nclass KHR_mesh_quantization extends ExtensionParser {}\n","import { Logger, PBRBaseMaterial, UnlitMaterial } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IKHRTextureTransform } from \"./Schema\";\n\n@registerExtension(\"KHR_texture_transform\")\nclass KHR_texture_transform extends ExtensionParser {\n  parseEngineResource(\n    schema: IKHRTextureTransform,\n    material: PBRBaseMaterial | UnlitMaterial,\n    context: GLTFResource\n  ): void {\n    const { offset, rotation, scale, texCoord } = schema;\n\n    if (offset) {\n      material.tilingOffset.z = offset[0];\n      material.tilingOffset.w = offset[1];\n    }\n\n    if (scale) {\n      material.tilingOffset.x = scale[0];\n      material.tilingOffset.y = scale[1];\n    }\n\n    if (rotation) {\n      Logger.warn(\"rotation in KHR_texture_transform is not supported now\");\n    }\n\n    if (texCoord) {\n      Logger.warn(\"texCoord in KHR_texture_transform is not supported now\");\n    }\n  }\n}\n","import { Material } from \"@oasis-engine/core\";\nimport { GLTFResource } from \"../GLTFResource\";\nimport { registerExtension } from \"../parser/Parser\";\nimport { ExtensionParser } from \"./ExtensionParser\";\nimport { IOasisMaterialRemap } from \"./Schema\";\n\n@registerExtension(\"OASIS_materials_remap\")\nclass OasisMaterialsRemap extends ExtensionParser {\n  createEngineResource(schema: IOasisMaterialRemap, context: GLTFResource): Promise<Material> {\n    const { engine } = context;\n    return engine.resourceManager.getResourceByRef<Material>(schema);\n  }\n}\n","import {\n  AssetPromise,\n  AssetType,\n  BlinnPhongMaterial,\n  Loader,\n  LoadItem,\n  PBRMaterial,\n  PBRSpecularMaterial,\n  resourceLoader,\n  ResourceManager,\n  ShaderData,\n  Texture2D,\n  UnlitMaterial\n} from \"@oasis-engine/core\";\nimport { Color, Vector2, Vector3, Vector4 } from \"@oasis-engine/math\";\n\n@resourceLoader(AssetType.Material, [\"json\"])\nclass MaterialLoader extends Loader<string> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<string> {\n    return new AssetPromise((resolve, reject) => {\n      this.request(item.url, {\n        ...item,\n        type: \"json\"\n      }).then((json: { [key: string]: any }) => {\n        const engine = resourceManager.engine;\n        const { shader, shaderData, macros, renderState } = json;\n\n        let material;\n        switch (shader) {\n          case \"pbr\":\n            material = new PBRMaterial(engine);\n            break;\n          case \"pbr-specular\":\n            material = new PBRSpecularMaterial(engine);\n            break;\n          case \"unlit\":\n            material = new UnlitMaterial(engine);\n            break;\n          case \"blinn-phong\":\n            material = new BlinnPhongMaterial(engine);\n            break;\n        }\n\n        const texturePromises = new Array<Promise<Texture2D | void>>();\n        const materialShaderData = material.shaderData;\n        for (let key in shaderData) {\n          const { type, value } = shaderData[key];``\n\n          switch (type) {\n            case \"Vector2\":\n              materialShaderData.setVector2(key, new Vector2(value.x, value.y));\n              break;\n            case \"Vector3\":\n              materialShaderData.setVector3(key, new Vector3(value.x, value.y, value.z));\n              break;\n            case \"Vector4\":\n              materialShaderData.setVector4(key, new Vector4(value.x, value.y, value.z, value.w));\n              break;\n            case \"Color\":\n              materialShaderData.setColor(key, new Color(value.r, value.g, value.b, value.a));\n              break;\n            case \"Float\":\n              materialShaderData.setFloat(key, value);\n              break;\n            case \"Texture\":\n              texturePromises.push(\n                resourceManager.getResourceByRef<Texture2D>(value).then((texture) => {\n                  materialShaderData.setTexture(key, texture);\n                })\n              );\n              break;\n          }\n        }\n\n        for (let i = 0, length = macros.length; i < length; i++) {\n          const { name, value } = macros[i];\n          if (value == undefined) {\n            materialShaderData.enableMacro(name);\n          } else {\n            materialShaderData.enableMacro(name, value);\n          }\n        }\n\n        for (let key in renderState) {\n          material[key] = renderState[key];\n        }\n\n        Promise.all(texturePromises).then(() => {\n          resolve(material);  \n        });\n      });\n    });\n  }\n}\n","import { GLTFUtil } from \"../../gltf/GLTFUtil\";\nimport { ab2str } from \"./Utils\";\n\nclass ImageData {\n  type: \"image/png\" | \"image/jpg\" | \"image/webp\" | \"ktx\";\n  buffer: ArrayBuffer;\n}\n\nexport class BufferReader {\n  private _dataView: DataView;\n  private _littleEndian: boolean;\n  private _offset: number;\n\n  public static imageMapping = {\n    0: \"image/png\",\n    1: \"image/jpg\",\n    2: \"image/webp\",\n    3: \"ktx\"\n  };\n\n  constructor(public buffer: ArrayBuffer, byteOffset: number = 0, byteLength?: number, littleEndian: boolean = true) {\n    // byteLength = byteLength ?? _buffer.byteLength;\n    this._dataView = new DataView(buffer);\n    this._littleEndian = littleEndian;\n    this._offset = byteOffset;\n  }\n\n  get offset() {\n    return this._offset;\n  }\n\n  nextUint8() {\n    const value = this._dataView.getUint8(this._offset);\n    this._offset += 1;\n    return value;\n  }\n\n  nextUint16() {\n    const value = this._dataView.getUint16(this._offset, this._littleEndian);\n    this._offset += 2;\n    return value;\n  }\n\n  nextUint32() {\n    const value = this._dataView.getUint32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  }\n\n  nextInt32() {\n    const value = this._dataView.getInt32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  }\n\n  nextInt32Array(len: number) {\n    const value = new Int32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  }\n\n  nextFloat32() {\n    const value = this._dataView.getFloat32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  }\n\n  nextFloat32Array(len: number) {\n    const value = new Float32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  }\n\n  nextUint32Array(len: number) {\n    const value = new Uint32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  }\n\n  nextUint8Array(len: number) {\n    const value = new Uint8Array(this.buffer, this._offset, len);\n    this._offset += len;\n    return value;\n  }\n\n  nextUint64() {\n    const left = this._dataView.getUint32(this._offset, this._littleEndian);\n    const right = this._dataView.getUint32(this._offset + 4, this._littleEndian);\n    const value = left + 2 ** 32 * right;\n    this._offset += 8;\n    return value;\n  }\n\n  nextStr(): string {\n    const strByteLength = this.nextUint16();\n    const uint8Array = new Uint8Array(this.buffer, this._offset, strByteLength);\n    this._offset += strByteLength;\n    return GLTFUtil.decodeText(uint8Array);\n  }\n\n  /**\n   * image data 放在最后\n   */\n  nextImageData(count: number = 0): ArrayBuffer {\n    return this.buffer.slice(this._offset);\n  }\n\n  nextImagesData(count: number): ArrayBuffer[] {\n    const imagesLen = new Array(count);\n    // Start offset of Uint32Array should be a multiple of 4. ref: https://stackoverflow.com/questions/15417310/why-typed-array-constructors-require-offset-to-be-multiple-of-underlying-type-si\n    for (let i = 0; i < count; i++) {\n      const len = this._dataView.getUint32(this._offset, this._littleEndian);\n      imagesLen[i] = len;\n      this._offset += 4;\n    }\n    const imagesData: ArrayBuffer[] = [];\n\n    for (let i = 0; i < count; i++) {\n      const len = imagesLen[i];\n      const buffer = this.buffer.slice(this._offset, this._offset + len);\n      this._offset += len;\n      imagesData.push(buffer);\n    }\n    return imagesData;\n  }\n\n  skip(bytes: number) {\n    this._offset += bytes;\n    return this;\n  }\n\n  scan(maxByteLength: number, term: number = 0x00): Uint8Array {\n    const byteOffset = this._offset;\n    let byteLength = 0;\n    while (this._dataView.getUint8(this._offset) !== term && byteLength < maxByteLength) {\n      byteLength++;\n      this._offset++;\n    }\n\n    if (byteLength < maxByteLength) this._offset++;\n\n    return new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + byteOffset, byteLength);\n  }\n}\n","import { Engine } from \"@oasis-engine/core\";\nimport type { BufferReader } from \"./BufferReader\";\n\nexport const decoderMap: Record<\n  string,\n  {\n    decode: (engine: Engine, bufferReader: BufferReader) => Promise<any>;\n  }\n> = {};\n\n/**\n * Decoder decorator generator.\n * @param type - resource file type.\n * @returns Decoder decorator\n */\nexport function decoder(type: string): ClassDecorator {\n  return (target: any) => {\n    decoderMap[type] = target;\n  };\n}","import { GLTFUtil } from \"../../gltf/GLTFUtil\";\n\nexport class FileHeader {\n  totalLength: number = 0;\n  version: number = 0;\n  type: string = \"\";\n  name: string = \"\";\n  headerLength: number = 0;\n\n  static decode(arrayBuffer: ArrayBuffer): FileHeader {\n    const dataView = new DataView(arrayBuffer);\n    const totalLen = dataView.getUint32(0, true);\n    const fileVersion = dataView.getUint8(4);\n    const typeLen = dataView.getUint16(5, true);\n    const typeUint8Array = new Uint8Array(arrayBuffer, 7, typeLen);\n    const nameLen = dataView.getUint16(7 + typeLen, true);\n    const nameUint8Array = new Uint8Array(arrayBuffer, 9 + typeLen, nameLen);\n\n    const name = GLTFUtil.decodeText(nameUint8Array);\n    const type = GLTFUtil.decodeText(typeUint8Array);\n    const header = new FileHeader();\n    header.totalLength = totalLen;\n    header.name = name;\n    header.type = type;\n    header.version = fileVersion;\n    header.headerLength = nameUint8Array.byteLength + typeUint8Array.byteLength + 9;\n    return header;\n  }\n\n  public get dataLength() {\n    return this.totalLength - this.headerLength;\n  }\n}\n","import {\n  ModelMesh,\n  BlendShape} from \"@oasis-engine/core\";\nimport { decoder } from \"../../utils/Decorator\";\nimport type { Engine } from \"@oasis-engine/core\";\nimport type { BufferReader } from \"../../utils/BufferReader\";\nimport { IEncodedModelMesh } from \"./IModelMesh\";\nimport { Color, Vector2, Vector3, Vector4 } from \"@oasis-engine/math\";\n\n@decoder(\"Mesh\")\nexport class MeshDecoder {\n  public static decode(engine: Engine, bufferReader: BufferReader): Promise<ModelMesh> {\n    return new Promise((resolve) => {\n      const modelMesh = new ModelMesh(engine);\n      const jsonDataString = bufferReader.nextStr();\n      const encodedMeshData: IEncodedModelMesh = JSON.parse(jsonDataString);\n\n      const offset = Math.ceil(bufferReader.offset / 4) * 4;\n\n      const float32Array = new Float32Array(\n        bufferReader.buffer,\n        encodedMeshData.positions.start + offset,\n        (encodedMeshData.positions.end - encodedMeshData.positions.start) / 4\n      );\n      const vertexCount = float32Array.length / 3;\n      const positions = float32ArrayToVector3(float32Array, vertexCount);\n      modelMesh.setPositions(positions);\n      if (encodedMeshData.normals) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.normals.start + offset,\n          (encodedMeshData.normals.end - encodedMeshData.normals.start) / 4\n        );\n        const normals = float32ArrayToVector3(float32Array, vertexCount);\n        modelMesh.setNormals(normals);\n      }\n      if (encodedMeshData.uvs) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uvs.start + offset,\n          (encodedMeshData.uvs.end - encodedMeshData.uvs.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount));\n      }\n      if (encodedMeshData.uv1) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv1.start + offset,\n          (encodedMeshData.uv1.end - encodedMeshData.uv1.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 1);\n      }\n      if (encodedMeshData.uv2) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv2.start + offset,\n          (encodedMeshData.uv2.end - encodedMeshData.uv2.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 2);\n      }\n      if (encodedMeshData.uv3) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv3.start + offset,\n          (encodedMeshData.uv3.end - encodedMeshData.uv3.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 3);\n      }\n      if (encodedMeshData.uv4) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv4.start + offset,\n          (encodedMeshData.uv4.end - encodedMeshData.uv4.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 4);\n      }\n      if (encodedMeshData.uv5) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv5.start + offset,\n          (encodedMeshData.uv5.end - encodedMeshData.uv5.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 5);\n      }\n      if (encodedMeshData.uv6) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv6.start + offset,\n          (encodedMeshData.uv6.end - encodedMeshData.uv6.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 6);\n      }\n      if (encodedMeshData.uv7) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.uv7.start + offset,\n          (encodedMeshData.uv7.end - encodedMeshData.uv7.start) / 4\n        );\n        modelMesh.setUVs(float32ArrayToVector2(float32Array, vertexCount), 7);\n      }\n      if (encodedMeshData.colors) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.colors.start + offset,\n          (encodedMeshData.colors.end - encodedMeshData.colors.start) / 4\n        );\n        modelMesh.setColors(float32ArrayToVColor(float32Array, vertexCount));\n      }\n      if (encodedMeshData.boneWeights) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.boneWeights.start + offset,\n          (encodedMeshData.boneWeights.end - encodedMeshData.boneWeights.start) / 4\n        );\n        modelMesh.setBoneWeights(float32ArrayToVector4(float32Array, vertexCount));\n      }\n      if (encodedMeshData.boneIndices) {\n        const float32Array = new Float32Array(\n          bufferReader.buffer,\n          encodedMeshData.boneIndices.start + offset,\n          (encodedMeshData.boneIndices.end - encodedMeshData.boneIndices.start) / 4\n        );\n        modelMesh.setBoneIndices(float32ArrayToVector4(float32Array, vertexCount));\n      }\n      if (encodedMeshData.blendShapes) {\n        encodedMeshData.blendShapes.forEach((blendShapeData) => {\n          const blendShape = new BlendShape(blendShapeData.name);\n          blendShapeData.frames.forEach((frameData) => {\n            const positionArray = new Float32Array(\n              bufferReader.buffer,\n              frameData.deltaPosition.start + offset,\n              (frameData.deltaPosition.end - frameData.deltaPosition.start) / 4\n            );\n            const count = positionArray.length / 3;\n            const deltaPosition = float32ArrayToVector3(positionArray, count);\n            let deltaNormals: Vector3[] | null = null;\n            if (frameData.deltaNormals) {\n              const normalsArray = new Float32Array(\n                bufferReader.buffer,\n                frameData.deltaNormals.start + offset,\n                (frameData.deltaNormals.end - frameData.deltaNormals.start) / 4\n              );\n              deltaNormals = float32ArrayToVector3(normalsArray, count);\n            }\n            let deltaTangents: Vector4[] | null = null;\n            if (frameData.deltaTangents) {\n              const tangentsArray = new Float32Array(\n                bufferReader.buffer,\n                frameData.deltaTangents.start + offset,\n                (frameData.deltaTangents.end - frameData.deltaTangents.start) / 4\n              );\n              deltaTangents = float32ArrayToVector4(tangentsArray, count);\n            }\n            blendShape.addFrame(frameData.weight, deltaPosition);\n          });\n          modelMesh.addBlendShape(blendShape);\n        });\n      }\n      if (encodedMeshData.indices) {\n        let indices: Uint16Array | Uint32Array = null;\n        if (encodedMeshData.indices.type === 0) {\n          indices = new Uint16Array(\n            bufferReader.buffer,\n            encodedMeshData.indices.start + offset,\n            (encodedMeshData.indices.end - encodedMeshData.indices.start) / 2\n          );\n        } else {\n          indices = new Uint32Array(\n            bufferReader.buffer,\n            encodedMeshData.indices.start + offset,\n            (encodedMeshData.indices.end - encodedMeshData.indices.start) / 4\n          );\n        }\n        modelMesh.setIndices(indices);\n      }\n      encodedMeshData.subMeshes.forEach((subMesh) => {\n        modelMesh.addSubMesh(subMesh);\n      });\n      modelMesh.uploadData(false);\n      resolve(modelMesh);\n    });\n  }\n}\n\nfunction float32ArrayToVColor(float32Array: Float32Array, vertexCount: number) {\n  const array = new Array(vertexCount);\n  for (let i = 0; i < vertexCount; i++) {\n    array[i] = new Color(\n      float32Array[i * 4],\n      float32Array[i * 4 + 1],\n      float32Array[i * 4 + 2],\n      float32Array[i * 4 + 3]\n    );\n  }\n  return array;\n}\n\nfunction float32ArrayToVector4(float32Array: Float32Array, vertexCount: number) {\n  const array = new Array(vertexCount);\n  for (let i = 0; i < vertexCount; i++) {\n    array[i] = new Vector4(\n      float32Array[i * 4],\n      float32Array[i * 4 + 1],\n      float32Array[i * 4 + 2],\n      float32Array[i * 4 + 3]\n    );\n  }\n  return array;\n}\n\nfunction float32ArrayToVector3(float32Array: Float32Array, vertexCount: number) {\n  const array = new Array(vertexCount);\n  for (let i = 0; i < vertexCount; i++) {\n    array[i] = new Vector3(float32Array[i * 3], float32Array[i * 3 + 1], float32Array[i * 3 + 2]);\n  }\n  return array;\n}\n\nfunction float32ArrayToVector2(float32Array: Float32Array, vertexCount: number) {\n  const array = new Array(vertexCount);\n  for (let i = 0; i < vertexCount; i++) {\n    array[i] = new Vector2(float32Array[i * 2], float32Array[i * 2 + 1]);\n  }\n  return array;\n}\n","import { Engine, Texture2D } from \"@oasis-engine/core\";\nimport { BufferReader } from \"../../utils/BufferReader\";\nimport { decoder } from \"../../utils/Decorator\";\n\n@decoder(\"Texture2D\")\nexport class Texture2DDecoder {\n  static decode(engine: Engine, bufferReader: BufferReader): Promise<Texture2D> {\n    return new Promise((resolve, reject) => {\n      const objectId = bufferReader.nextStr();\n      const mipmap = !!bufferReader.nextUint8();\n      const filterMode = bufferReader.nextUint8();\n      const anisoLevel = bufferReader.nextUint8();\n      const wrapModeU = bufferReader.nextUint8();\n      const wrapModeV = bufferReader.nextUint8();\n      const format = bufferReader.nextUint8();\n      const width = bufferReader.nextUint16();\n      const height = bufferReader.nextUint16();\n      const isPixelBuffer = bufferReader.nextUint8();\n\n      const mipCount = bufferReader.nextUint8();\n      const imagesData = bufferReader.nextImagesData(mipCount);\n\n      const texture2D = new Texture2D(engine, width, height, format, mipmap);\n      texture2D.filterMode = filterMode;\n      texture2D.anisoLevel = anisoLevel;\n      texture2D.wrapModeU = wrapModeU;\n      texture2D.wrapModeV = wrapModeV;\n\n      if (isPixelBuffer) {\n        const pixelBuffer = new Uint8Array(imagesData[0]);\n        texture2D.setPixelBuffer(pixelBuffer);\n        if (mipmap) {\n          texture2D.generateMipmaps();\n          for (let i = 1; i < mipCount; i++) {\n            const pixelBuffer = new Uint8Array(imagesData[i]);\n            texture2D.setPixelBuffer(pixelBuffer, i);\n          }\n        }\n        // @ts-ignore\n        engine.resourceManager._objectPool[objectId] = texture2D;\n        resolve(texture2D);\n      } else {\n        const blob = new window.Blob([imagesData[0]]);\n        const img = new Image();\n        img.onload = () => {\n          texture2D.setImageSource(img);\n          let completedCount = 0;\n          const onComplete = () => {\n            completedCount++;\n            if (completedCount >= mipCount) {\n              resolve(texture2D);\n            }\n          };\n          onComplete();\n          if (mipmap) {\n            texture2D.generateMipmaps();\n            for (let i = 1; i < mipCount; i++) {\n              const blob = new window.Blob([imagesData[i]]);\n              const img = new Image();\n              img.onload = () => {\n                texture2D.setImageSource(img, i);\n                onComplete();\n              };\n              img.src = URL.createObjectURL(blob);\n            }\n          }\n        };\n        img.src = URL.createObjectURL(blob);\n      }\n    });\n  }\n}\n","import { Engine, Entity, Loader } from \"@oasis-engine/core\";\nimport { IBasicType, IClassObject, IEntity, IReferenceType } from \"./PrefabDesign\";\n\nexport class ReflectionParser {\n  static parseEntity(entityConfig: IEntity, engine: Engine): Promise<Entity> {\n    return ReflectionParser.getEntityByConfig(entityConfig, engine).then((entity) => {\n      entity.isActive = entityConfig.isActive ?? true;\n      const { position, rotation, scale } = entityConfig;\n      if (position) {\n        entity.transform.setPosition(position.x, position.y, position.z);\n      }\n      if (rotation) {\n        entity.transform.setRotation(rotation.x, rotation.y, rotation.z);\n      }\n      if (scale) {\n        entity.transform.setScale(scale.x, scale.y, scale.z);\n      }\n      const promises = [];\n      for (let i = 0; i < entityConfig.components.length; i++) {\n        const componentConfig = entityConfig.components[i];\n        const key = !componentConfig.refId ? componentConfig.class : componentConfig.refId;\n        let component;\n        if (key === \"Animator\") {\n          component = entity.getComponent(Loader.getClass(key));\n        }\n        component = component || entity.addComponent(Loader.getClass(key));\n        const promise = this.parsePropsAndMethods(component, componentConfig, engine);\n        promises.push(promise);\n      }\n      return Promise.all(promises).then(() => {\n        return entity;\n      });\n    });\n  }\n\n  private static getEntityByConfig(entityConfig: IEntity, engine: Engine): Promise<Entity> {\n    // @ts-ignore\n    const assetRefId: string = entityConfig.assetRefId;\n    if (assetRefId) {\n      // @ts-ignore\n      return engine.resourceManager.getResourceByRef<Entity>({ refId: assetRefId, key: entityConfig.key });\n    } else {\n      const entity = new Entity(engine, entityConfig.name);\n      return Promise.resolve(entity);\n    }\n  }\n\n  static parseClassObject(\n    item: IClassObject,\n    engine: Engine,\n    resourceManager: any = engine.resourceManager\n  ): Promise<any> {\n    const Class = Loader.getClass(item.class);\n    const params = item.constructParams ?? [];\n    const instance = new Class(...params);\n    return this.parsePropsAndMethods(instance, item, engine, resourceManager);\n  }\n\n  static parseBasicType(\n    value: IBasicType,\n    engine: Engine,\n    resourceManager: any = engine.resourceManager\n  ): Promise<any> {\n    if (Array.isArray(value)) {\n      return Promise.all(value.map((item) => this.parseBasicType(item, engine, resourceManager)));\n    } else if (typeof value === \"object\" && value != null) {\n      if (this._isClass(value)) {\n        // 类对象\n        return this.parseClassObject(value, engine, resourceManager);\n      } else if (this._isRef(value)) {\n        // 引用对象\n        return resourceManager.getResourceByRef(value);\n      } else {\n        // 基础类型\n        return Promise.resolve(value);\n      }\n    } else {\n      return Promise.resolve(value);\n    }\n  }\n\n  static parsePropsAndMethods(\n    instance: any,\n    item: Omit<IClassObject, \"class\">,\n    engine: Engine,\n    resourceManager: any = engine.resourceManager\n  ) {\n    const promises = [];\n    if (item.methods) {\n      for (let methodName in item.methods) {\n        const methodParams = item.methods[methodName];\n        for (let i = 0, count = methodParams.length; i < count; i++) {\n          const params = methodParams[i];\n          const promise = this.parseMethod(instance, methodName, params, engine, resourceManager);\n          promises.push(promise);\n        }\n      }\n    }\n\n    if (item.props) {\n      for (let key in item.props) {\n        const value = item.props[key];\n        const promise = this.parseBasicType(value, engine).then((v) => {\n          return (instance[key] = v);\n        });\n        promises.push(promise);\n      }\n    }\n\n    return Promise.all(promises).then(() => {\n      return instance;\n    });\n  }\n\n  static parseMethod(\n    instance: any,\n    methodName: string,\n    methodParams: Array<IBasicType>,\n    engine: Engine,\n    resourceManager: any = engine.resourceManager\n  ) {\n    return Promise.all(methodParams.map((param) => this.parseBasicType(param, engine, resourceManager))).then(\n      (result) => {\n        return instance[methodName](...result);\n      }\n    );\n  }\n\n  private static _isClass(value: any): value is IClassObject {\n    return value[\"class\"] != undefined;\n  }\n\n  private static _isRef(value: any): value is IReferenceType {\n    return value[\"refId\"] != undefined;\n  }\n}\n","import { Engine, Entity } from \"@oasis-engine/core\";\nimport type { IEntity, IPrefabFile } from \"./PrefabDesign\";\nimport { ReflectionParser } from \"./ReflectionParser\";\n\nexport class PrefabParser {\n  constructor(private _engine: Engine) {}\n\n  parse(data: IPrefabFile): Promise<Entity> {\n    const entitiesMap: Record<string, Entity> = {};\n    const entitiesConfigMap: Record<string, IEntity> = {};\n    const promises: Promise<Entity>[] = [];\n    const entitiesConfig = data.entities;\n    for (const entity of entitiesConfig) {\n      entitiesConfigMap[entity.id] = entity;\n      promises.push(ReflectionParser.parseEntity(entity, this._engine));\n    }\n\n    return Promise.all(promises).then((entities) => {\n      const rootId = entitiesConfig[0].id;\n      entities.forEach((entity, index) => {\n        entitiesMap[entitiesConfig[index].id] = entity;\n      });\n      PrefabParser.parseChildren(entitiesConfigMap, entitiesMap, rootId);\n      return entitiesMap[rootId];\n    });\n  }\n\n  static parseChildren(\n    entitiesConfig: { [key: string]: IEntity },\n    entities: { [key: string]: Entity },\n    parentId: string\n  ) {\n    const children = entitiesConfig[parentId].children;\n    if (children && children.length > 0) {\n      const parent = entities[parentId];\n      for (let i = 0; i < children.length; i++) {\n        const childId = children[i];\n        const entity = entities[childId];\n        parent.addChild(entity);\n        this.parseChildren(entitiesConfig, entities, childId);\n      }\n    }\n  }\n}\n","import { Engine, Entity, Scene } from \"@oasis-engine/core\";\nimport { IEntity, IScene } from \"../prefab/PrefabDesign\";\nimport { PrefabParser } from \"../prefab/PrefabParser\";\nimport { ReflectionParser } from \"../prefab/ReflectionParser\";\n\nexport class SceneParser {\n  static parse(engine: Engine, sceneData: IScene): Promise<Scene> {\n    const scene = new Scene(engine);\n    const entitiesMap: Record<string, Entity> = {};\n    const entitiesConfigMap: Record<string, IEntity> = {};\n    const promises: Promise<Entity>[] = [];\n    const entitiesConfig = sceneData.entities;\n    for (const entity of entitiesConfig) {\n      entitiesConfigMap[entity.id] = entity;\n      promises.push(ReflectionParser.parseEntity(entity, engine));\n    }\n\n    return Promise.all(promises).then((entities) => {\n      const rootIds = [];\n      entities.forEach((entity, index) => {\n        entitiesMap[entitiesConfig[index].id] = entity;\n        if (!entitiesConfig[index].parent) {\n          rootIds.push(entitiesConfig[index].id);\n        }\n      });\n      for (const rootId of rootIds) {\n        PrefabParser.parseChildren(entitiesConfigMap, entitiesMap, rootId);\n      }\n      const rootEntities = rootIds.map((id) => entitiesMap[id]);\n      for (let i = 0; i < rootEntities.length; i++) {\n        scene.addRootEntity(rootEntities[i]);\n      }\n      return scene;\n    });\n  }\n}\n","import {\n  AssetPromise,\n  Loader,\n  LoadItem,\n  Mesh,\n  ModelMesh,\n  resourceLoader,\n  ResourceManager,\n  UnlitMaterial\n} from \"@oasis-engine/core\";\nimport { decode } from \"../..\";\n\n@resourceLoader(\"Mesh\", [\"prefab\"], true)\nexport class MeshLoader extends Loader<ModelMesh> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<ModelMesh> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<ArrayBuffer>(item.url, { type: \"arraybuffer\" }).then((data) => {\n        decode<ModelMesh>(data, resourceManager.engine).then((mesh) => {\n          resolve(mesh);\n        });\n      });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  Texture2D} from \"@oasis-engine/core\";\nimport { decode } from \"../..\";\n\n@resourceLoader(\"EditorTexture2D\", [\"prefab\"], true)\nexport class EditorTextureLoader extends Loader<Texture2D> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<Texture2D> {\n    return new AssetPromise((resolve) => {\n      this.request<ArrayBuffer>(item.url, { type: \"arraybuffer\" }).then((data) => {\n        decode<Texture2D>(data, resourceManager.engine).then((texture) => {\n          resolve(texture);\n        });\n      });\n    });\n  }\n}\n","import { Engine } from \"@oasis-engine/core\";\nimport { BufferReader } from \"./utils/BufferReader\";\nimport { decoderMap, decoder } from \"./utils/Decorator\";\nimport { FileHeader } from \"./utils/FileHeader\";\n\nexport { MeshDecoder } from \"./resources/mesh/MeshDecoder\";\nexport { Texture2DDecoder } from \"./resources/texture2D/TextureDecoder\";\nexport { ReflectionParser } from \"./resources/prefab/ReflectionParser\";\nexport { PrefabParser } from \"./resources/prefab/PrefabParser\";\nexport type { IModelMesh } from \"./resources/mesh/IModelMesh\";\nexport type { IAnimationClipAsset } from \"./resources/animationClip/type\";\n\n/**\n * Decode engine binary resource.\n * @param arrayBuffer - array buffer of decode binary file\n * @param engine - engine\n * @returns\n */\nexport function decode<T>(arrayBuffer: ArrayBuffer, engine: Engine): Promise<T> {\n  const header = FileHeader.decode(arrayBuffer);\n  const bufferReader = new BufferReader(arrayBuffer, header.headerLength, header.dataLength);\n  return decoderMap[header.type].decode(engine, bufferReader).then((object) => {\n    object.name = header.name;\n    return object;\n  });\n}\n\nexport * from \"./resources/prefab/PrefabDesign\";\nexport * from \"./resources/scene/SceneParser\";\nexport * from \"./resources/scene/MeshLoader\";\nexport * from \"./resources/scene/EditorTextureLoader\";\n","import {\n  resourceLoader,\n  Loader,\n  AssetPromise,\n  AssetType,\n  LoadItem,\n  ResourceManager,\n  ModelMesh\n} from \"@oasis-engine/core\";\nimport { decode } from \"./resource-deserialize\";\n\n@resourceLoader(AssetType.Mesh, [\"mesh\"])\nclass MeshLoader extends Loader<ModelMesh> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<ModelMesh> {\n    return new AssetPromise((resolve) => {\n      this.request<any>(item.url, {\n        ...item,\n        type: \"arraybuffer\"\n      })\n        .then((data) => {\n          return decode<ModelMesh>(data, resourceManager.engine);\n        })\n        .then((mesh) => {\n          resolve(mesh);\n        });\n    });\n  }\n}\n","import {\n  resourceLoader,\n  Loader,\n  AssetPromise,\n  AssetType,\n  LoadItem,\n  ResourceManager,\n  AnimatorController,\n  AnimatorControllerLayer,\n  AnimatorStateMachine,\n  AnimatorStateTransition\n} from \"@oasis-engine/core\";\n\n@resourceLoader(AssetType.AnimatorController, [\"json\"], false)\nclass AnimatorControllerLoader extends Loader<AnimatorController> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<AnimatorController> {\n    return new AssetPromise((resolve, reject) => {\n      this.request<any>(item.url, {\n        ...item,\n        type: \"json\"\n      }).then(async (data) => {\n        const animatorController = new AnimatorController();\n        const { layers } = data;\n        const promises = [];\n        layers.forEach((layerData, layerIndex: number) => {\n          const { name, blendingMode, weight, stateMachine: stateMachineData } = layerData;\n          const layer = new AnimatorControllerLayer(name);\n          layer.blendingMode = blendingMode;\n          layer.weight = weight;\n          if (stateMachineData) {\n            const { states } = stateMachineData;\n            const stateMachine = (layer.stateMachine = new AnimatorStateMachine());\n            states.forEach((stateData, stateIndex: number) => {\n              const {\n                name,\n                speed,\n                wrapMode,\n                clipStartNormalizedTime,\n                clipEndNormalizedTime,\n                isDefaultState,\n                clip: clipData\n              } = stateData;\n              const state = stateMachine.addState(name);\n              state.speed = speed;\n              state.wrapMode = wrapMode;\n              state.clipStartTime = clipStartNormalizedTime;\n              state.clipEndTime = clipEndNormalizedTime;\n              if (clipData) {\n                promises.push(\n                  new Promise(async (resolve) => {\n                    resolve({\n                      layerIndex,\n                      stateIndex,\n                      clip: await resourceManager.getResourceByRef(clipData)\n                    });\n                  })\n                );\n              }\n            });\n            states.forEach((stateData) => {\n              const { name, transitions } = stateData;\n              transitions.forEach((transitionData) => {\n                const { targetStateName, duration, offset, exitTime } = transitionData;\n                const sourceState = stateMachine.findStateByName(name);\n                const destState = stateMachine.findStateByName(targetStateName);\n                const transition = new AnimatorStateTransition();\n                transition.destinationState = destState;\n                transition.duration = duration;\n                transition.exitTime = exitTime;\n                transition.offset = offset;\n                sourceState.addTransition(transition);\n              });\n            });\n          }\n          animatorController.addLayer(layer);\n        });\n        Promise.all(promises).then((clipData) => {\n          clipData.forEach((data) => {\n            const { layerIndex, stateIndex, clip } = data;\n            animatorController.layers[layerIndex].stateMachine.states[stateIndex].clip = clip;\n          });\n          resolve(animatorController);\n        });\n      });\n    });\n  }\n}\n","import {\n  AssetPromise,\n  Loader,\n  LoadItem,\n  resourceLoader,\n  ResourceManager,\n  AssetType,\n  Scene,\n  BackgroundMode,\n  SkyBoxMaterial,\n  PrimitiveMesh\n} from \"@oasis-engine/core\";\nimport { SceneParser } from \"./resource-deserialize\";\n\n@resourceLoader(AssetType.Scene, [\"prefab\"], true)\nclass SceneLoader extends Loader<Scene> {\n  load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<Scene> {\n    const { engine } = resourceManager;\n    return new AssetPromise((resolve, reject) => {\n      return this.request<any>(item.url, { type: \"json\" }).then((data) => {\n        // @ts-ignore\n        engine.resourceManager.initVirtualResources(data.files);\n        return SceneParser.parse(engine, data).then((scene) => {\n          const ambient = data.scene.ambient;\n          let ambientLightPromise = Promise.resolve();\n          if (ambient.ambientLight) {\n            ambientLightPromise = resourceManager\n              .getResourceByRef<any>(data.scene.ambient.ambientLight)\n              .then((light) => {\n                scene.ambientLight = light;\n                scene.ambientLight.diffuseIntensity = ambient.diffuseIntensity;\n                scene.ambientLight.specularIntensity = ambient.specularIntensity;\n              });\n          }\n\n          const background = data.scene.background;\n          scene.background.mode = background.mode;\n\n          let backgroundPromise = Promise.resolve();\n\n          switch (scene.background.mode) {\n            case BackgroundMode.SolidColor:\n              scene.background.solidColor.copyFrom(background.color);\n              break;\n            case BackgroundMode.Sky:\n              if (background.sky) {\n                backgroundPromise = resourceManager.getResourceByRef<any>(background.sky).then((light) => {\n                  const sky = scene.background.sky;\n                  const skyMaterial = new SkyBoxMaterial(engine);\n                  skyMaterial.textureCubeMap = light.specularTexture;\n                  skyMaterial.textureDecodeRGBM = true;\n                  sky.material = skyMaterial;\n                  sky.mesh = PrimitiveMesh.createCuboid(engine, 1, 1, 1);\n                });\n              }\n              break;\n            case BackgroundMode.Texture:\n              if (background.texture) {\n                backgroundPromise = resourceManager.getResourceByRef<any>(background.texture).then((texture) => {\n                  scene.background.texture = texture;\n                });\n              }\n              break;\n          }\n          Promise.all([ambientLightPromise, backgroundPromise]).then(() => {\n            resolve(scene);\n          });\n        });\n      });\n      //\n    });\n  }\n}\n"],"names":["isBase64","url","test","_dec","resourceLoader","AssetType","Buffer","_class","load","item","AssetPromise","resolve","base64Str","slice","RegExp","$1","length","result","Uint8Array","from","atob","c","charCodeAt","buffer","request","type","Loader","AccessorComponentType","AccessorType","AnimationChannelTargetPath","AnimationSamplerInterpolation","CameraType","ImageMimeType","MaterialAlphaMode","TextureMagFilter","TextureMinFilter","TextureWrapMode","GLTFUtil","floatBufferToVector2Array","bufferLen","array","Array","i","Vector2","floatBufferToVector3Array","Vector3","floatBufferToVector4Array","Vector4","floatBufferToColorArray","isColor3","colors","Color","decodeText","TextDecoder","decode","s","il","String","fromCharCode","decodeURIComponent","encodeURIComponent","getAccessorTypeSize","accessorType","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","getComponentType","componentType","BYTE","Int8Array","UNSIGNED_BYTE","SHORT","Int16Array","UNSIGNED_SHORT","Uint16Array","UNSIGNED_INT","Uint32Array","FLOAT","Float32Array","getAccessorData","gltf","accessor","buffers","bufferViews","bufferView","arrayBuffer","accessorByteOffset","hasOwnProperty","byteOffset","bufferViewByteOffset","accessorTypeSize","count","byteStride","arrayType","uint8Array","accessorByteSize","BYTES_PER_ELEMENT","originalBufferView","byteLength","j","typedArray","sparse","indices","values","indicesBufferView","valuesBufferView","indicesArrayBuffer","valuesArrayBuffer","indicesByteOffset","indicesByteLength","valuesByteOffset","valuesByteLength","indicesType","indicesArray","valuesArray","replaceIndex","getBufferViewData","getVertexStride","stride","size","createVertexElement","semantic","index","VertexElement","getElementFormat","normalized","getIndexFormat","IndexFormat","UInt8","UInt16","UInt32","VertexElementFormat","Float","NormalizedShort2","Short2","NormalizedShort4","Short4","NormalizedUShort2","UShort2","NormalizedUShort4","UShort4","NormalizedByte4","Byte4","NormalizedUByte4","UByte4","loadImageBuffer","imageBuffer","Promise","reject","blob","window","Blob","img","Image","onerror","Error","onload","requestAnimationFrame","onabort","crossOrigin","src","URL","createObjectURL","isAbsoluteUrl","parseRelativeUrl","baseUrl","relativeUrl","char0","charAt","_formatRelativePath","substring","lastIndexOf","parseGLB","glb","UINT32_LENGTH","GLB_HEADER_MAGIC","GLB_HEADER_LENGTH","GLB_CHUNK_TYPES","JSON","BIN","dataView","DataView","header","magic","getUint32","version","console","error","toString","chunkLength","chunkType","glTFData","parse","currentOffset","push","value","parts","split","n","splice","join","Parser","parseEngineResource","extensionName","extensionSchema","parseResource","context","parsers","_extensionParsers","extra","createEngineResource","hasExtensionParser","initialize","_addExtensionParser","extensionParser","registerExtension","parser","AnimationParser","entities","animations","accessors","animationClipCount","animationClips","animationsIndices","gltfAnimation","channels","samplers","name","animationClip","AnimationClip","sampleDataCollection","gltfSampler","inputAccessor","input","outputAccessor","output","outputAccessorSize","interpolation","Linear","samplerInterpolation","CubicSpine","InterpolationType","Step","outputSize","gltfChannel","target","channelTargetEntity","node","relativePath","entity","parent","compType","propertyName","interpolableValueType","path","TRANSLATION","Transform","InterpolableValueType","ROTATION","Quaternion","SCALE","WEIGHTS","SkinnedMeshRenderer","FloatArray","curve","_addCurve","addCurveBinding","_animationsIndices","AnimationCurve","sampleData","sampler","offset","keyframe","InterpolableKeyframe","time","inTangent","outTangent","addKey","subarray","BufferParser","engine","_isGLB","resourceManager","then","all","map","uri","EntityParser","nodes","gltfNode","matrix","translation","rotation","scale","Entity","_defaultName","transform","localMatrix","copyFromArray","setPosition","setRotationQuaternion","setScale","_buildEntityTree","_createSceneRoots","children","childEntity","addChild","scene","sceneID","scenes","sceneRoots","rootEntity","defaultSceneRoot","MaterialParser","_parseTextureTransform","material","extensions","schema","KHR_texture_transform","textures","materials","pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","KHR_materials_unlit","KHR_materials_pbrSpecularGlossiness","KHR_materials_clearcoat","OASIS_materials_remap","PBRMaterial","baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture","baseColor","linearToGammaSpace","baseTexture","m","metallic","roughness","roughnessMetallicTexture","emissiveColor","undefined","normalTextureIntensity","strength","texCoord","occlusionTextureIntensity","TextureCoordinate","UV1","occlusionTextureCoord","Logger","warn","renderFace","RenderFace","Double","Front","OPAQUE","isTransparent","BLEND","MASK","MeshParser","meshes","meshPromises","gltfMesh","primitivePromises","gltfPrimitive","primitives","KHR_draco_mesh_compression","mesh","ModelMesh","decodedGeometry","_parseMeshFromGLTFPrimitive","attributeSemantic","attributes","shapeIndex","accessorIdx","attributeName","shapeAccessorIdx","targets","attributeAccessorIdx","indexAccessor","getVertexBufferData","getBlendShapeData","getIndexBufferData","mode","vertexCount","positionBuffer","positions","setPositions","bounds","min","max","position","_tempVector3","set","Number","MAX_VALUE","bufferData","normals","setNormals","texturecoords","setUVs","texturecoords1","texturecoords2","texturecoords3","texturecoords4","texturecoords5","texturecoords6","texturecoords7","setColors","tangents","setTangents","joints","setBoneIndices","weights","setBoneWeights","indexData","setIndices","addSubMesh","_createBlendShape","uploadData","glTFMesh","glTFTargets","blendShapeNames","extras","targetNames","deltaPosBuffer","deltaNorBuffer","deltaTanBuffer","deltaPositions","deltaNormals","deltaTangents","blendShape","BlendShape","addFrame","addBlendShape","SceneParser","_getDefaultMaterial","_defaultMaterial","BlinnPhongMaterial","gltfCameras","cameras","promises","cameraID","camera","meshID","KHR_lights_punctual","_createCamera","_createRenderer","lightIndex","light","lights","_createAnimator","cameraSchema","orthographic","perspective","addComponent","Camera","ORTHOGRAPHIC","xmag","ymag","zfar","znear","isOrthographic","nearClipPlane","farClipPlane","orthographicSize","Math","PERSPECTIVE","aspectRatio","yfov","fieldOfView","PI","enabled","gltfMeshes","skins","skinID","skin","gltfMeshPrimitives","blendShapeWeights","renderer","skinRenderer","MeshRenderer","materialIndex","remapMaterials","mtl","setMaterial","KHR_materials_variants","animator","Animator","animatorController","AnimatorController","layer","AnimatorControllerLayer","animatorStateMachine","AnimatorStateMachine","addLayer","stateMachine","uniqueName","makeUniqueStateName","animatorState","addState","clip","SkinParser","gltfSkins","inverseBindMatrices","skeleton","jointCount","Skin","inverseBindMatrix","Matrix","TextureParser","source","textureName","images","bufferViewIndex","mimeType","imageName","Texture2D","texture","_parseSampler","bufferViewData","image","width","height","setImageSource","generateMipmaps","magFilter","minFilter","wrapS","wrapT","wrapModeU","_wrapMap","wrapModeV","Clamp","Mirror","Repeat","Validator","asset","extensionsUsed","extensionsRequired","gltfVersion","info","extensionRequired","GLTFParser","pipes","_pipes","forEach","pipe","lastPipe","catch","instance","GLTFResource","variants","EngineObject","Prefab","resource","e","HEADER_LEN","COMPRESSED_2D","getMipmaps","ktxContainer","loadMipmaps","mipmaps","dataOffset","bytesOfKeyValueData","pixelWidth","pixelHeight","mipmapCount","numberOfMipmapLevels","level","imageSize","Int32Array","face","numberOfFaces","byteArray","data","isValid","identifier","getEngineFormat","internalFormat","GLCompressedTextureInternalFormat","RGB_S3TC_DXT1_EXT","TextureFormat","DXT1","RGBA_S3TC_DXT5_EXT","DXT5","RGB_ETC1_WEBGL","ETC1_RGB","RGB8_ETC2","ETC2_RGB","RGB8_PUNCHTHROUGH_ALPHA1_ETC2","ETC2_RGBA5","RGBA8_ETC2_EAC","ETC2_RGBA8","RGB_PVRTC_2BPPV1_IMG","PVRTC_RGB2","RGBA_PVRTC_2BPPV1_IMG","PVRTC_RGBA2","RGB_PVRTC_4BPPV1_IMG","PVRTC_RGB4","RGBA_PVRTC_4BPPV1_IMG","PVRTC_RGBA4","RGBA_ASTC_4X4_KHR","ASTC_4x4","RGBA_ASTC_5X5_KHR","ASTC_5x5","RGBA_ASTC_6X6_KHR","ASTC_6x6","RGBA_ASTC_8X8_KHR","ASTC_8x8","RGBA_ASTC_10X10_KHR","ASTC_10x10","RGBA_ASTC_12X12_KHR","ASTC_12x12","formatName","khronosTextureContainerParser","facesExpected","withMipmaps","mapEngineFormat","dataSize","headerDataView","endianness","littleEndian","parsedResult","glType","glTypeSize","glFormat","glInternalFormat","glBaseInternalFormat","pixelDepth","numberOfArrayElements","loadType","engineFormat","parseSingleKTX","ktx","parseCubeKTX","dataArray","mipmapsFaces","KTXCube","urls","parsedData","mipmap","TextureCube","miplevel","setPixelBuffer","TextureCubeFace","PositiveX","KTX","bin","_platformTexture","indexOf","splitPath","tex","faceIndex","Sprite","getResourceByRef","sprite","region","pivot","SpriteAtlas","_tempRect","Rect","_tempVec2","atlasData","atlasItems","format","atlasItemsLen","imgs","tempRect","tempVec2","spriteAtlas","originalImg","atlasItem","sprites","sourceWidthReciprocal","sourceHeightReciprocal","atlasSprite","atlasRegionOffset","atlasRegion","id","x","y","w","h","atlasRotated","offsetLeft","offsetTop","offsetRight","z","offsetBottom","_assetID","_addSprite","Env","arraybuffer","shArray","shByteLength","filterMode","TextureFilterMode","Trilinear","mipLevel","mipSize","ambientLight","AmbientLight","sh","SphericalHarmonics3","diffuseMode","DiffuseMode","SphericalHarmonics","diffuseSphericalHarmonics","specularTexture","specularTextureDecodeRGBM","HDR","_class2","_convertToCubemap","pixels","inputWidth","inputHeight","textureRight","_createCubemapData","_faceRight","textureLeft","_faceLeft","textureUp","_faceUp","textureDown","_faceBottom","textureFront","_faceFront","textureBack","_faceBack","texSize","faceData","textureArray","Uint8ClampedArray","rotDX1","add","subtract","rotDX2","_temp2Vector3","dy","fy","xv1","_temp3Vector3","xv2","_temp4Vector3","v","_temp5Vector3","normalize","color","_calcProjectionSpherical","_RGBEToLinear","_linearToRGBM","r","g","b","a","vDir","theta","atan2","phi","acos","dx","px","round","py","inputY","_readStringLine","uint8array","startIndex","line","character","_parseHeader","endOfHeader","findFormat","lineIndex","sizeRegexp","match","exec","parseInt","dataPosition","_readPixels","scanLineWidth","dataRGBA","pos","ptrEnd","rgbeStart","scanLineBuffer","numScanLines","ptr","isEncodedRun","byteValue","l","off","scaleFactor","pow","maxRange","maxRGB","M","ceil","HDRLoader","cubeSize","cubeMapData","_rightBottomBack","_rightBottomFront","_rightUpBack","_rightUpFront","_leftBottomBack","_leftBottomFront","_leftUpBack","_leftUpFront","ExtensionParser","_decoder","DRACODecoder","gltfAttributeMap","attributeMap","attributeTypeMap","accessorDef","indexType","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","parsedGeometry","intensity","range","spot","DirectLight","PointLight","SpotLight","distance","innerConeAngle","outerConeAngle","angle","penumbra","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","clearCoat","clearCoatRoughness","clearCoatTexture","clearCoatRoughnessTexture","clearCoatNormalTexture","PBRSpecularMaterial","diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture","specularColor","glossiness","UnlitMaterial","variantNames","mappings","tilingOffset","Material","json","shader","shaderData","macros","renderState","texturePromises","materialShaderData","key","setVector2","setVector3","setVector4","setColor","setFloat","setTexture","enableMacro","BufferReader","_dataView","_littleEndian","_offset","nextUint8","getUint8","nextUint16","getUint16","nextUint32","nextInt32","getInt32","nextInt32Array","len","nextFloat32","getFloat32","nextFloat32Array","nextUint32Array","nextUint8Array","nextUint64","left","right","nextStr","strByteLength","nextImageData","nextImagesData","imagesLen","imagesData","skip","bytes","scan","maxByteLength","term","imageMapping","decoderMap","decoder","FileHeader","totalLength","headerLength","totalLen","fileVersion","typeLen","typeUint8Array","nameLen","nameUint8Array","MeshDecoder","bufferReader","modelMesh","jsonDataString","encodedMeshData","float32Array","start","end","float32ArrayToVector3","uvs","float32ArrayToVector2","uv1","uv2","uv3","uv4","uv5","uv6","uv7","float32ArrayToVColor","boneWeights","float32ArrayToVector4","boneIndices","blendShapes","blendShapeData","frames","frameData","positionArray","deltaPosition","normalsArray","tangentsArray","weight","subMeshes","subMesh","Texture2DDecoder","objectId","anisoLevel","isPixelBuffer","mipCount","texture2D","pixelBuffer","_objectPool","completedCount","onComplete","ReflectionParser","parseEntity","entityConfig","getEntityByConfig","isActive","setRotation","components","componentConfig","refId","class","component","getComponent","getClass","promise","parsePropsAndMethods","assetRefId","parseClassObject","Class","params","constructParams","parseBasicType","isArray","_isClass","_isRef","methods","methodName","methodParams","parseMethod","props","param","PrefabParser","_engine","entitiesMap","entitiesConfigMap","entitiesConfig","rootId","parseChildren","parentId","childId","sceneData","Scene","rootIds","rootEntities","addRootEntity","MeshLoader","EditorTextureLoader","dataLength","object","Mesh","layers","layerData","layerIndex","blendingMode","stateMachineData","states","stateData","stateIndex","speed","wrapMode","clipStartNormalizedTime","clipEndNormalizedTime","isDefaultState","clipData","state","clipStartTime","clipEndTime","transitions","transitionData","targetStateName","duration","exitTime","sourceState","findStateByName","destState","transition","AnimatorStateTransition","destinationState","addTransition","initVirtualResources","files","ambient","ambientLightPromise","diffuseIntensity","specularIntensity","background","backgroundPromise","BackgroundMode","SolidColor","solidColor","copyFrom","Sky","sky","skyMaterial","SkyBoxMaterial","textureCubeMap","textureDecodeRGBM","PrimitiveMesh","createCuboid","Texture"],"mappings":"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"}