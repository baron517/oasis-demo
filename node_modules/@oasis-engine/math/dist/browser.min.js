!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self)["@oasisEngine/math"]={})}(this,(function(t){"use strict";var n,e;function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}t.ContainmentType=void 0,(n=t.ContainmentType||(t.ContainmentType={}))[n.Disjoint=0]="Disjoint",n[n.Contains=1]="Contains",n[n.Intersects=2]="Intersects",t.PlaneIntersectionType=void 0,(e=t.PlaneIntersectionType||(t.PlaneIntersectionType={}))[e.Back=0]="Back",e[e.Front=1]="Front",e[e.Intersecting=2]="Intersecting";var r=function(){function t(){}return t.clamp=function(t,n,e){return Math.max(n,Math.min(e,t))},t.equals=function(n,e){return Math.abs(n-e)<=t.zeroTolerance},t.isPowerOf2=function(t){return 0==(t&t-1)},t.radianToDegree=function(n){return n*t.radToDegreeFactor},t.degreeToRadian=function(n){return n*t.degreeToRadFactor},t}();r.zeroTolerance=1e-6,r.radToDegreeFactor=180/Math.PI,r.degreeToRadFactor=Math.PI/180;var o=function(){function t(t,n,e){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),this._x=void 0,this._y=void 0,this._z=void 0,this._onValueChanged=null,this._x=t,this._y=n,this._z=e}t.add=function(t,n,e){e._x=t._x+n._x,e._y=t._y+n._y,e._z=t._z+n._z,e._onValueChanged&&e._onValueChanged()},t.subtract=function(t,n,e){e._x=t._x-n._x,e._y=t._y-n._y,e._z=t._z-n._z,e._onValueChanged&&e._onValueChanged()},t.multiply=function(t,n,e){e._x=t._x*n._x,e._y=t._y*n._y,e._z=t._z*n._z,e._onValueChanged&&e._onValueChanged()},t.divide=function(t,n,e){e._x=t._x/n._x,e._y=t._y/n._y,e._z=t._z/n._z,e._onValueChanged&&e._onValueChanged()},t.dot=function(t,n){return t._x*n._x+t._y*n._y+t._z*n._z},t.cross=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n._x,s=n._y,_=n._z;e.set(a*_-r*s,r*o-i*_,i*s-a*o)},t.distance=function(t,n){var e=n._x-t._x,i=n._y-t._y,a=n._z-t._z;return Math.sqrt(e*e+i*i+a*a)},t.distanceSquared=function(t,n){var e=n._x-t._x,i=n._y-t._y,a=n._z-t._z;return e*e+i*i+a*a},t.equals=function(t,n){return r.equals(t._x,n._x)&&r.equals(t._y,n._y)&&r.equals(t._z,n._z)},t.lerp=function(t,n,e,i){var a=t._x,r=t._y,o=t._z;i._x=a+(n._x-a)*e,i._y=r+(n._y-r)*e,i._z=o+(n._z-o)*e,i._onValueChanged&&i._onValueChanged()},t.max=function(t,n,e){e._x=Math.max(t._x,n._x),e._y=Math.max(t._y,n._y),e._z=Math.max(t._z,n._z),e._onValueChanged&&e._onValueChanged()},t.min=function(t,n,e){e._x=Math.min(t._x,n._x),e._y=Math.min(t._y,n._y),e._z=Math.min(t._z,n._z),e._onValueChanged&&e._onValueChanged()},t.negate=function(t,n){n._x=-t._x,n._y=-t._y,n._z=-t._z,n._onValueChanged&&n._onValueChanged()},t.normalize=function(t,n){var e=t._x,i=t._y,a=t._z,o=Math.sqrt(e*e+i*i+a*a);o>r.zeroTolerance&&(o=1/o,n.set(e*o,i*o,a*o))},t.scale=function(t,n,e){e._x=t._x*n,e._y=t._y*n,e._z=t._z*n,e._onValueChanged&&e._onValueChanged()},t.transformNormal=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n.elements;e._x=i*o[0]+a*o[4]+r*o[8],e._y=i*o[1]+a*o[5]+r*o[9],e._z=i*o[2]+a*o[6]+r*o[10],e._onValueChanged&&e._onValueChanged()},t.transformToVec3=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n.elements;e._x=i*o[0]+a*o[4]+r*o[8]+o[12],e._y=i*o[1]+a*o[5]+r*o[9]+o[13],e._z=i*o[2]+a*o[6]+r*o[10]+o[14],e._onValueChanged&&e._onValueChanged()},t.transformToVec4=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n.elements;e._x=i*o[0]+a*o[4]+r*o[8]+o[12],e._y=i*o[1]+a*o[5]+r*o[9]+o[13],e._z=i*o[2]+a*o[6]+r*o[10]+o[14],e._w=i*o[3]+a*o[7]+r*o[11]+o[15],e._onValueChanged&&e._onValueChanged()},t.transformCoordinate=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n.elements,s=i*o[3]+a*o[7]+r*o[11]+o[15];s=1/s,e._x=(i*o[0]+a*o[4]+r*o[8]+o[12])*s,e._y=(i*o[1]+a*o[5]+r*o[9]+o[13])*s,e._z=(i*o[2]+a*o[6]+r*o[10]+o[14])*s,e._onValueChanged&&e._onValueChanged()},t.transformByQuat=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=n._x,s=n._y,_=n._z,h=n._w,u=h*i+s*r-_*a,c=h*a+_*i-o*r,l=h*r+o*a-s*i,y=-o*i-s*a-_*r;e._x=u*h-y*o-c*_+l*s,e._y=c*h-y*s-l*o+u*_,e._z=l*h-y*_-u*s+c*o,e._onValueChanged&&e._onValueChanged()};var n=t.prototype;return n.set=function(t,n,e){return this._x=t,this._y=n,this._z=e,this._onValueChanged&&this._onValueChanged(),this},n.add=function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._onValueChanged&&this._onValueChanged(),this},n.subtract=function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._onValueChanged&&this._onValueChanged(),this},n.multiply=function(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._onValueChanged&&this._onValueChanged(),this},n.divide=function(t){return this._x/=t._x,this._y/=t._y,this._z/=t._z,this._onValueChanged&&this._onValueChanged(),this},n.length=function(){var t=this._x,n=this._y,e=this._z;return Math.sqrt(t*t+n*n+e*e)},n.lengthSquared=function(){var t=this._x,n=this._y,e=this._z;return t*t+n*n+e*e},n.negate=function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._onValueChanged&&this._onValueChanged(),this},n.normalize=function(){return t.normalize(this,this),this},n.scale=function(t){return this._x*=t,this._y*=t,this._z*=t,this._onValueChanged&&this._onValueChanged(),this},n.transformNormal=function(n){return t.transformNormal(this,n,this),this},n.transformToVec3=function(n){return t.transformToVec3(this,n,this),this},n.transformCoordinate=function(n){return t.transformCoordinate(this,n,this),this},n.transformByQuat=function(n){return t.transformByQuat(this,n,this),this},n.clone=function(){return new t(this._x,this._y,this._z)},n.copyFrom=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._onValueChanged&&this._onValueChanged(),this},n.copyFromArray=function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._onValueChanged&&this._onValueChanged(),this},n.copyToArray=function(t,n){void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z},a(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onValueChanged&&this._onValueChanged()}}]),t}();o._zero=new o(0,0,0),o._one=new o(1,1,1);var s=function(){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=0),this.center=new o,this.radius=0,t&&this.center.copyFrom(t),this.radius=n}t.fromPoints=function(n,e){if(!n||0===n.length)throw new Error("points must be array and length must > 0");var i=n.length,a=t._tempVec30;a.x=a.y=a.z=0;for(var r=0;r<i;++r)o.add(n[r],a,a);o.scale(a,1/i,e.center);for(var s=0,_=0;_<i;++_){var h=o.distanceSquared(a,n[_]);h>s&&(s=h)}e.radius=Math.sqrt(s)},t.fromBox=function(t,n){var e=n.center,i=t.min,a=t.max;e.x=.5*(i.x+a.x),e.y=.5*(i.y+a.y),e.z=.5*(i.z+a.z),n.radius=o.distance(e,a)};var n=t.prototype;return n.clone=function(){return new t(this.center,this.radius)},n.copyFrom=function(t){return this.center.copyFrom(t.center),this.radius=t.radius,this},t}();s._tempVec30=new o;var _=function(){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.min=new o,this.max=new o,t&&this.min.copyFrom(t),n&&this.max.copyFrom(n)}t.fromCenterAndExtent=function(t,n,e){o.subtract(t,n,e.min),o.add(t,n,e.max)},t.fromPoints=function(t,n){if(!t||0===t.length)throw new Error("points must be array and length must > 0");var e=n.min,i=n.max;e.x=e.y=e.z=Number.MAX_VALUE,i.x=i.y=i.z=-Number.MAX_VALUE;for(var a=0,r=t.length;a<r;++a){var s=t[a];o.min(e,s,e),o.max(i,s,i)}},t.fromSphere=function(t,n){var e=t.center,i=t.radius,a=n.min,r=n.max;a.x=e.x-i,a.y=e.y-i,a.z=e.z-i,r.x=e.x+i,r.y=e.y+i,r.z=e.z+i},t.transform=function(n,e,i){var a=t._tempVec30,r=t._tempVec31;n.getCenter(a),n.getExtent(r),o.transformCoordinate(a,e,a);var s=r.x,_=r.y,h=r.z,u=e.elements;r.x=Math.abs(s*u[0])+Math.abs(_*u[4])+Math.abs(h*u[8]),r.y=Math.abs(s*u[1])+Math.abs(_*u[5])+Math.abs(h*u[9]),r.z=Math.abs(s*u[2])+Math.abs(_*u[6])+Math.abs(h*u[10]),o.subtract(a,r,i.min),o.add(a,r,i.max)},t.merge=function(t,n,e){return o.min(t.min,n.min,e.min),o.max(t.max,n.max,e.max),e};var n=t.prototype;return n.getCenter=function(t){return o.add(this.min,this.max,t),o.scale(t,.5,t),t},n.getExtent=function(t){return o.subtract(this.max,this.min,t),o.scale(t,.5,t),t},n.getCorners=function(t){void 0===t&&(t=[]);var n=this.min,e=this.max,i=n.x,a=n.y,r=n.z,s=e.x,_=e.y,h=e.z,u=t.length;if(u<8)for(var c=0,l=8-u;c<l;++c)t[u+c]=new o;return t[0].set(i,_,h),t[1].set(s,_,h),t[2].set(s,a,h),t[3].set(i,a,h),t[4].set(i,_,r),t[5].set(s,_,r),t[6].set(s,a,r),t[7].set(i,a,r),t},n.transform=function(n){return t.transform(this,n,this),this},n.clone=function(){return new t(this.min,this.max)},n.copyFrom=function(t){return this.min.copyFrom(t.min),this.max.copyFrom(t.max),this},t}();_._tempVec30=new o,_._tempVec31=new o;var h=function(){function n(){}return n.distancePlaneAndPoint=function(t,n){return o.dot(t.normal,n)+t.distance},n.intersectsPlaneAndPoint=function(e,i){var a=n.distancePlaneAndPoint(e,i);return a>0?t.PlaneIntersectionType.Front:a<0?t.PlaneIntersectionType.Back:t.PlaneIntersectionType.Intersecting},n.intersectsPlaneAndBox=function(e,i){var a=i.min,r=i.max,o=e.normal,s=n._tempVec30,_=n._tempVec31;return o.x>=0?(s.x=r.x,_.x=a.x):(s.x=a.x,_.x=r.x),o.y>=0?(s.y=r.y,_.y=a.y):(s.y=a.y,_.y=r.y),o.z>=0?(s.z=r.z,_.z=a.z):(s.z=a.z,_.z=r.z),n.distancePlaneAndPoint(e,s)<0?t.PlaneIntersectionType.Back:n.distancePlaneAndPoint(e,_)>0?t.PlaneIntersectionType.Front:t.PlaneIntersectionType.Intersecting},n.intersectsPlaneAndSphere=function(e,i){var a=i.center,r=i.radius,o=n.distancePlaneAndPoint(e,a);return o>r?t.PlaneIntersectionType.Front:o<-r?t.PlaneIntersectionType.Back:t.PlaneIntersectionType.Intersecting},n.intersectsRayAndPlane=function(t,n){var e=n.normal,i=r.zeroTolerance,a=o.dot(e,t.direction);if(Math.abs(a)<i)return-1;var s=o.dot(e,t.origin),_=(-n.distance-s)/a;if(_<0){if(_<-i)return-1;_=0}return _},n.intersectsRayAndBox=function(t,n){var e=r.zeroTolerance,i=t.origin,a=t.direction,o=n.min,s=n.max,_=a.x,h=a.y,u=a.z,c=i.x,l=i.y,y=i.z,d=0,f=Number.MAX_VALUE;if(Math.abs(_)<e){if(c<o.x||c>s.x)return-1}else{var x=1/_,m=(o.x-c)*x,g=(s.x-c)*x;if(m>g){var z=m;m=g,g=z}if((d=Math.max(m,d))>(f=Math.min(g,f)))return-1}if(Math.abs(h)<e){if(l<o.y||l>s.y)return-1}else{var v=1/h,V=(o.y-l)*v,C=(s.y-l)*v;if(V>C){var p=V;V=C,C=p}if((d=Math.max(V,d))>(f=Math.min(C,f)))return-1}if(Math.abs(u)<e){if(y<o.z||y>s.z)return-1}else{var w=1/u,M=(o.z-y)*w,q=(s.z-y)*w;if(M>q){var b=M;M=q,q=b}if((d=Math.max(M,d))>(f=Math.min(q,f)))return-1}return d},n.intersectsRayAndSphere=function(t,e){var i=t.origin,a=t.direction,r=e.center,s=e.radius,_=n._tempVec30;o.subtract(i,r,_);var h=o.dot(_,a),u=o.dot(_,_)-s*s;if(h>0&&u>0)return-1;var c=h*h-u;if(c<0)return-1;var l=-h-Math.sqrt(c);return l<0&&(l=0),l},n.intersectsBoxAndBox=function(t,n){return!(t.min.x>n.max.x||n.min.x>t.max.x)&&(!(t.min.y>n.max.y||n.min.y>t.max.y)&&!(t.min.z>n.max.z||n.min.z>t.max.z))},n.intersectsSphereAndSphere=function(t,n){var e=t.radius+n.radius;return o.distanceSquared(t.center,n.center)<e*e},n.intersectsSphereAndBox=function(t,e){var i=t.center,a=e.max,r=e.min,s=n._tempVec30;return s.set(Math.max(r.x,Math.min(i.x,a.x)),Math.max(r.y,Math.min(i.y,a.y)),Math.max(r.z,Math.min(i.z,a.z))),o.distanceSquared(i,s)<=t.radius*t.radius},n.intersectsFrustumAndBox=function(t,e){for(var i=e.min,a=e.max,r=n._tempVec30,s=0;s<6;++s){var _=t.getPlane(s),h=_.normal;if(r.set(h.x>=0?i.x:a.x,h.y>=0?i.y:a.y,h.z>=0?i.z:a.z),o.dot(h,r)>-_.distance)return!1}return!0},n.frustumContainsBox=function(e,i){for(var a=i.min,r=i.max,o=n._tempVec30,s=n._tempVec31,_=t.ContainmentType.Contains,h=0;h<6;++h){var u=e.getPlane(h),c=u.normal;if(c.x>=0?(o.x=r.x,s.x=a.x):(o.x=a.x,s.x=r.x),c.y>=0?(o.y=r.y,s.y=a.y):(o.y=a.y,s.y=r.y),c.z>=0?(o.z=r.z,s.z=a.z):(o.z=a.z,s.z=r.z),n.intersectsPlaneAndPoint(u,s)===t.PlaneIntersectionType.Front)return t.ContainmentType.Disjoint;n.intersectsPlaneAndPoint(u,o)===t.PlaneIntersectionType.Front&&(_=t.ContainmentType.Intersects)}return _},n.frustumContainsSphere=function(e,i){for(var a=t.ContainmentType.Contains,r=0;r<6;++r){var o=e.getPlane(r),s=n.intersectsPlaneAndSphere(o,i);if(s===t.PlaneIntersectionType.Front)return t.ContainmentType.Disjoint;if(s===t.PlaneIntersectionType.Intersecting){a=t.ContainmentType.Intersects;break}}return a},n}();h._tempVec30=new o,h._tempVec31=new o;var u=function(){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=0),this.normal=new o,this.distance=0,t&&this.normal.copyFrom(t),this.distance=n}t.normalize=function(t,n){var e=t.normal,i=1/e.length();o.scale(e,i,n.normal),n.distance=t.distance*i},t.fromPoints=function(t,n,e,i){var a=t.x,r=t.y,o=t.z,s=n.x-a,_=n.y-r,h=n.z-o,u=e.x-a,c=e.y-r,l=e.z-o,y=_*l-h*c,d=h*u-s*l,f=s*c-_*u,x=1/Math.sqrt(y*y+d*d+f*f),m=y*x,g=d*x,z=f*x,v=i.normal;v.x=m,v.y=g,v.z=z,i.distance=-(m*a+g*r+z*o)};var n=t.prototype;return n.normalize=function(){return t.normalize(this,this),this},n.clone=function(){var n=new t;return n.copyFrom(this),n},n.copyFrom=function(t){return this.normal.copyFrom(t.normal),this.distance=t.distance,this},t}(),c=function(){function n(t){void 0===t&&(t=null),this.near=void 0,this.far=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0,this.near=new u,this.far=new u,this.left=new u,this.right=new u,this.top=new u,this.bottom=new u,t&&this.calculateFromMatrix(t)}var e=n.prototype;return e.getPlane=function(t){switch(t){case 0:return this.near;case 1:return this.far;case 2:return this.left;case 3:return this.right;case 4:return this.top;case 5:return this.bottom;default:return null}},e.calculateFromMatrix=function(t){var n=t.elements,e=n[0],i=n[1],a=n[2],r=n[3],o=n[4],s=n[5],_=n[6],h=n[7],u=n[8],c=n[9],l=n[10],y=n[11],d=n[12],f=n[13],x=n[14],m=n[15];this.near.normal.set(-r-a,-h-_,-y-l),this.near.distance=-m-x,this.near.normalize(),this.far.normal.set(a-r,_-h,l-y),this.far.distance=x-m,this.far.normalize(),this.left.normal.set(-r-e,-h-o,-y-u),this.left.distance=-m-d,this.left.normalize(),this.right.normal.set(e-r,o-h,u-y),this.right.distance=d-m,this.right.normalize(),this.top.normal.set(i-r,s-h,c-y),this.top.distance=f-m,this.top.normalize(),this.bottom.normal.set(-r-i,-h-s,-y-c),this.bottom.distance=-m-f,this.bottom.normalize()},e.intersectsBox=function(t){return h.intersectsFrustumAndBox(this,t)},e.intersectsSphere=function(n){return h.frustumContainsSphere(this,n)!==t.ContainmentType.Disjoint},e.clone=function(){var t=new n;return t.copyFrom(this),t},e.copyFrom=function(t){return this.near.copyFrom(t.near),this.far.copyFrom(t.far),this.left.copyFrom(t.left),this.right.copyFrom(t.right),this.top.copyFrom(t.top),this.bottom.copyFrom(t.bottom),this},n}(),l=function(){function t(t,n,e,i,a,r,o,s,_){void 0===t&&(t=1),void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===_&&(_=1),this.elements=new Float32Array(9);var h=this.elements;h[0]=t,h[1]=n,h[2]=e,h[3]=i,h[4]=a,h[5]=r,h[6]=o,h[7]=s,h[8]=_}t.add=function(t,n,e){var i=t.elements,a=n.elements,r=e.elements;r[0]=i[0]+a[0],r[1]=i[1]+a[1],r[2]=i[2]+a[2],r[3]=i[3]+a[3],r[4]=i[4]+a[4],r[5]=i[5]+a[5],r[6]=i[6]+a[6],r[7]=i[7]+a[7],r[8]=i[8]+a[8]},t.subtract=function(t,n,e){var i=t.elements,a=n.elements,r=e.elements;r[0]=i[0]-a[0],r[1]=i[1]-a[1],r[2]=i[2]-a[2],r[3]=i[3]-a[3],r[4]=i[4]-a[4],r[5]=i[5]-a[5],r[6]=i[6]-a[6],r[7]=i[7]-a[7],r[8]=i[8]-a[8]},t.multiply=function(t,n,e){var i=t.elements,a=n.elements,r=e.elements,o=i[0],s=i[1],_=i[2],h=i[3],u=i[4],c=i[5],l=i[6],y=i[7],d=i[8],f=a[0],x=a[1],m=a[2],g=a[3],z=a[4],v=a[5],V=a[6],C=a[7],p=a[8];r[0]=o*f+h*x+l*m,r[1]=s*f+u*x+y*m,r[2]=_*f+c*x+d*m,r[3]=o*g+h*z+l*v,r[4]=s*g+u*z+y*v,r[5]=_*g+c*z+d*v,r[6]=o*V+h*C+l*p,r[7]=s*V+u*C+y*p,r[8]=_*V+c*C+d*p},t.equals=function(t,n){var e=t.elements,i=n.elements;return r.equals(e[0],i[0])&&r.equals(e[1],i[1])&&r.equals(e[2],i[2])&&r.equals(e[3],i[3])&&r.equals(e[4],i[4])&&r.equals(e[5],i[5])&&r.equals(e[6],i[6])&&r.equals(e[7],i[7])&&r.equals(e[8],i[8])},t.lerp=function(t,n,e,i){var a=t.elements,r=n.elements,o=i.elements,s=1-e;o[0]=a[0]*s+r[0]*e,o[1]=a[1]*s+r[1]*e,o[2]=a[2]*s+r[2]*e,o[3]=a[3]*s+r[3]*e,o[4]=a[4]*s+r[4]*e,o[5]=a[5]*s+r[5]*e,o[6]=a[6]*s+r[6]*e,o[7]=a[7]*s+r[7]*e,o[8]=a[8]*s+r[8]*e},t.rotationQuaternion=function(t,n){var e=n.elements,i=t._x,a=t._y,r=t._z,o=t._w,s=i+i,_=a+a,h=r+r,u=i*s,c=a*s,l=a*_,y=r*s,d=r*_,f=r*h,x=o*s,m=o*_,g=o*h;e[0]=1-l-f,e[3]=c-g,e[6]=y+m,e[1]=c+g,e[4]=1-u-f,e[7]=d-x,e[2]=y-m,e[5]=d+x,e[8]=1-u-l},t.scaling=function(t,n){var e=n.elements;e[0]=t._x,e[1]=0,e[2]=0,e[3]=0,e[4]=t._y,e[5]=0,e[6]=0,e[7]=0,e[8]=1},t.translation=function(t,n){var e=n.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t._x,e[7]=t._y,e[8]=1},t.invert=function(t,n){var e=t.elements,i=n.elements,a=e[0],r=e[1],o=e[2],s=e[3],_=e[4],h=e[5],u=e[6],c=e[7],l=e[8],y=l*_-h*c,d=-l*s+h*u,f=c*s-_*u,x=a*y+r*d+o*f;x&&(x=1/x,i[0]=y*x,i[1]=(-l*r+o*c)*x,i[2]=(h*r-o*_)*x,i[3]=d*x,i[4]=(l*a-o*u)*x,i[5]=(-h*a+o*s)*x,i[6]=f*x,i[7]=(-c*a+r*u)*x,i[8]=(_*a-r*s)*x)},t.normalMatrix=function(t,n){var e=t.elements,i=n.elements,a=e[0],r=e[1],o=e[2],s=e[3],_=e[4],h=e[5],u=e[6],c=e[7],l=e[8],y=e[9],d=e[10],f=e[11],x=e[12],m=e[13],g=e[14],z=e[15],v=a*h-r*_,V=a*u-o*_,C=a*c-s*_,p=r*u-o*h,w=r*c-s*h,M=o*c-s*u,q=l*m-y*x,b=l*g-d*x,T=l*z-f*x,A=y*g-d*m,F=y*z-f*m,P=d*z-f*g,S=v*P-V*F+C*A+p*T-w*b+M*q;if(!S)return null;S=1/S,i[0]=(h*P-u*F+c*A)*S,i[1]=(u*T-_*P-c*b)*S,i[2]=(_*F-h*T+c*q)*S,i[3]=(o*F-r*P-s*A)*S,i[4]=(a*P-o*T+s*b)*S,i[5]=(r*T-a*F-s*q)*S,i[6]=(m*M-g*w+z*p)*S,i[7]=(g*C-x*M-z*V)*S,i[8]=(x*w-m*C+z*v)*S},t.rotate=function(t,n,e){var i=t.elements,a=e.elements,r=Math.sin(n),o=Math.cos(n),s=i[0],_=i[1],h=i[2],u=i[3],c=i[4],l=i[5],y=i[6],d=i[7],f=i[8];a[0]=o*s+r*u,a[1]=o*_+r*c,a[2]=o*h+r*l,a[3]=o*u-r*s,a[4]=o*c-r*_,a[5]=o*l-r*h,a[6]=y,a[7]=d,a[8]=f},t.scale=function(t,n,e){var i=n._x,a=n._y,r=t.elements,o=e.elements;o[0]=i*r[0],o[1]=i*r[1],o[2]=i*r[2],o[3]=a*r[3],o[4]=a*r[4],o[5]=a*r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8]},t.translate=function(t,n,e){var i=n._x,a=n._y,r=t.elements,o=e.elements,s=r[0],_=r[1],h=r[2],u=r[3],c=r[4],l=r[5],y=r[6],d=r[7],f=r[8];o[0]=s,o[1]=_,o[2]=h,o[3]=u,o[4]=c,o[5]=l,o[6]=i*s+a*u+y,o[7]=i*_+a*c+d,o[8]=i*h+a*l+f},t.transpose=function(t,n){var e=t.elements,i=n.elements;if(n===t){var a=e[1],r=e[2],o=e[5];i[1]=e[3],i[2]=e[6],i[3]=a,i[5]=e[7],i[6]=r,i[7]=o}else i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8]};var n=t.prototype;return n.set=function(t,n,e,i,a,r,o,s,_){var h=this.elements;return h[0]=t,h[1]=n,h[2]=e,h[3]=i,h[4]=a,h[5]=r,h[6]=o,h[7]=s,h[8]=_,this},n.add=function(n){return t.add(this,n,this),this},n.subtract=function(n){return t.subtract(this,n,this),this},n.multiply=function(n){return t.multiply(this,n,this),this},n.determinant=function(){var t=this.elements,n=t[0],e=t[1],i=t[2],a=t[3],r=t[4],o=t[5],s=t[6],_=t[7],h=t[8];return n*(h*r-o*_)+e*(-h*a+o*s)+i*(_*a-r*s)},n.identity=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},n.invert=function(){return t.invert(this,this),this},n.rotate=function(n){return t.rotate(this,n,this),this},n.scale=function(n){return t.scale(this,n,this),this},n.translate=function(n){return t.translate(this,n,this),this},n.transpose=function(){return t.transpose(this,this),this},n.clone=function(){var n=this.elements;return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},n.copyFrom=function(t){var n=this.elements,e=t.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],this},n.copyFromArray=function(t,n){void 0===n&&(n=0);for(var e=this.elements,i=0;i<12;i++)e[i]=t[i+n];return this},n.copyToArray=function(t,n){void 0===n&&(n=0);var e=this.elements;t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t[n+4]=e[4],t[n+5]=e[5],t[n+6]=e[6],t[n+7]=e[7],t[n+8]=e[8]},n.copyFromMatrix=function(t){var n=t.elements,e=this.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],this},t}(),y=function(){function t(t,n,e,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=1),this._x=void 0,this._y=void 0,this._z=void 0,this._w=void 0,this._onValueChanged=null,this._x=t,this._y=n,this._z=e,this._w=i}t.add=function(t,n,e){e._x=t._x+n._x,e._y=t._y+n._y,e._z=t._z+n._z,e._w=t._w+n._w,e._onValueChanged&&e._onValueChanged()},t.multiply=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w,s=n._x,_=n._y,h=n._z,u=n._w;e._x=i*u+o*s+a*h-r*_,e._y=a*u+o*_+r*s-i*h,e._z=r*u+o*h+i*_-a*s,e._w=o*u-i*s-a*_-r*h,e._onValueChanged&&e._onValueChanged()},t.conjugate=function(t,n){n._x=-t._x,n._y=-t._y,n._z=-t._z,n._w=t._w,n._onValueChanged&&n._onValueChanged()},t.dot=function(t,n){return t._x*n._x+t._y*n._y+t._z*n._z+t._w*n._w},t.equals=function(t,n){return r.equals(t._x,n._x)&&r.equals(t._y,n._y)&&r.equals(t._z,n._z)&&r.equals(t._w,n._w)},t.rotationAxisAngle=function(n,e,i){var a=t._tempVector3;o.normalize(n,a),e*=.5;var r=Math.sin(e);i._x=a._x*r,i._y=a._y*r,i._z=a._z*r,i._w=Math.cos(e),i._onValueChanged&&i._onValueChanged()},t.rotationEuler=function(n,e,i,a){t.rotationYawPitchRoll(e,n,i,a)},t.rotationYawPitchRoll=function(t,n,e,i){var a=.5*e,r=.5*n,o=.5*t,s=Math.sin(a),_=Math.cos(a),h=Math.sin(r),u=Math.cos(r),c=Math.sin(o),l=Math.cos(o),y=l*u,d=c*h;i._x=l*h*_+c*u*s,i._y=c*u*_-l*h*s,i._z=y*s-d*_,i._w=y*_+d*s,i._onValueChanged&&i._onValueChanged()},t.rotationMatrix3x3=function(t,n){var e,i,a=t.elements,r=a[0],o=a[1],s=a[2],_=a[3],h=a[4],u=a[5],c=a[6],l=a[7],y=a[8],d=r+h+y;d>0?(e=Math.sqrt(d+1),n._w=.5*e,e=.5/e,n._x=(u-l)*e,n._y=(c-s)*e,n._z=(o-_)*e):r>=h&&r>=y?(i=.5/(e=Math.sqrt(1+r-h-y)),n._x=.5*e,n._y=(o+_)*i,n._z=(s+c)*i,n._w=(u-l)*i):h>y?(i=.5/(e=Math.sqrt(1+h-r-y)),n._x=(_+o)*i,n._y=.5*e,n._z=(l+u)*i,n._w=(c-s)*i):(i=.5/(e=Math.sqrt(1+y-r-h)),n._x=(s+c)*i,n._y=(u+l)*i,n._z=.5*e,n._w=(o-_)*i),n._onValueChanged&&n._onValueChanged()},t.invert=function(t,n){var e=t._x,i=t._y,a=t._z,o=t._w,s=e*e+i*i+a*a+o*o;if(s>r.zeroTolerance){var _=1/s;n._x=-e*_,n._y=-i*_,n._z=-a*_,n._w=o*_,n._onValueChanged&&n._onValueChanged()}},t.lerp=function(n,e,i,a){var r=1-i;t.dot(n,e)>=0?(a._x=n._x*r+e._x*i,a._y=n._y*r+e._y*i,a._z=n._z*r+e._z*i,a._w=n._w*r+e._w*i):(a._x=n._x*r-e._x*i,a._y=n._y*r-e._y*i,a._z=n._z*r-e._z*i,a._w=n._w*r-e._w*i),a.normalize()},t.slerp=function(t,n,e,i){var a,o,s=t._x,_=t._y,h=t._z,u=t._w,c=n._x,l=n._y,y=n._z,d=n._w,f=s*c+_*l+h*y+u*d;if(f<0&&(f=-f,c=-c,l=-l,y=-y,d=-d),1-f>r.zeroTolerance){var x=Math.acos(f),m=Math.sin(x);a=Math.sin((1-e)*x)/m,o=Math.sin(e*x)/m}else a=1-e,o=e;i._x=a*s+o*c,i._y=a*_+o*l,i._z=a*h+o*y,i._w=a*u+o*d,i._onValueChanged&&i._onValueChanged()},t.normalize=function(t,n){var e=t._x,i=t._y,a=t._z,o=t._w,s=Math.sqrt(e*e+i*i+a*a+o*o);s>r.zeroTolerance&&(s=1/s,n._x=e*s,n._y=i*s,n._z=a*s,n._w=o*s,n._onValueChanged&&n._onValueChanged())},t.rotationX=function(t,n){t*=.5;var e=Math.sin(t),i=Math.cos(t);n._x=e,n._y=0,n._z=0,n._w=i,n._onValueChanged&&n._onValueChanged()},t.rotationY=function(t,n){t*=.5;var e=Math.sin(t),i=Math.cos(t);n._x=0,n._y=e,n._z=0,n._w=i,n._onValueChanged&&n._onValueChanged()},t.rotationZ=function(t,n){t*=.5;var e=Math.sin(t),i=Math.cos(t);n._x=0,n._y=0,n._z=e,n._w=i,n._onValueChanged&&n._onValueChanged()},t.rotateX=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w;n*=.5;var s=Math.sin(n),_=Math.cos(n);e._x=i*_+o*s,e._y=a*_+r*s,e._z=r*_-a*s,e._w=o*_-i*s,e._onValueChanged&&e._onValueChanged()},t.rotateY=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w;n*=.5;var s=Math.sin(n),_=Math.cos(n);e._x=i*_-r*s,e._y=a*_+o*s,e._z=r*_+i*s,e._w=o*_-a*s,e._onValueChanged&&e._onValueChanged()},t.rotateZ=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w;n*=.5;var s=Math.sin(n),_=Math.cos(n);e._x=i*_+a*s,e._y=a*_-i*s,e._z=r*_+o*s,e._w=o*_-r*s,e._onValueChanged&&e._onValueChanged()},t.scale=function(t,n,e){e._x=t._x*n,e._y=t._y*n,e._z=t._z*n,e._w=t._w*n,e._onValueChanged&&e._onValueChanged()};var n=t.prototype;return n.set=function(t,n,e,i){return this._x=t,this._y=n,this._z=e,this._w=i,this._onValueChanged&&this._onValueChanged(),this},n.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onValueChanged&&this._onValueChanged(),this},n.getAxisAngle=function(t){var n=this._x,e=this._y,i=this._z,a=n*n+e*e+i*i;if(a<r.zeroTolerance)return t._x=1,t._y=0,t._z=0,0;var o=1/a;return t._x=this._x*o,t._y=this._y*o,t._z=this._z*o,2*Math.acos(this._w)},n.identity=function(){return this._x=0,this._y=0,this._z=0,this._w=1,this._onValueChanged&&this._onValueChanged(),this},n.length=function(){var t=this._x,n=this._y,e=this._z,i=this._w;return Math.sqrt(t*t+n*n+e*e+i*i)},n.lengthSquared=function(){var t=this._x,n=this._y,e=this._z,i=this._w;return t*t+n*n+e*e+i*i},n.normalize=function(){return t.normalize(this,this),this},n.toEuler=function(t){this._toYawPitchRoll(t);var n=t._x;return t._x=t._y,t._y=n,t._onValueChanged&&t._onValueChanged(),t},n.toYawPitchRoll=function(t){return this._toYawPitchRoll(t),t._onValueChanged&&t._onValueChanged(),t},n.rotateX=function(n){return t.rotateX(this,n,this),this},n.rotateY=function(n){return t.rotateY(this,n,this),this},n.rotateZ=function(n){return t.rotateZ(this,n,this),this},n.rotationAxisAngle=function(n,e){return t.rotationAxisAngle(n,e,this),this},n.multiply=function(n){return t.multiply(this,n,this),this},n.invert=function(){return t.invert(this,this),this},n.dot=function(n){return t.dot(this,n)},n.lerp=function(n,e){return t.lerp(this,n,e,this),this},n.rotateAxisAngle=function(n,e){return t._tempQuat1.rotationAxisAngle(n,e),this.multiply(t._tempQuat1),this},n.clone=function(){return new t(this._x,this._y,this._z,this._w)},n.copyFrom=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onValueChanged&&this._onValueChanged(),this},n.copyFromArray=function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onValueChanged&&this._onValueChanged(),this},n.copyToArray=function(t,n){void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w},n._toYawPitchRoll=function(t){var n=this._x,e=this._y,i=this._z,a=this._w,o=n*n,s=e*e,_=i*i,h=n*e,u=i*a,c=i*n,l=e*a,y=e*i,d=n*a;return t._y=Math.asin(2*(d-y)),Math.cos(t.y)>r.zeroTolerance?(t._z=Math.atan2(2*(h+u),1-2*(_+o)),t._x=Math.atan2(2*(c+l),1-2*(s+o))):(t._z=Math.atan2(-2*(h-u),1-2*(s+_)),t._x=0),t},a(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onValueChanged&&this._onValueChanged()}},{key:"normalized",get:function(){return Math.abs(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w-1)<r.zeroTolerance}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onValueChanged&&this._onValueChanged()}}]),t}();y._tempVector3=new o,y._tempQuat1=new y;var d=function(){function t(t,n,e,i,a,r,o,s,_,h,u,c,l,y,d,f){void 0===t&&(t=1),void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===_&&(_=0),void 0===h&&(h=0),void 0===u&&(u=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===y&&(y=0),void 0===d&&(d=0),void 0===f&&(f=1),this.elements=new Float32Array(16);var x=this.elements;x[0]=t,x[1]=n,x[2]=e,x[3]=i,x[4]=a,x[5]=r,x[6]=o,x[7]=s,x[8]=_,x[9]=h,x[10]=u,x[11]=c,x[12]=l,x[13]=y,x[14]=d,x[15]=f}t.multiply=function(t,n,e){var i=t.elements,a=n.elements,r=e.elements,o=i[0],s=i[1],_=i[2],h=i[3],u=i[4],c=i[5],l=i[6],y=i[7],d=i[8],f=i[9],x=i[10],m=i[11],g=i[12],z=i[13],v=i[14],V=i[15],C=a[0],p=a[1],w=a[2],M=a[3],q=a[4],b=a[5],T=a[6],A=a[7],F=a[8],P=a[9],S=a[10],I=a[11],B=a[12],k=a[13],R=a[14],j=a[15];r[0]=o*C+u*p+d*w+g*M,r[1]=s*C+c*p+f*w+z*M,r[2]=_*C+l*p+x*w+v*M,r[3]=h*C+y*p+m*w+V*M,r[4]=o*q+u*b+d*T+g*A,r[5]=s*q+c*b+f*T+z*A,r[6]=_*q+l*b+x*T+v*A,r[7]=h*q+y*b+m*T+V*A,r[8]=o*F+u*P+d*S+g*I,r[9]=s*F+c*P+f*S+z*I,r[10]=_*F+l*P+x*S+v*I,r[11]=h*F+y*P+m*S+V*I,r[12]=o*B+u*k+d*R+g*j,r[13]=s*B+c*k+f*R+z*j,r[14]=_*B+l*k+x*R+v*j,r[15]=h*B+y*k+m*R+V*j},t.equals=function(t,n){var e=t.elements,i=n.elements;return r.equals(e[0],i[0])&&r.equals(e[1],i[1])&&r.equals(e[2],i[2])&&r.equals(e[3],i[3])&&r.equals(e[4],i[4])&&r.equals(e[5],i[5])&&r.equals(e[6],i[6])&&r.equals(e[7],i[7])&&r.equals(e[8],i[8])&&r.equals(e[9],i[9])&&r.equals(e[10],i[10])&&r.equals(e[11],i[11])&&r.equals(e[12],i[12])&&r.equals(e[13],i[13])&&r.equals(e[14],i[14])&&r.equals(e[15],i[15])},t.lerp=function(t,n,e,i){var a=t.elements,r=n.elements,o=i.elements,s=1-e;o[0]=a[0]*s+r[0]*e,o[1]=a[1]*s+r[1]*e,o[2]=a[2]*s+r[2]*e,o[3]=a[3]*s+r[3]*e,o[4]=a[4]*s+r[4]*e,o[5]=a[5]*s+r[5]*e,o[6]=a[6]*s+r[6]*e,o[7]=a[7]*s+r[7]*e,o[8]=a[8]*s+r[8]*e,o[9]=a[9]*s+r[9]*e,o[10]=a[10]*s+r[10]*e,o[11]=a[11]*s+r[11]*e,o[12]=a[12]*s+r[12]*e,o[13]=a[13]*s+r[13]*e,o[14]=a[14]*s+r[14]*e,o[15]=a[15]*s+r[15]*e},t.rotationQuaternion=function(t,n){var e=n.elements,i=t._x,a=t._y,r=t._z,o=t._w,s=i+i,_=a+a,h=r+r,u=i*s,c=a*s,l=a*_,y=r*s,d=r*_,f=r*h,x=o*s,m=o*_,g=o*h;e[0]=1-l-f,e[1]=c+g,e[2]=y-m,e[3]=0,e[4]=c-g,e[5]=1-u-f,e[6]=d+x,e[7]=0,e[8]=y+m,e[9]=d-x,e[10]=1-u-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},t.rotationAxisAngle=function(t,n,e){var i,a,o,s=e.elements,_=t._x,h=t._y,u=t._z,c=Math.sqrt(_*_+h*h+u*u);Math.abs(c)<r.zeroTolerance||(_*=c=1/c,h*=c,u*=c,i=Math.sin(n),o=1-(a=Math.cos(n)),s[0]=_*_*o+a,s[1]=h*_*o+u*i,s[2]=u*_*o-h*i,s[3]=0,s[4]=_*h*o-u*i,s[5]=h*h*o+a,s[6]=u*h*o+_*i,s[7]=0,s[8]=_*u*o+h*i,s[9]=h*u*o-_*i,s[10]=u*u*o+a,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1)},t.rotationTranslation=function(n,e,i){t.rotationQuaternion(n,i);var a=i.elements;a[12]=e._x,a[13]=e._y,a[14]=e._z},t.affineTransformation=function(t,n,e,i){var a=i.elements,r=n._x,o=n._y,s=n._z,_=n._w,h=r+r,u=o+o,c=s+s,l=r*h,y=r*u,d=r*c,f=o*u,x=o*c,m=s*c,g=_*h,z=_*u,v=_*c,V=t._x,C=t._y,p=t._z;a[0]=(1-(f+m))*V,a[1]=(y+v)*V,a[2]=(d-z)*V,a[3]=0,a[4]=(y-v)*C,a[5]=(1-(l+m))*C,a[6]=(x+g)*C,a[7]=0,a[8]=(d+z)*p,a[9]=(x-g)*p,a[10]=(1-(l+f))*p,a[11]=0,a[12]=e._x,a[13]=e._y,a[14]=e._z,a[15]=1},t.scaling=function(t,n){var e=n.elements;e[0]=t._x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t._y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t._z,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},t.translation=function(t,n){var e=n.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t._x,e[13]=t._y,e[14]=t._z,e[15]=1},t.invert=function(t,n){var e=t.elements,i=n.elements,a=e[0],r=e[1],o=e[2],s=e[3],_=e[4],h=e[5],u=e[6],c=e[7],l=e[8],y=e[9],d=e[10],f=e[11],x=e[12],m=e[13],g=e[14],z=e[15],v=a*h-r*_,V=a*u-o*_,C=a*c-s*_,p=r*u-o*h,w=r*c-s*h,M=o*c-s*u,q=l*m-y*x,b=l*g-d*x,T=l*z-f*x,A=y*g-d*m,F=y*z-f*m,P=d*z-f*g,S=v*P-V*F+C*A+p*T-w*b+M*q;if(!S)return null;S=1/S,i[0]=(h*P-u*F+c*A)*S,i[1]=(o*F-r*P-s*A)*S,i[2]=(m*M-g*w+z*p)*S,i[3]=(d*w-y*M-f*p)*S,i[4]=(u*T-_*P-c*b)*S,i[5]=(a*P-o*T+s*b)*S,i[6]=(g*C-x*M-z*V)*S,i[7]=(l*M-d*C+f*V)*S,i[8]=(_*F-h*T+c*q)*S,i[9]=(r*T-a*F-s*q)*S,i[10]=(x*w-m*C+z*v)*S,i[11]=(y*C-l*w-f*v)*S,i[12]=(h*b-_*A-u*q)*S,i[13]=(a*A-r*b+o*q)*S,i[14]=(m*V-x*p-g*v)*S,i[15]=(l*p-y*V+d*v)*S},t.lookAt=function(n,e,i,a){var r=a.elements,s=t._tempVec30,_=t._tempVec31,h=t._tempVec32;o.subtract(n,e,h),h.normalize(),o.cross(i,h,s),s.normalize(),o.cross(h,s,_),r[0]=s._x,r[1]=_._x,r[2]=h._x,r[3]=0,r[4]=s._y,r[5]=_._y,r[6]=h._y,r[7]=0,r[8]=s._z,r[9]=_._z,r[10]=h._z,r[11]=0,r[12]=-o.dot(s,n),r[13]=-o.dot(_,n),r[14]=-o.dot(h,n),r[15]=1},t.ortho=function(t,n,e,i,a,r,o){var s=o.elements,_=1/(t-n),h=1/(e-i),u=1/(a-r);s[0]=-2*_,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(t+n)*_,s[13]=(i+e)*h,s[14]=(r+a)*u,s[15]=1},t.perspective=function(t,n,e,i,a){var r=a.elements,o=1/Math.tan(t/2),s=1/(e-i);r[0]=o/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(i+e)*s,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*i*e*s,r[15]=0},t.rotateAxisAngle=function(t,n,e,i){var a=n._x,o=n._y,s=n._z,_=Math.sqrt(a*a+o*o+s*s);if(!(Math.abs(_)<r.zeroTolerance)){var h,u,c,l=t.elements,y=i.elements;a*=_=1/_,o*=_,s*=_,h=Math.sin(e),c=1-(u=Math.cos(e));var d=l[0],f=l[1],x=l[2],m=l[3],g=l[4],z=l[5],v=l[6],V=l[7],C=l[8],p=l[9],w=l[10],M=l[11],q=a*a*c+u,b=o*a*c+s*h,T=s*a*c-o*h,A=a*o*c-s*h,F=o*o*c+u,P=s*o*c+a*h,S=a*s*c+o*h,I=o*s*c-a*h,B=s*s*c+u;y[0]=d*q+g*b+C*T,y[1]=f*q+z*b+p*T,y[2]=x*q+v*b+w*T,y[3]=m*q+V*b+M*T,y[4]=d*A+g*F+C*P,y[5]=f*A+z*F+p*P,y[6]=x*A+v*F+w*P,y[7]=m*A+V*F+M*P,y[8]=d*S+g*I+C*B,y[9]=f*S+z*I+p*B,y[10]=x*S+v*I+w*B,y[11]=m*S+V*I+M*B,t!==i&&(y[12]=l[12],y[13]=l[13],y[14]=l[14],y[15]=l[15])}},t.scale=function(t,n,e){var i=t.elements,a=e.elements,r=n._x,o=n._y,s=n._z;a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*o,a[5]=i[5]*o,a[6]=i[6]*o,a[7]=i[7]*o,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]},t.translate=function(t,n,e){var i=t.elements,a=e.elements,r=n._x,o=n._y,s=n._z;if(t===e)a[12]=i[0]*r+i[4]*o+i[8]*s+i[12],a[13]=i[1]*r+i[5]*o+i[9]*s+i[13],a[14]=i[2]*r+i[6]*o+i[10]*s+i[14],a[15]=i[3]*r+i[7]*o+i[11]*s+i[15];else{var _=i[0],h=i[1],u=i[2],c=i[3],l=i[4],y=i[5],d=i[6],f=i[7],x=i[8],m=i[9],g=i[10],z=i[11];a[0]=_,a[1]=h,a[2]=u,a[3]=c,a[4]=l,a[5]=y,a[6]=d,a[7]=f,a[8]=x,a[9]=m,a[10]=g,a[11]=z,a[12]=_*r+l*o+x*s+i[12],a[13]=h*r+y*o+m*s+i[13],a[14]=u*r+d*o+g*s+i[14],a[15]=c*r+f*o+z*s+i[15]}},t.transpose=function(t,n){var e=t.elements,i=n.elements;if(n===t){var a=e[1],r=e[2],o=e[3],s=e[6],_=e[7],h=e[11];i[1]=e[4],i[2]=e[8],i[3]=e[12],i[4]=a,i[6]=e[9],i[7]=e[13],i[8]=r,i[9]=s,i[11]=e[14],i[12]=o,i[13]=_,i[14]=h}else i[0]=e[0],i[1]=e[4],i[2]=e[8],i[3]=e[12],i[4]=e[1],i[5]=e[5],i[6]=e[9],i[7]=e[13],i[8]=e[2],i[9]=e[6],i[10]=e[10],i[11]=e[14],i[12]=e[3],i[13]=e[7],i[14]=e[11],i[15]=e[15]};var n=t.prototype;return n.set=function(t,n,e,i,a,r,o,s,_,h,u,c,l,y,d,f){var x=this.elements;return x[0]=t,x[1]=n,x[2]=e,x[3]=i,x[4]=a,x[5]=r,x[6]=o,x[7]=s,x[8]=_,x[9]=h,x[10]=u,x[11]=c,x[12]=l,x[13]=y,x[14]=d,x[15]=f,this},n.multiply=function(n){return t.multiply(this,n,this),this},n.determinant=function(){var t=this.elements,n=t[0],e=t[1],i=t[2],a=t[3],r=t[4],o=t[5],s=t[6],_=t[7],h=t[8],u=t[9],c=t[10],l=t[11],y=t[12],d=t[13],f=t[14],x=t[15];return(n*o-e*r)*(c*x-l*f)-(n*s-i*r)*(u*x-l*d)+(n*_-a*r)*(u*f-c*d)+(e*s-i*o)*(h*x-l*y)-(e*_-a*o)*(h*f-c*y)+(i*_-a*s)*(h*d-u*y)},n.decompose=function(n,e,i){var a=t._tempMat30,o=this.elements,s=a.elements,_=o[0],h=o[1],u=o[2],c=o[3],l=o[4],d=o[5],f=o[6],x=o[7],m=o[8],g=o[9],z=o[10],v=o[11];n.set(o[12],o[13],o[14]);var V=Math.sign(_*h*u*c)<0?-1:1,C=Math.sign(l*d*f*x)<0?-1:1,p=Math.sign(m*g*z*v)<0?-1:1,w=V*Math.sqrt(_*_+h*h+u*u),M=C*Math.sqrt(l*l+d*d+f*f),q=p*Math.sqrt(m*m+g*g+z*z);if(i.set(w,M,q),Math.abs(w)<r.zeroTolerance||Math.abs(M)<r.zeroTolerance||Math.abs(q)<r.zeroTolerance)return e.identity(),!1;var b=1/w,T=1/M,A=1/q;return s[0]=_*b,s[1]=h*b,s[2]=u*b,s[3]=l*T,s[4]=d*T,s[5]=f*T,s[6]=m*A,s[7]=g*A,s[8]=z*A,y.rotationMatrix3x3(a,e),!0},n.getRotation=function(t){var n=this.elements,e=n[0]+n[5]+n[10];if(e>r.zeroTolerance){var i=2*Math.sqrt(e+1);t._w=.25*i,t._x=(n[6]-n[9])/i,t._y=(n[8]-n[2])/i,t._z=(n[1]-n[4])/i}else if(n[0]>n[5]&&n[0]>n[10]){var a=2*Math.sqrt(1+n[0]-n[5]-n[10]);t._w=(n[6]-n[9])/a,t._x=.25*a,t._y=(n[1]+n[4])/a,t._z=(n[8]+n[2])/a}else if(n[5]>n[10]){var o=2*Math.sqrt(1+n[5]-n[0]-n[10]);t._w=(n[8]-n[2])/o,t._x=(n[1]+n[4])/o,t._y=.25*o,t._z=(n[6]+n[9])/o}else{var s=2*Math.sqrt(1+n[10]-n[0]-n[5]);t._w=(n[1]-n[4])/s,t._x=(n[8]+n[2])/s,t._y=(n[6]+n[9])/s,t._z=.25*s}return t._onValueChanged&&t._onValueChanged(),t},n.getScaling=function(t){var n=this.elements,e=n[0],i=n[1],a=n[2],r=n[4],o=n[5],s=n[6],_=n[8],h=n[9],u=n[10];return t.set(Math.sqrt(e*e+i*i+a*a),Math.sqrt(r*r+o*o+s*s),Math.sqrt(_*_+h*h+u*u)),t},n.getTranslation=function(t){var n=this.elements;return t.set(n[12],n[13],n[14]),t},n.identity=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},n.invert=function(){return t.invert(this,this),this},n.rotateAxisAngle=function(n,e){return t.rotateAxisAngle(this,n,e,this),this},n.scale=function(n){return t.scale(this,n,this),this},n.translate=function(n){return t.translate(this,n,this),this},n.transpose=function(){return t.transpose(this,this),this},n.clone=function(){var n=this.elements;return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])},n.copyFrom=function(t){var n=this.elements,e=t.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],this},n.copyFromArray=function(t,n){void 0===n&&(n=0);for(var e=this.elements,i=0;i<16;i++)e[i]=t[i+n];return this},n.copyToArray=function(t,n){void 0===n&&(n=0);var e=this.elements;t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3],t[n+4]=e[4],t[n+5]=e[5],t[n+6]=e[6],t[n+7]=e[7],t[n+8]=e[8],t[n+9]=e[9],t[n+10]=e[10],t[n+11]=e[11],t[n+12]=e[12],t[n+13]=e[13],t[n+14]=e[14],t[n+15]=e[15]},t}();d._tempVec30=new o,d._tempVec31=new o,d._tempVec32=new o,d._tempMat30=new l,d._identity=new d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);var f=function(){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.origin=new o,this.direction=new o,t&&this.origin.copyFrom(t),n&&this.direction.copyFrom(n)}var n=t.prototype;return n.intersectPlane=function(t){return h.intersectsRayAndPlane(this,t)},n.intersectSphere=function(t){return h.intersectsRayAndSphere(this,t)},n.intersectBox=function(t){return h.intersectsRayAndBox(this,t)},n.getPoint=function(t,n){return o.scale(this.direction,t,n),n.add(this.origin)},t}(),x=function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this._x=void 0,this._y=void 0,this._onValueChanged=null,this._x=t,this._y=n}t.add=function(t,n,e){e._x=t._x+n._x,e._y=t._y+n._y,e._onValueChanged&&e._onValueChanged()},t.subtract=function(t,n,e){e._x=t._x-n._x,e._y=t._y-n._y,e._onValueChanged&&e._onValueChanged()},t.multiply=function(t,n,e){e._x=t._x*n._x,e._y=t._y*n._y,e._onValueChanged&&e._onValueChanged()},t.divide=function(t,n,e){e._x=t._x/n._x,e._y=t._y/n._y,e._onValueChanged&&e._onValueChanged()},t.dot=function(t,n){return t._x*n._x+t._y*n._y},t.distance=function(t,n){var e=n._x-t._x,i=n._y-t._y;return Math.sqrt(e*e+i*i)},t.distanceSquared=function(t,n){var e=n._x-t._x,i=n._y-t._y;return e*e+i*i},t.equals=function(t,n){return r.equals(t._x,n._x)&&r.equals(t._y,n._y)},t.lerp=function(t,n,e,i){var a=t._x,r=t._y;i._x=a+(n._x-a)*e,i._y=r+(n._y-r)*e,i._onValueChanged&&i._onValueChanged()},t.max=function(t,n,e){e._x=Math.max(t._x,n._x),e._y=Math.max(t._y,n._y),e._onValueChanged&&e._onValueChanged()},t.min=function(t,n,e){e._x=Math.min(t._x,n._x),e._y=Math.min(t._y,n._y),e._onValueChanged&&e._onValueChanged()},t.negate=function(t,n){n._x=-t._x,n._y=-t._y,n._onValueChanged&&n._onValueChanged()},t.normalize=function(t,n){var e=t._x,i=t._y,a=Math.sqrt(e*e+i*i);a>r.zeroTolerance&&(a=1/a,n._x=e*a,n._y=i*a,n._onValueChanged&&n._onValueChanged())},t.scale=function(t,n,e){e._x=t._x*n,e._y=t._y*n,e._onValueChanged&&e._onValueChanged()};var n=t.prototype;return n.set=function(t,n){return this._x=t,this._y=n,this._onValueChanged&&this._onValueChanged(),this},n.add=function(t){return this._x+=t._x,this._y+=t._y,this._onValueChanged&&this._onValueChanged(),this},n.subtract=function(t){return this._x-=t._x,this._y-=t._y,this._onValueChanged&&this._onValueChanged(),this},n.multiply=function(t){return this._x*=t._x,this._y*=t._y,this._onValueChanged&&this._onValueChanged(),this},n.divide=function(t){return this._x/=t._x,this._y/=t._y,this._onValueChanged&&this._onValueChanged(),this},n.length=function(){var t=this._x,n=this._y;return Math.sqrt(t*t+n*n)},n.lengthSquared=function(){var t=this._x,n=this._y;return t*t+n*n},n.negate=function(){return this._x=-this._x,this._y=-this._y,this._onValueChanged&&this._onValueChanged(),this},n.normalize=function(){return t.normalize(this,this),this},n.scale=function(t){return this._x*=t,this._y*=t,this._onValueChanged&&this._onValueChanged(),this},n.clone=function(){return new t(this._x,this._y)},n.copyFrom=function(t){return this._x=t.x,this._y=t.y,this._onValueChanged&&this._onValueChanged(),this},n.copyFromArray=function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._onValueChanged&&this._onValueChanged(),this},n.copyToArray=function(t,n){void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y},a(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onValueChanged&&this._onValueChanged()}}]),t}();x._zero=new x(0,0),x._one=new x(1,1);var m=function(){function t(t,n,e,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=0),this._x=void 0,this._y=void 0,this._z=void 0,this._w=void 0,this._onValueChanged=null,this._x=t,this._y=n,this._z=e,this._w=i}t.add=function(t,n,e){e._x=t._x+n._x,e._y=t._y+n._y,e._z=t._z+n._z,e._w=t._w+n._w,e._onValueChanged&&e._onValueChanged()},t.subtract=function(t,n,e){e._x=t._x-n._x,e._y=t._y-n._y,e._z=t._z-n._z,e._w=t._w-n._w,e._onValueChanged&&e._onValueChanged()},t.multiply=function(t,n,e){e._x=t._x*n._x,e._y=t._y*n._y,e._z=t._z*n._z,e._w=t._w*n._w,e._onValueChanged&&e._onValueChanged()},t.divide=function(t,n,e){e._x=t._x/n._x,e._y=t._y/n._y,e._z=t._z/n._z,e._w=t._w/n._w,e._onValueChanged&&e._onValueChanged()},t.dot=function(t,n){return t._x*n._x+t._y*n._y+t._z*n._z+t._w*n._w},t.distance=function(t,n){var e=n._x-t._x,i=n._y-t._y,a=n._z-t._z,r=n._w-t._w;return Math.sqrt(e*e+i*i+a*a+r*r)},t.distanceSquared=function(t,n){var e=n._x-t._x,i=n._y-t._y,a=n._z-t._z,r=n._w-t._w;return e*e+i*i+a*a+r*r},t.equals=function(t,n){return r.equals(t._x,n._x)&&r.equals(t._y,n._y)&&r.equals(t._z,n._z)&&r.equals(t._w,n._w)},t.lerp=function(t,n,e,i){var a=t._x,r=t._y,o=t._z,s=t._w;i._x=a+(n._x-a)*e,i._y=r+(n._y-r)*e,i._z=o+(n._z-o)*e,i._w=s+(n._w-s)*e,i._onValueChanged&&i._onValueChanged()},t.max=function(t,n,e){e._x=Math.max(t._x,n._x),e._y=Math.max(t._y,n._y),e._z=Math.max(t._z,n._z),e._w=Math.max(t._w,n._w),e._onValueChanged&&e._onValueChanged()},t.min=function(t,n,e){e._x=Math.min(t._x,n._x),e._y=Math.min(t._y,n._y),e._z=Math.min(t._z,n._z),e._w=Math.min(t._w,n._w),e._onValueChanged&&e._onValueChanged()},t.negate=function(t,n){n._x=-t._x,n._y=-t._y,n._z=-t._z,n._w=-t._w,n._onValueChanged&&n._onValueChanged()},t.normalize=function(t,n){var e=t._x,i=t._y,a=t._z,o=t._w,s=Math.sqrt(e*e+i*i+a*a+o*o);s>r.zeroTolerance&&(s=1/s,n._x=e*s,n._y=i*s,n._z=a*s,n._w=o*s,n._onValueChanged&&n._onValueChanged())},t.scale=function(t,n,e){e._x=t._x*n,e._y=t._y*n,e._z=t._z*n,e._w=t._w*n,e._onValueChanged&&e._onValueChanged()},t.transform=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w,s=n.elements;e._x=i*s[0]+a*s[4]+r*s[8]+o*s[12],e._y=i*s[1]+a*s[5]+r*s[9]+o*s[13],e._z=i*s[2]+a*s[6]+r*s[10]+o*s[14],e._w=i*s[3]+a*s[7]+r*s[11]+o*s[15],e._onValueChanged&&e._onValueChanged()},t.transformByQuat=function(t,n,e){var i=t._x,a=t._y,r=t._z,o=t._w,s=n._x,_=n._y,h=n._z,u=n._w,c=u*i+_*r-h*a,l=u*a+h*i-s*r,y=u*r+s*a-_*i,d=-s*i-_*a-h*r;e._x=c*u-d*s-l*h+y*_,e._y=l*u-d*_-y*s+c*h,e._z=y*u-d*h-c*_+l*s,e._w=o,e._onValueChanged&&e._onValueChanged()};var n=t.prototype;return n.set=function(t,n,e,i){return this._x=t,this._y=n,this._z=e,this._w=i,this._onValueChanged&&this._onValueChanged(),this},n.add=function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this._onValueChanged&&this._onValueChanged(),this},n.subtract=function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this._onValueChanged&&this._onValueChanged(),this},n.multiply=function(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this._w*=t._w,this._onValueChanged&&this._onValueChanged(),this},n.divide=function(t){return this._x/=t._x,this._y/=t._y,this._z/=t._z,this._w/=t._w,this._onValueChanged&&this._onValueChanged(),this},n.length=function(){var t=this._x,n=this._y,e=this._z,i=this._w;return Math.sqrt(t*t+n*n+e*e+i*i)},n.lengthSquared=function(){var t=this._x,n=this._y,e=this._z,i=this._w;return t*t+n*n+e*e+i*i},n.negate=function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._w=-this._w,this._onValueChanged&&this._onValueChanged(),this},n.normalize=function(){return t.normalize(this,this),this},n.scale=function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this._onValueChanged&&this._onValueChanged(),this},n.clone=function(){return new t(this._x,this._y,this._z,this._w)},n.copyFrom=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onValueChanged&&this._onValueChanged(),this},n.copyFromArray=function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onValueChanged&&this._onValueChanged(),this},n.copyToArray=function(t,n){void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w},a(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onValueChanged&&this._onValueChanged()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onValueChanged&&this._onValueChanged()}}]),t}();m._zero=new m(0,0,0,0),m._one=new m(1,1,1,1);var g=function(){function t(t,n,e,i){void 0===t&&(t=1),void 0===n&&(n=1),void 0===e&&(e=1),void 0===i&&(i=1),this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,this.r=t,this.g=n,this.b=e,this.a=i}t.gammaToLinearSpace=function(t){return t<=0?0:t<=.04045?t/12.92:t<1?Math.pow((t+.055)/1.055,2.4):Math.pow(t,2.4)},t.linearToGammaSpace=function(t){return t<=0?0:t<.0031308?12.92*t:t<1?1.055*Math.pow(t,.41666)-.055:Math.pow(t,.41666)},t.equals=function(t,n){return r.equals(t.r,n.r)&&r.equals(t.g,n.g)&&r.equals(t.b,n.b)&&r.equals(t.a,n.a)},t.add=function(t,n,e){return e.r=t.r+n.r,e.g=t.g+n.g,e.b=t.b+n.b,e.a=t.a+n.a,e},t.scale=function(t,n,e){return e.r=t.r*n,e.g=t.g*n,e.b=t.b*n,e.a=t.a*n,e};var n=t.prototype;return n.set=function(t,n,e,i){return this.r=t,this.g=n,this.b=e,this.a=i,this},n.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},n.scale=function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this},n.clone=function(){return new t(this.r,this.g,this.b,this.a)},n.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},n.toLinear=function(n){return n.r=t.gammaToLinearSpace(this.r),n.g=t.gammaToLinearSpace(this.g),n.b=t.gammaToLinearSpace(this.b),n},n.toGamma=function(n){return n.r=t.linearToGammaSpace(this.r),n.g=t.linearToGammaSpace(this.g),n.b=t.linearToGammaSpace(this.b),n},t}(),z=function(){function t(t,n,e,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.x=t,this.y=n,this.width=e,this.height=i}var n=t.prototype;return n.set=function(t,n,e,i){return this.x=t,this.y=n,this.width=e,this.height=i,this},n.clone=function(){return new t(this.x,this.y,this.width,this.height)},n.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t}(),v=function(){function t(){this.coefficients=new Float32Array(27)}var n=t.prototype;return n.addLight=function(t,n,e){n.scale(e);var i=this.coefficients,a=t._x,r=t._y,o=t._z,s=n.r,_=n.g,h=n.b,u=.282095,c=-.488603*r,l=.488603*o,y=-.488603*a,d=a*r*1.092548,f=r*o*-1.092548,x=.315392*(3*o*o-1),m=a*o*-1.092548,g=.546274*(a*a-r*r);i[0]+=s*u,i[1]+=_*u,i[2]+=h*u,i[3]+=s*c,i[4]+=_*c,i[5]+=h*c,i[6]+=s*l,i[7]+=_*l,i[8]+=h*l,i[9]+=s*y,i[10]+=_*y,i[11]+=h*y,i[12]+=s*d,i[13]+=_*d,i[14]+=h*d,i[15]+=s*f,i[16]+=_*f,i[17]+=h*f,i[18]+=s*x,i[19]+=_*x,i[20]+=h*x,i[21]+=s*m,i[22]+=_*m,i[23]+=h*m,i[24]+=s*g,i[25]+=_*g,i[26]+=h*g},n.evaluate=function(t,n){var e=this.coefficients,i=t._x,a=t._y,r=t._z,o=.886227,s=-1.023327*a,_=1.023327*r,h=-1.023327*i,u=.858086*a*i,c=-.858086*a*r,l=.247708*(3*r*r-1),y=-.858086*r*i,d=.429042*(i*i-a*a),f=e[0]*o,x=e[1]*o,m=e[2]*o;return f+=e[3]*s+e[6]*_+e[9]*h,x+=e[4]*s+e[7]*_+e[10]*h,m+=e[5]*s+e[8]*_+e[11]*h,f+=e[12]*u+e[15]*c+e[18]*l+e[21]*y+e[24]*d,x+=e[13]*u+e[16]*c+e[19]*l+e[22]*y+e[25]*d,m+=e[14]*u+e[17]*c+e[20]*l+e[23]*y+e[26]*d,n.set(f,x,m,1),n},n.scale=function(t){var n=this.coefficients;n[0]*=t,n[1]*=t,n[2]*=t,n[3]*=t,n[4]*=t,n[5]*=t,n[6]*=t,n[7]*=t,n[8]*=t,n[9]*=t,n[10]*=t,n[11]*=t,n[12]*=t,n[13]*=t,n[14]*=t,n[15]*=t,n[16]*=t,n[17]*=t,n[18]*=t,n[19]*=t,n[20]*=t,n[21]*=t,n[22]*=t,n[23]*=t,n[24]*=t,n[25]*=t,n[26]*=t},n.clone=function(){var n=new t;return n.copyFrom(this),n},n.copyFrom=function(t){return t.copyToArray(this.coefficients),this},n.copyFromArray=function(t,n){void 0===n&&(n=0);var e=this.coefficients;e[0]=t[n],e[1]=t[1+n],e[2]=t[2+n],e[3]=t[3+n],e[4]=t[4+n],e[5]=t[5+n],e[6]=t[6+n],e[7]=t[7+n],e[8]=t[8+n],e[9]=t[9+n],e[10]=t[10+n],e[11]=t[11+n],e[12]=t[12+n],e[13]=t[13+n],e[14]=t[14+n],e[15]=t[15+n],e[16]=t[16+n],e[17]=t[17+n],e[18]=t[18+n],e[19]=t[19+n],e[20]=t[20+n],e[21]=t[21+n],e[22]=t[22+n],e[23]=t[23+n],e[24]=t[24+n],e[25]=t[25+n],e[26]=t[26+n]},n.copyToArray=function(t,n){void 0===n&&(n=0);var e=this.coefficients;t[0+n]=e[0],t[1+n]=e[1],t[2+n]=e[2],t[3+n]=e[3],t[4+n]=e[4],t[5+n]=e[5],t[6+n]=e[6],t[7+n]=e[7],t[8+n]=e[8],t[9+n]=e[9],t[10+n]=e[10],t[11+n]=e[11],t[12+n]=e[12],t[13+n]=e[13],t[14+n]=e[14],t[15+n]=e[15],t[16+n]=e[16],t[17+n]=e[17],t[18+n]=e[18],t[19+n]=e[19],t[20+n]=e[20],t[21+n]=e[21],t[22+n]=e[22],t[23+n]=e[23],t[24+n]=e[24],t[25+n]=e[25],t[26+n]=e[26]},t}();t.BoundingBox=_,t.BoundingFrustum=c,t.BoundingSphere=s,t.CollisionUtil=h,t.Color=g,t.MathUtil=r,t.Matrix=d,t.Matrix3x3=l,t.Plane=u,t.Quaternion=y,t.Ray=f,t.Rect=z,t.SphericalHarmonics3=v,t.Vector2=x,t.Vector3=o,t.Vector4=m,Object.defineProperty(t,"__esModule",{value:!0})}));
